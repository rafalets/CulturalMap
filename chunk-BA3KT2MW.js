import{h as p,i as y,j as f,k as g}from"./chunk-SP2CO3KX.js";import{r as c,t as m}from"./chunk-HHDFN2GK.js";import{a as s,b as i}from"./chunk-VTHXE323.js";function z(n,r,e,a,t){if(n==null)return null;let o=n.references("geometry")&&t?w(r,a,t):r,u=n.repurposeFeature(o);try{return n.evaluate(i(s({},e),{$feature:u}),n.services)}catch(d){return c.getLogger("esri.views.2d.support.arcadeOnDemand").warn("Feature arcade evaluation failed:",d),null}}var l=new Map;function w(n,r,e){let{transform:a,hasZ:t,hasM:o}=e;l.has(r)||l.set(r,h(r));let u=l.get(r)(n.geometry,a,t,o);return i(s({},n),{geometry:u})}function h(n){let r={};switch(n){case"esriGeometryPoint":return(e,a,t,o)=>y(a,r,e,t,o);case"esriGeometryPolygon":return(e,a,t,o)=>f(a,r,e,t,o);case"esriGeometryPolyline":return(e,a,t,o)=>g(a,r,e,t,o);case"esriGeometryMultipoint":return(e,a,t,o)=>p(a,r,e,t,o);default:return c.getLogger("esri.views.2d.support.arcadeOnDemand").error(new m("mapview-arcade",`Unable to handle geometryType: ${n}`)),e=>e}}export{z as a};
