import{a as _,b as g,h as G,i as v}from"./chunk-HWQBVARH.js";import{Aa as A,a as y,m as q,p as x,v as I}from"./chunk-UNRRVLTB.js";import{a as S,b as d}from"./chunk-6DVIB4O4.js";import{Da as T,b as p,tb as k,u as R,y as h}from"./chunk-JLMESEWM.js";import{t as b}from"./chunk-47GHT6OF.js";var P=class{getOperatorType(){return 10003}supportsCurves(){return!0}accelerateGeometry(e,r,o){return!1}canAccelerateGeometry(e){return!1}executeMany(e,r,o,n){return new w(e,r,o,n)}execute(e,r,o,n){let i=new d([e]),a=new d([r]),s=this.executeMany(i,a,o,n).next();return s||R("null output"),s}};function F(t,e,r,o){let n=t.getDimension(),i=e.getDimension();if(n!==i)return n>i?t:e;if(t.isEmpty())return e;if(e.isEmpty())return t;let a=new y,s=new y,u=new y;t.queryEnvelope(a),e.queryEnvelope(s),u.setCoords({env2D:a}),u.mergeEnvelope2D(s);let c=q(r,u,!0),l=t.getGeometryType(),f=e.getGeometryType();return l===p.enumPoint&&f===p.enumPoint?H(t,e,c):l===p.enumPoint&&f===p.enumMultiPoint?O(e,t,c):l===p.enumMultiPoint&&f===p.enumPoint?O(t,e,c):A(t,e,r,o)}function H(t,e,r,o){let n=x(r),i=n*n,a=t.getXY(),s=e.getXY(),u=new I({vd:t.getDescription()});return k.sqrDistance(a,s)>i&&(u.add(t),u.add(e)),u}function O(t,e,r,o){let n=t.getImpl().getAttributeStreamRef(0),i=t.getPointCount(),a=e.getXY(),s=t.createInstance(),u=x(r),c=new y;if(t.queryEnvelope(c),c.inflateCoords(u,u),c.contains(a)){let l=u*u,f=!1,D=T(i,!1);for(let m=0;m<i;m++){let z=n.read(2*m),B=n.read(2*m+1),E=z-a.x,C=B-a.y;E*E+C*C<=l&&(f=!0,D[m]=!0)}if(f)for(let m=0;m<i;m++)D[m]||s.addPoints(t,m,m+1);else s.addPoints(t,0,i),s.add(e)}else s.addPoints(t,0,i),s.add(e);return s}var w=class extends S{constructor(e,r,o,n){super(),this.m_progressTracker=n,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=o,this.m_rightGeom=r.next(),this.m_bEmpty=!this.m_rightGeom,h(this.m_rightGeom)}tock(){return!0}getRank(){return 1}next(){if(this.m_bEmpty)return null;let e=this.m_inputGeoms.next();return e?(h(e),this.m_index=this.m_inputGeoms.getGeometryID(),F(e,this.m_rightGeom,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}},M=new P;function X(t,e,r){return M.execute(t,e,r,null)}function Y(t,e,r){let o=M.executeMany(new d(t),new d([e]),r,null);return Array.from(o)}function j(){return M.supportsCurves()}function J(t,e){let r=_(t);return v(X(g(t),g(e),G(r)),r)}function K(t,e){let r=t.map(g),o=_(t);return Y(r,g(e),G(o)).map(n=>v(n,o)).filter(b)}var L=j(),oe=Object.freeze(Object.defineProperty({__proto__:null,execute:J,executeMany:K,supportsCurves:L},Symbol.toStringTag,{value:"Module"}));export{J as a,K as b,L as c,oe as d};
