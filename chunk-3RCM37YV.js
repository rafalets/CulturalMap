import{a as l}from"./chunk-J3BDQLVD.js";import{b as a}from"./chunk-6T37AWU6.js";import{a as n,e as r}from"./chunk-3SDSCSDJ.js";import{t as o}from"./chunk-C7INQGWT.js";function h(s,{timeZone:e,timeExtent:i}){return{$view:{scale:s,timeZone:e,timeProperties:{currentStart:i?.start,currentEnd:i?.end}}}}var u=class s{constructor(e,i){this.key=new l(0,0,0,0),this.bounds=n(),this.objectIds=new Set,this.key.set(i);let t=e.getLODInfoAt(this.key);this.tileInfoView=e,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=t.resolution,this.level=t.level,this.scale=t.scale,this.minScale=e.zoomToScale(t.level-1),this.maxScale=e.zoomToScale(t.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return r(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(e){return h(this.scale,e)}createChildTiles(){let e=this.key.getChildKeys(),i=o.acquire();for(let t=0;t<e.length;t++)i[t]=new s(this.tileInfoView,e[t]);return i}getQuantizationParameters(){return a.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}};export{h as a,u as b};
