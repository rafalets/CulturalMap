import{a as i,e as f}from"./chunk-PQO53LWF.js";import"./chunk-VDKRSX77.js";import"./chunk-E57FTRWF.js";import"./chunk-U4J5SECU.js";import"./chunk-7EG726PT.js";import"./chunk-C7INQGWT.js";import"./chunk-WMHJC7XF.js";import"./chunk-NJEWDTYF.js";import"./chunk-N3SDOFND.js";import"./chunk-OVHPPCBL.js";import"./chunk-FNXQZPHT.js";import"./chunk-3TQOUBNU.js";import"./chunk-D2LVMNOU.js";import"./chunk-SNFOAZZQ.js";import"./chunk-QGVBCWUY.js";import"./chunk-HHDFN2GK.js";import"./chunk-47GHT6OF.js";import{f as p}from"./chunk-VTHXE323.js";var o,e;function g(r){return p(this,null,function*(){if(yield d(),r.inputs.length<1)return{result:{status:i.Failed,error:"",jobDescJson:"",data:new Uint8Array(0),missingInputUrls:[]},transferList:[]};let n={ptrs:[],sizes:[]};for(let s of r.inputs){let c=e._malloc(s.byteLength);new Uint8Array(e.HEAPU8.buffer,c,s.byteLength).set(new Uint8Array(s)),n.ptrs.push(c),n.sizes.push(s.byteLength)}let t=e.process(r.jobDescJson,n,r.isMissingResourceCase),u=t.status===i.Succeeded&&t.data,l=t.status===i.MissingInputs&&t.missingInputUrls.length>0;if(u){let s=t.data.slice();t.data=s}else l&&(t.jobDescJson=t.jobDescJson.slice(),t.originalInputs=r.inputs.slice());for(let s=0;s<n.ptrs.length;++s)e._free(n.ptrs[s]);let a=[];if(u)a.push(t.data.buffer);else if(l)for(let s of r.inputs)a.push(s);return{result:t,transferList:a}})}function h(){e&&(e.uninitialize_lyr3d_worker_wasm(),e=null)}function d(){return e?Promise.resolve():(o||(o=f().then(r=>{e=r,e.initialize_lyr3d_worker_wasm(),o=null})),o)}export{h as destroyWasm,d as initialize,g as process};
