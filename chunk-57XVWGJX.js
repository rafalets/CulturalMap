import{L as c,d as a}from"./chunk-C7INQGWT.js";import{H as u}from"./chunk-WMHJC7XF.js";import{a as s}from"./chunk-QGVBCWUY.js";var b={visible:"visibleSublayers"},t=class extends c{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",r=>this.notifyChange(b[r.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:e})=>e).map(({name:e})=>e).join()}get version(){this.commitProperty("layers");let e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){let{layer:e,scale:r}=this,i=e?.sublayers,o=[],l=n=>{let{minScale:y,maxScale:p,sublayers:m,visible:h}=n;h&&(r===0||(y===0||r<=y)&&(p===0||r>=p))&&(m?m.forEach(l):o.push(n))};return i?.forEach(l),o}toJSON(){let{layer:e,layers:r}=this,{imageFormat:i,imageTransparency:o,version:l}=e;return{format:i,request:"GetMap",service:"WMS",styles:"",transparent:o?"TRUE":"FALSE",version:l,layers:r}}};s([a()],t.prototype,"layer",null),s([a({readOnly:!0})],t.prototype,"layers",null),s([a({type:Number})],t.prototype,"scale",void 0),s([a({readOnly:!0})],t.prototype,"version",null),s([a({readOnly:!0})],t.prototype,"visibleSublayers",null),t=s([u("esri.layers.support.ExportWMSImageParameters")],t);export{t as a};
