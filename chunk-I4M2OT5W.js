import{a as Q,f as q,j as J,k as O,n as U}from"./chunk-NTVLK3P2.js";import{a as T}from"./chunk-WMQNRNIU.js";import{p as L,r as D}from"./chunk-IG66NQHW.js";import{d as f}from"./chunk-C7INQGWT.js";import{H as K}from"./chunk-WMHJC7XF.js";import{a as u}from"./chunk-QGVBCWUY.js";import{l as H}from"./chunk-HHDFN2GK.js";var F=[0,0];function k(t,e){return e!=null&&p(t,e.x,e.y,e.z)}function ft(t,e){if(!e.points?.length)return!1;for(let i of e.points)if(!v(t,i))return!1;return!0}function $(t,e){let{xmin:i,ymin:s,zmin:n,xmax:r,ymax:a,zmax:o}=e;return t.hasZ&&e.hasZ?p(t,i,s,n)&&p(t,i,a,n)&&p(t,r,a,n)&&p(t,r,s,n)&&p(t,i,s,o)&&p(t,i,a,o)&&p(t,r,a,o)&&p(t,r,s,o):p(t,i,s)&&p(t,i,a)&&p(t,r,a)&&p(t,r,s)}function v(t,e){return p(t,e[0],e[1])}function tt(t,e){return p(t,e[0],e[1],e[2])}function p(t,e,i,s){return e>=t.xmin&&e<=t.xmax&&i>=t.ymin&&i<=t.ymax&&(s==null||!t.hasZ||s>=t.zmin&&s<=t.zmax)}function yt(t,e){return F[1]=e.y,F[0]=e.x,st(t,F)}function st(t,e){return X(t.rings,e)}function X(t,e){if(!t)return!1;if(rt(t))return V(!1,t,e);let i=!1;for(let s=0,n=t.length;s<n;s++)i=V(i,t[s],e);return i}function rt(t){return!Array.isArray(t[0][0])}function V(t,e,i){let[s,n]=i,r=t,a=0;for(let o=0,m=e.length;o<m;o++){a++,a===m&&(a=0);let[x,h]=e[o],[y,d]=e[a];(h<n&&d>=n||d<n&&h>=n)&&x+(n-h)/(d-h)*(y-x)<s&&(r=!r)}return r}function at(t,e){return k(t,e)}function mt(t,e){let i=t.hasZ&&e.hasZ,s,n,r;if(t.xmin<=e.xmin){if(s=e.xmin,t.xmax<s)return!1}else if(s=t.xmin,e.xmax<s)return!1;if(t.ymin<=e.ymin){if(n=e.ymin,t.ymax<n)return!1}else if(n=t.ymin,e.ymax<n)return!1;if(i&&e.hasZ){if(t.zmin<=e.zmin){if(r=e.zmin,t.zmax<r)return!1}else if(r=t.zmin,e.zmax<r)return!1}return!0}function ot(t,e){let{points:i,hasZ:s}=e,n=s?tt:v;for(let r of i)if(n(t,r))return!0;return!1}var Z=[0,0],I=[0,0],_=[0,0],N=[0,0],ht=[Z,I,_,N],et=[[_,Z],[Z,I],[I,N],[N,_]];function xt(t,e){return lt(t,e.rings)}function lt(t,e){Z[0]=t.xmin,Z[1]=t.ymax,I[0]=t.xmax,I[1]=t.ymax,_[0]=t.xmin,_[1]=t.ymin,N[0]=t.xmax,N[1]=t.ymin;for(let i of ht)if(X(e,i))return!0;for(let i of e){if(!i.length)continue;let s=i[0];if(v(t,s))return!0;for(let n=1;n<i.length;n++){let r=i[n];if(v(t,r)||it(s,r,et))return!0;s=r}}return!1}function ct(t,e){Z[0]=t.xmin,Z[1]=t.ymax,I[0]=t.xmax,I[1]=t.ymax,_[0]=t.xmin,_[1]=t.ymin,N[0]=t.xmax,N[1]=t.ymin;let i=e.paths;for(let s of i){if(!i.length)continue;let n=s[0];if(v(t,n))return!0;for(let r=1;r<s.length;r++){let a=s[r];if(v(t,a)||it(n,a,et))return!0;n=a}}return!1}var c=[0,0];function dt(t){for(let e=0;e<t.length;e++){let i=t[e];for(let n=0;n<i.length-1;n++){let r=i[n],a=i[n+1];for(let o=e+1;o<t.length;o++)for(let m=0;m<t[o].length-1;m++){let x=t[o][m],h=t[o][m+1];if(Y(r,a,x,h,c)&&!(c[0]===r[0]&&c[1]===r[1]||c[0]===x[0]&&c[1]===x[1]||c[0]===a[0]&&c[1]===a[1]||c[0]===h[0]&&c[1]===h[1]))return!0}}let s=i.length;if(!(s<=4))for(let n=0;n<s-3;n++){let r=s-1;n===0&&(r=s-2);let a=i[n],o=i[n+1];for(let m=n+2;m<r;m++){let x=i[m],h=i[m+1];if(Y(a,o,x,h,c)&&!(c[0]===a[0]&&c[1]===a[1]||c[0]===x[0]&&c[1]===x[1]||c[0]===o[0]&&c[1]===o[1]||c[0]===h[0]&&c[1]===h[1]))return!0}}}return!1}function it(t,e,i){for(let s=0;s<i.length;s++)if(Y(t,e,i[s][0],i[s][1]))return!0;return!1}function Y(t,e,i,s,n){let[r,a]=t,[o,m]=e,[x,h]=i,[y,d]=s,g=y-x,M=r-x,w=o-r,b=d-h,S=a-h,j=m-a,R=b*w-g*j;if(R===0)return!1;let P=(g*S-b*M)/R,G=(w*S-j*M)/R;return P>=0&&P<=1&&G>=0&&G<=1&&(n&&(n[0]=r+P*(o-r),n[1]=a+P*(m-a)),!0)}function nt(t){switch(t){case"esriGeometryEnvelope":case"extent":return mt;case"esriGeometryMultipoint":case"multipoint":return ot;case"esriGeometryPoint":case"point":return at;case"esriGeometryMultiPatch":case"multipatch":case"esriGeometryPolygon":case"polygon":return xt;case"esriGeometryPolyline":case"polyline":return ct}}var z;function ut(t){return t&&(t.declaredClass==="esri.geometry.SpatialReference"||t.wkid!=null)}function C(t,e,i){return e==null?i:i==null?e:t(e,i)}var l=z=class extends Q{constructor(...t){super(...t),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(t,e,i,s,n){return ut(t)?{spatialReference:t,xmin:0,ymin:0,xmax:0,ymax:0}:typeof t=="object"?(t.spatialReference=t.spatialReference==null?T.WGS84:t.spatialReference,t):{xmin:t,ymin:e,xmax:i,ymax:s,spatialReference:n??T.WGS84}}static fromPoint(t){return new z({xmin:t.x,ymin:t.y,zmin:t.z,xmax:t.x,ymax:t.y,zmax:t.z,spatialReference:t.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){let t=new U({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(t.z=.5*(this.zmin+this.zmax)),this.hasM&&(t.m=.5*(this.mmin+this.mmax)),t}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(t){let e=this.center;return t.z!=null&&this.hasZ?this.offset(t.x-e.x,t.y-e.y,t.z-e.z):this.offset(t.x-e.x,t.y-e.y)}clone(){let t=new z;return t.xmin=this.xmin,t.ymin=this.ymin,t.xmax=this.xmax,t.ymax=this.ymax,t.spatialReference=this.spatialReference,this.zmin!=null&&(t.zmin=this.zmin,t.zmax=this.zmax),this.mmin!=null&&(t.mmin=this.mmin,t.mmax=this.mmax),t}contains(t){if(!t)return!1;let e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&q(e,i)&&(t=e.isWebMercator?J(t):O(t,!0)),t.type==="point"?k(this,t):t.type==="extent"&&$(this,t)}equals(t){if(this===t)return!0;if(t==null)return!1;let e=this.spatialReference,i=t.spatialReference;return e&&i&&!e.equals(i)&&q(e,i)&&(t=e.isWebMercator?J(t):O(t,!0)),this.xmin===t.xmin&&this.ymin===t.ymin&&this.zmin===t.zmin&&this.mmin===t.mmin&&this.xmax===t.xmax&&this.ymax===t.ymax&&this.zmax===t.zmax&&this.mmax===t.mmax}expand(t){let e=.5*(1-t),i=this.width*e,s=this.height*e;if(this.xmin+=i,this.ymin+=s,this.xmax-=i,this.ymax-=s,this.hasZ){let n=(this.zmax-this.zmin)*e;this.zmin+=n,this.zmax-=n}if(this.hasM){let n=(this.mmax-this.mmin)*e;this.mmin+=n,this.mmax-=n}return this}intersects(t){if(t==null)return!1;t.type==="mesh"&&(t=t.extent);let e=this.spatialReference,i=t.spatialReference;return e&&i&&!L(e,i)&&q(e,i)&&(t=e.isWebMercator?J(t):O(t,!0)),nt(t.type)(this,t)}normalize(){let t=this._normalize(!1,!0);return Array.isArray(t)?t:[t]}offset(t,e,i){return this.xmin+=t,this.ymin+=e,this.xmax+=t,this.ymax+=e,i!=null&&(this.zmin+=i,this.zmax+=i),this}shiftCentralMeridian(){return this._normalize(!0)}union(t){return this===t||(this.xmin=Math.min(this.xmin,t.xmin),this.ymin=Math.min(this.ymin,t.ymin),this.xmax=Math.max(this.xmax,t.xmax),this.ymax=Math.max(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=C(Math.min,this.zmin,t.zmin),this.zmax=C(Math.max,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=C(Math.min,this.mmin,t.mmin),this.mmax=C(Math.max,this.mmax,t.mmax))),this}intersection(t){return this===t?this:t!=null&&this.intersects(t)?(this.xmin=Math.max(this.xmin,t.xmin),this.ymin=Math.max(this.ymin,t.ymin),this.xmax=Math.min(this.xmax,t.xmax),this.ymax=Math.min(this.ymax,t.ymax),(this.hasZ||t.hasZ)&&(this.zmin=C(Math.max,this.zmin,t.zmin),this.zmax=C(Math.min,this.zmax,t.zmax)),(this.hasM||t.hasM)&&(this.mmin=C(Math.max,this.mmin,t.mmin),this.mmax=C(Math.min,this.mmax,t.mmax)),this):null}toJSON(t){return this.write({},t)}_shiftCM(t=D(this.spatialReference)){if(!t||!this.spatialReference)return this;let e=this.spatialReference,i=this._getCM(t);if(i){let s=e.isWebMercator?O(i):i;this.xmin-=i.x,this.xmax-=i.x,e.isWebMercator||(s.x=B(s.x,t).x),this.spatialReference=new T(H((e.isWGS84?t.altTemplate:null)??t.wkTemplate,{Central_Meridian:s.x}))}return this}_getCM(t){let e=null,[i,s]=t.valid,n=this.xmin,r=this.xmax;return n>=i&&n<=s&&r>=i&&r<=s||(e=this.center),e}_normalize(t,e,i){let s=this.spatialReference;if(!s)return this;let n=i??D(s);if(n==null)return this;let r=this._getParts(n).map(m=>m.extent);if(r.length<2)return r[0]||this;if(r.length>2)return t?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(t)return this._shiftCM(n);if(e)return r;let a=!0,o=!0;return r.forEach(m=>{m.hasZ||(a=!1),m.hasM||(o=!1)}),{rings:r.map(m=>{let x=[[m.xmin,m.ymin],[m.xmin,m.ymax],[m.xmax,m.ymax],[m.xmax,m.ymin],[m.xmin,m.ymin]];if(a){let h=(m.zmax-m.zmin)/2;for(let y=0;y<x.length;y++)x[y].push(h)}if(o){let h=(m.mmax-m.mmin)/2;for(let y=0;y<x.length;y++)x[y].push(h)}return x}),hasZ:a,hasM:o,spatialReference:s}}_getParts(t){let e=this.cache._parts;if(!e){e=[];let{ymin:n,ymax:r,spatialReference:a}=this,o=this.width,m=this.xmin,x=this.xmax,h;t=t||D(a);let[y,d]=t.valid;h=B(this.xmin,t);let g=h.x,M=h.frameId;h=B(this.xmax,t);let w=h.x,b=h.frameId,S=g===w&&o>0;if(o>2*d){let j=new z(m<x?g:w,n,d,r,a),R=new z(y,n,m<x?w:g,r,a),P=new z(0,n,d,r,a),G=new z(y,n,0,r,a),W=[],E=[];j.contains(P)&&W.push(M),j.contains(G)&&E.push(M),R.contains(P)&&W.push(b),R.contains(G)&&E.push(b);for(let A=M+1;A<b;A++)W.push(A),E.push(A);e.push({extent:j,frameIds:[M]},{extent:R,frameIds:[b]},{extent:P,frameIds:W},{extent:G,frameIds:E})}else g>w||S?e.push({extent:new z(g,n,d,r,a),frameIds:[M]},{extent:new z(y,n,w,r,a),frameIds:[b]}):e.push({extent:new z(g,n,w,r,a),frameIds:[M]});this.cache._parts=e}let i=this.hasZ,s=this.hasM;if(i||s){let n={};i&&(n.zmin=this.zmin,n.zmax=this.zmax),s&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let r=0;r<e.length;r++)e[r].extent.set(n)}return e}};function B(t,e){let[i,s]=e.valid,n=2*s,r,a=0;return t>s?(r=Math.ceil(Math.abs(t-s)/n),t-=r*n,a=r):t<i&&(r=Math.ceil(Math.abs(t-i)/n),t+=r*n,a=-r),{x:t,frameId:a}}u([f({readOnly:!0})],l.prototype,"cache",null),u([f({readOnly:!0})],l.prototype,"center",null),u([f({readOnly:!0})],l.prototype,"extent",null),u([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],l.prototype,"hasM",null),u([f({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],l.prototype,"hasZ",null),u([f({readOnly:!0})],l.prototype,"height",null),u([f({readOnly:!0})],l.prototype,"width",null),u([f({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],l.prototype,"xmin",void 0),u([f({type:Number,json:{write:!0}})],l.prototype,"ymin",void 0),u([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],l.prototype,"mmin",void 0),u([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],l.prototype,"zmin",void 0),u([f({type:Number,json:{write:!0}})],l.prototype,"xmax",void 0),u([f({type:Number,json:{write:!0}})],l.prototype,"ymax",void 0),u([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],l.prototype,"mmax",void 0),u([f({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],l.prototype,"zmax",void 0),l=z=u([K("esri.geometry.Extent")],l),l.prototype.toJSON.isDefaultToJSON=!0;var St=l;export{k as a,ft as b,yt as c,X as d,mt as e,xt as f,dt as g,Y as h,nt as i,St as j};
