import{$ as A,A as m,B as N,C as S,I,J as O,M as P,N as V,O as q,a as T,aa as B,n as c,o as f,r as d,s as g,u as J,v as L,x,y as j,z as E}from"./chunk-MARRSUOJ.js";import{a as u,b as l}from"./chunk-LWVUOW7N.js";import{a as F,c as k,d as D,f as i}from"./chunk-J372WZPB.js";import{d as y}from"./chunk-6XFS4U2F.js";import{a as v}from"./chunk-NTVLK3P2.js";import{f as p}from"./chunk-VTHXE323.js";function K(t){M=t}var M;function h(t){return t===null?null:m(t)?t.clone():f(t)?t:d(t)?t.clone():E(t)?t.toArray().map(e=>h(e)):i(t)?t.map(e=>h(e)):g(t)?M.createFromArcadeFeature(t):x(t)||J(t)?t:L(t)||t?.declaredClass==="esri.arcade.Attachment"?t.deepClone():(t?.declaredClass==="esri.arcade.Portal"||j(t)||t instanceof T||c(t),t)}function b(t,e,s=!1,r=!1){if(t==null)return null;if(F(t))return P(t);if(k(t))return q(t);if(D(t))return O(t);if(m(t))return V(t,e);if(N(t)||S(t))return t;if(i(t)){let o=[];for(let n of t)o.push(b(n,e,s,r));return o}if(r&&d(t))return t;let a=new w;a.immutable=!1;for(let o of Object.keys(t)){let n=t[o];n!==void 0&&a.setField(o,b(n,e,s,r))}return a.immutable=s,a}var w=class t{constructor(e){this.declaredClass="esri.arcade.Dictionary",this.plain=!1,this.immutable=!0,this.attributes=e instanceof t?e.attributes:e??{}}field(e){let s=e.toLowerCase(),r=this.attributes[e];if(r!==void 0)return r;for(let a in this.attributes)if(a.toLowerCase()===s)return this.attributes[a];throw new l(null,u.FieldNotFound,null,{key:e})}setField(e,s){if(this.immutable)throw new l(null,u.Immutable,null);if(c(s))throw new l(null,u.NoFunctionInDictionary,null);let r=e.toLowerCase();if(s instanceof Date&&(s=y.dateJSToArcadeDate(s)),this.attributes[e]===void 0){for(let a in this.attributes)if(a.toLowerCase()===r)return void(this.attributes[a]=s);this.attributes[e]=s}else this.attributes[e]=s}hasField(e){let s=e.toLowerCase();if(this.attributes[e]!==void 0)return!0;for(let r in this.attributes)if(r.toLowerCase()===s)return!0;return!1}keys(){let e=[];for(let s in this.attributes)e.push(s);return e=e.sort(),e}castToText(e=!1){return I(this.attributes,{useNumbersForDates:e})}static convertObjectToArcadeDictionary(e,s,r=!0,a=!1){let o=new t;o.immutable=!1;for(let n in e){let C=e[n];C!==void 0&&o.setField(n.toString(),b(C,s,r,a))}return o.immutable=r,o}static convertJsonToArcade(e,s,r=!1,a=!1){return b(e,s,r,a)}castAsJson(e=null){let s={};for(let r in this.attributes){let a=this.attributes[r];a!==void 0&&(e?.keyTranslate&&(r=e.keyTranslate(r)),s[r]=A(a,e))}return s}castDictionaryValueAsJsonAsync(e,s,r,a=null,o){return p(this,null,function*(){let n=yield B(r,a,o);return e[s]=n,n})}castAsJsonAsync(e=null,s=null){return p(this,null,function*(){let r={},a=[];for(let o in this.attributes){let n=this.attributes[o];s?.keyTranslate&&(o=s.keyTranslate(o)),n!==void 0&&(f(n)||n instanceof v||n instanceof y?r[o]=A(n,s):a.push(this.castDictionaryValueAsJsonAsync(r,o,n,e,s)))}return a.length>0&&(yield Promise.all(a)),r})}deepClone(){let e=new t;e.immutable=!1;for(let s of this.keys())e.setField(s,h(this.field(s)));return e}};export{K as a,h as b,w as c};
