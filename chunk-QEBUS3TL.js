import{a as _}from"./chunk-KTE5HCNJ.js";import{d as r}from"./chunk-C7INQGWT.js";import{B as c,H as h}from"./chunk-WMHJC7XF.js";import{A as m,l as p}from"./chunk-D2LVMNOU.js";import{a as t}from"./chunk-QGVBCWUY.js";import{t as d}from"./chunk-HHDFN2GK.js";var w="not-loaded",S="loading",E="failed",f="loaded",y=s=>{let o=class extends s{constructor(...e){super(...e),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(a=>{let b=this.load.bind(this);this.load=g=>{let C=new Promise((n,i)=>{let u=m(g,i);this.destroyed&&i(new d("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this.when(n,i).finally(()=>{u&&u.remove()})});if(this.loadStatus===w){this._set("loadStatus",S);let n=this._loadController=new AbortController;b({signal:n.signal})}return a(),C}})),this.when(()=>{this._set("loadStatus",f),this._loadController=null},a=>{this._set("loadStatus",E),this._set("loadError",a),this._loadController=null})}destroy(){this._loadController&&(this._loadController=p(this._loadController),this._promiseProps.abort()),this._set("loadError",null),this._set("loadWarnings",[])}get loaded(){return this.loadStatus===f}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){return this.isFulfilled()||(this._set("loadError",new d("load:cancelled","Cancelled")),this._loadController?.abort(),this._promiseProps.abort()),this}};return t([r({readOnly:!0})],o.prototype,"loaded",null),t([r({readOnly:!0})],o.prototype,"loadError",void 0),t([r({clonable:!1})],o.prototype,"loadStatus",void 0),t([r({type:[c],readOnly:!0})],o.prototype,"loadWarnings",null),o=t([h("esri.core.Loadable")],o),o},l=class extends y(_){};l=t([h("esri.core.Loadable")],l),function(s){function o(e){return!(!e||!e.load)}s.LoadableMixin=y,s.isLoadable=o}(l||(l={}));var F=l;export{F as a};
