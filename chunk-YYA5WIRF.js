import{b as I,g as C}from"./chunk-NHQ2XIW3.js";import{a as h}from"./chunk-JEIB6WNP.js";import{O as b}from"./chunk-HKHTIKVW.js";import{d as w}from"./chunk-TLMADEUL.js";import{b as g}from"./chunk-6PN3I333.js";import{f as m}from"./chunk-VTHXE323.js";var N=/^-?(\d+)(\.(\d+))?$/i;function M(e,t){return e-t}function v(e,t){let n,i;return n=Number(e.toFixed(t)),n<e?i=n+1/10**t:(i=n,n-=1/10**t),n=Number(n.toFixed(t)),i=Number(i.toFixed(t)),[n,i]}function R(e,t,n,i,a){let o=T(e,t,n,i),r=o.previous==null||o.previous<=a,l=o.next==null||o.next<=a;return r&&l||o.previous+o.next<=2*a}function V(e){let t=String(e),n=t.match(N);if(n?.[1])return{integer:n[1].split("").length,fractional:n[3]?n[3].split("").length:0};if(t.toLowerCase().includes("e")){let i=t.split("e"),a=i[0],o=i[1];if(a&&o){let r=Number(a),l=Number(o),s=l>0;s||(l=Math.abs(l));let A=V(r);return s?(A.integer+=l,l>A.fractional?A.fractional=0:A.fractional-=l):(A.fractional+=l,l>A.integer?A.integer=1:A.integer-=l),A}}return{integer:0,fractional:0}}function T(e,t,n,i){let a={previous:null,next:null};if(n!=null){let o=e-n,r=t-n-o;a.previous=Math.floor(Math.abs(100*r/o))}if(i!=null){let o=i-e,r=i-t-o;a.next=Math.floor(Math.abs(100*r/o))}return a}function S(e,t={}){let n=e.slice(),{tolerance:i=2,strictBounds:a=!1,indexes:o=n.map((r,l)=>l)}=t;o.sort(M);for(let r=0;r<o.length;r++){let l=o[r],s=n[l],A=l===0?null:n[l-1],F=l===n.length-1?null:n[l+1],p=V(s).fractional;if(p){let u,f=0,c=!1;for(;f<=p&&!c;){let d=v(s,f);u=a&&r===0?d[1]:d[0],c=R(s,u,A,F,i),f++}c&&(n[l]=u)}}return n}var y={maximumFractionDigits:20};function U(e){return g(e,y)}var B="<",E=">";function z(e,t,n,i){let a="";return t===0?a=`${B} `:t===n&&(a=`${E} `),a+(i?C(e,i):U(e))}var H=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwcdIkqhiWn5fHwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6JrzFUAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwaeIkqhiWl5/HwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu6sKxboAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAAAAAAAAAHqZRakAAAANUlEQVQ4jWPMy8v7z0BFwMLAwMAwadJEqhiWl5fPwEQVk5DAqIGjBo4aOGrgqIEQwEjtKgAATl0Hu75+IUcAAAAASUVORK5CYII="];function x(e){return m(this,null,function*(){if(!("visualVariables"in e)||!e.visualVariables)return null;let t=e.visualVariables.find(r=>r.type==="color");if(!t)return null;let n=null,i=null;if(t.stops){if(t.stops.length===1)return t.stops[0].color;n=t.stops[0].value,i=t.stops[t.stops.length-1].value}let a=n!=null&&i!=null?n+(i-n)/2:0,{getColor:o}=yield import("./chunk-P2RJV47D.js");return o(t,a)??null})}function Z(e,t){return m(this,null,function*(){let n=e.trailCap,i=e.trailWidth||1,a=t||(yield x(e))||e.color;return new w({cap:n,color:a,width:i})})}function Q(e,t){if(!t.field)return null;if("featureReduction"in e)switch(e.featureReduction?.type){case"cluster":case"binning":{let n=e.featureReduction.fields.find(({name:i})=>i.toLowerCase()===t.field.toLowerCase());return n&&"getField"in e?e.getField(n.onStatisticField):null}}return"getField"in e?e.getField?.(t.field):null}function q(e,t){let n="popupTemplate"in e?e.popupTemplate?.fieldInfos:null;if(n?.length&&t)return n.find(i=>i.fieldName?.toLowerCase()===t.toLowerCase())?.format?.dateFormat}function X(e,t,n){let i=Q(e,t);if(!i||!I(i)&&!b(i))return null;let a=q(e,i.name);if(!a&&i.type==="date"){let o=0,r=0;t.stops?(o=t.stops?.at(0)?.value??o,r=t.stops?.at(-1)?.value??r):"minDataValue"in t&&"maxDataValue"in t&&(o=t.minDataValue??o,r=t.maxDataValue??r),a=r-o>2*h.days?"short-date":"short-date-short-time"}return{fieldType:i.type,format:a,timeZoneOptions:{layerTimeZone:"preferredTimeZone"in e?e.preferredTimeZone:null,viewTimeZone:n,datesInUnknownTimezone:"datesInUnknownTimezone"in e&&e.datesInUnknownTimezone}}}function Y(e){if("authoringInfo"in e)return e.authoringInfo?.visualVariables?.find(({theme:t})=>t==="reference-size")}export{V as a,T as b,S as c,B as d,E as e,z as f,H as g,x as h,Z as i,X as j,Y as k};
