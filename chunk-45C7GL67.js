import{a as Un,b as Cn,c as zn,d as Zn,e as rn}from"./chunk-TILBGQXL.js";import{a as Ge}from"./chunk-GW75YXIH.js";import{a as We}from"./chunk-2U6QECGD.js";import{a as jn}from"./chunk-AXQERSA6.js";import{a as Y,b as Q}from"./chunk-DOYPD6O7.js";import{b as tn,c as N}from"./chunk-4RDCETCH.js";import{A as G,B as T,C as L,D as p,E as nn,F as En,H as ye,J as v,L as Re,M as g,N as C,O as ke,P as z,Q as he,U as Ee,W as Pn,ca as Fn,da as Je,ea as On,f as ze,fa as Tn,g as Ye,ga as I,ha as Mn,ia as Ln,j as F,m as De,n as pe,o as Sn,p as M,q as Ze,r as je,s as U,t as Dn,u as Rn,v as qe,w as He,x as kn,z as P}from"./chunk-MARRSUOJ.js";import{m as en}from"./chunk-IB6IQS7A.js";import{d as _n}from"./chunk-LVYFLVM5.js";import{c as In,e as bn}from"./chunk-WH2SG675.js";import{a as f,b as d}from"./chunk-LWVUOW7N.js";import{a as Nn}from"./chunk-OCNYIIP3.js";import{f as B}from"./chunk-LNVVFNTC.js";import{c as qn}from"./chunk-AZS4Q4RE.js";import{a as K,d as $}from"./chunk-X5AA4JDN.js";import{a as q,b as re,c as H,d as E,f as _}from"./chunk-J372WZPB.js";import{d as O,e as Se}from"./chunk-6XFS4U2F.js";import{a as me}from"./chunk-XPRVY6JT.js";import{h as fe}from"./chunk-7N3ZKWML.js";import{i as vn}from"./chunk-E62WHYYG.js";import{i as de}from"./chunk-QDTU3MWT.js";import{j as _e}from"./chunk-I4M2OT5W.js";import{a as le,n as j}from"./chunk-NTVLK3P2.js";import{a as An}from"./chunk-WMQNRNIU.js";import{u as Ce}from"./chunk-VOFKUGRY.js";import{a as we}from"./chunk-SLAWDKDA.js";import{d as Ne}from"./chunk-7IPIJKWU.js";import{a as xn}from"./chunk-7R33MKVL.js";import{p as yn}from"./chunk-U4J5SECU.js";import{L as wn}from"./chunk-C7INQGWT.js";import{K as ge,h as gn}from"./chunk-D2LVMNOU.js";import{f as J}from"./chunk-VTHXE323.js";function ee(r){if(typeof r=="string")return r.toLowerCase();if("name"in r)return r.name.toLowerCase();if(typeof r.value!="string")throw new d(null,f.InvalidIdentifier,null);return r.value.toLowerCase()}var Hn=class{constructor(i,t){this._moduleSingletons=i,this._syntaxModules=t}loadLibrary(i){if(this._syntaxModules==null)return null;let t=this._syntaxModules[i];return t?{syntax:t.script,uri:t.uri}:null}};var it={point:["hasZ","hasM","spatialReference","type","x","y","z","m"],multipoint:["hasZ","hasM","spatialReference","type","points"],polyline:["hasZ","hasM","spatialReference","type","paths"],polygon:["hasZ","hasM","spatialReference","type","rings"],extent:["hasZ","hasM","spatialReference","type","xmin","xmax","ymin","ymax","zmin","zmax","mmin","mmax"]};function Wt(r){return it[r.type]}var ae=0;function an(r,i,t,a,s=1){let c;switch(i=i.toLowerCase()){case"hasz":{let e=r.hasZ;return e!==void 0&&e}case"hasm":{let e=r.hasM;return e!==void 0&&e}case"spatialreference":{let e=r.spatialReference._arcadeCacheId;if(e===void 0){let o=!0;wn.isFrozen(r.spatialReference)&&(o=!1),o&&(ae++,r.spatialReference._arcadeCacheId=ae,e=ae)}let n=new N({wkt:r.spatialReference.wkt,wkid:r.spatialReference.wkid});return e!==void 0&&(n._arcadeCacheId="SPREF"+e.toString()),n}}switch(r.type){case"extent":switch(i){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{let e=r[i];return e!==void 0?e:null}case"type":return"Extent"}break;case"polygon":switch(i){case"rings":return c=r.cache._arcadeCacheId,c===void 0&&(ae++,c=ae,r.cache._arcadeCacheId=c),new Ye(r.rings,r.spatialReference,r.hasZ===!0,r.hasM===!0,c);case"type":return"Polygon"}break;case"point":switch(i){case"x":case"y":case"z":case"m":return r[i]??null;case"type":return"Point"}break;case"polyline":switch(i){case"paths":return c=r.cache._arcadeCacheId,c===void 0&&(ae++,c=ae,r.cache._arcadeCacheId=c),new Ye(r.paths,r.spatialReference,r.hasZ===!0,r.hasM===!0,c);case"type":return"Polyline"}break;case"multipoint":switch(i){case"points":return c=r.cache._arcadeCacheId,c===void 0&&(ae++,c=ae,r.cache._arcadeCacheId=c),new ze(r.points,r.spatialReference,r.hasZ===!0,r.hasM===!0,c,1);case"type":return"Multipoint"}}if(s===1)throw new d(t,f.InvalidIdentifier,a);return s===2?{keystate:"notfound"}:null}function Jn(r,i){let t,a=r;if(a==null)return null;if(_(i))t=i;else if(P(i))t=i.toArray();else{if(i==null)return null;t=[i]}for(let s of t){if(He(a)){if(E(s)===!1||!a.hasField(s))return null;a=a.field(s)}else if(je(a)){if(E(s)===!1)return null;a=an(a,s,null,null,0)}else if(_(a)){if(q(s)===!1)return null;a=s>=0?a[s]:a[a.length+s]}else{if(!P(a)||q(s)===!1)return null;a=s>=0?a.get(s):a.get(a.length()+s)}if(a==null)return null}return a}var Gn={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},Be={functionDefinitions:new Map,constantDefinitions:new Map},Qe={functionDefinitions:new Map,constantDefinitions:new Map};for(let r of["pi","infinity"])Qe.constantDefinitions.set(r,{type:"constant"}),Be.constantDefinitions.set(r,{type:"constant"});Qe.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),Be.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(let r in Gn){let i=Gn[r];Qe.functionDefinitions.set(r,{overloads:[{type:"function",parametersInfo:{min:i.min,max:i.max}}]}),Be.functionDefinitions.set(r,{overloads:[{type:"function",parametersInfo:{min:i.min,max:i.max}}]})}var ot=new Set(["attachments","featureset","featuresetbyassociation","featuresetbyid","featuresetbyname","featuresetbyportalitem","featuresetbyrelationshipname","featuresetbyurl","filterbysubtypecode","getfeatureset","getfeaturesetinfo","getuser","knowledgegraphbyportalitem","querygraph"]),st=new Set(["area","areageodetic","buffer","buffergeodetic","centroid","clip","contains","convexhull","crosses","cut","densify","densifygeodetic","difference","disjoint","distance","distancegeodetic","distancetocoordinate","equals","generalize","intersection","intersects","issimple","length","length3d","lengthgeodetic","measuretocoordinate","multiparttosinglepart","nearestcoordinate","nearestvertex","offset","overlaps","pointtocoordinate","relate","rotate","simplify","symmetricdifference","touches","union","within"]);function Xt(r,i){let t=i==="sync"?Be:Qe;t.functionDefinitions.has(r.name.toLowerCase())?t.functionDefinitions.get(r.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:r.min,max:r.max}}):t.functionDefinitions.set(r.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:r.min,max:r.max}}]})}function ie(r,i){if(r)for(let t of r)R(t,i)}function R(r,i){if(r&&i(r)!==!1)switch(r.type){case"ImportDeclaration":ie(r.specifiers,i),R(r.source,i);break;case"ExportNamedDeclaration":R(r.declaration,i);break;case"ArrayExpression":ie(r.elements,i);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":R(r.left,i),R(r.right,i);break;case"BlockStatement":case"Program":ie(r.body,i);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":R(r.callee,i),ie(r.arguments,i);break;case"ExpressionStatement":R(r.expression,i);break;case"ForInStatement":case"ForOfStatement":R(r.left,i),R(r.right,i),R(r.body,i);break;case"ForStatement":R(r.init,i),R(r.test,i),R(r.update,i),R(r.body,i);break;case"WhileStatement":R(r.test,i),R(r.body,i);break;case"FunctionDeclaration":R(r.id,i),ie(r.params,i),R(r.body,i);break;case"IfStatement":R(r.test,i),R(r.consequent,i),R(r.alternate,i);break;case"MemberExpression":R(r.object,i),R(r.property,i);break;case"ObjectExpression":ie(r.properties,i);break;case"Property":R(r.key,i),R(r.value,i);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":R(r.argument,i);break;case"VariableDeclaration":ie(r.declarations,i);break;case"VariableDeclarator":R(r.id,i),R(r.init,i);break;case"TemplateLiteral":ie(r.expressions,i),ie(r.quasis,i)}}function Ve(r){return r?.type==="Literal"&&typeof r.value=="string"}function ut(r,i){let t=!1,a=i.toLowerCase();return R(r,s=>!t&&(s.type==="Identifier"&&s.name&&s.name.toLowerCase()===a&&(t=!0),!0)),t}function ct(r){let i=[];return R(r,t=>(t.type==="ImportDeclaration"&&t.source&&t.source.value&&i.push({libname:ee(t.specifiers[0].local),source:t.source.value}),!0)),i}function Kt(r,i){let t=!1,a=i.toLowerCase();return R(r,s=>!t&&(s.type!=="CallExpression"||s.callee.type!=="Identifier"||!s.callee.name||s.callee.name.toLowerCase()!==a||(t=!0,!1))),t}function $t(r){let i=[];return R(r,t=>t.type!=="MemberExpression"||t.object.type!=="Identifier"||((t.property.type==="Identifier"||t.property.type==="Literal"&&typeof t.property.value=="string")&&i.push({varId:ee(t.object),memberId:ee(t.property)}),!1)),i}function Yt(r){let i=[];return R(r,t=>{if(t.type==="CallExpression"&&t.callee.type==="Identifier")switch(ee(t.callee)){case"expects":if(t.arguments.length>1){let[a,...s]=t.arguments;if(a?.type==="Identifier"){let c=ee(a);for(let e of s)Ve(e)&&i.push({varId:c,memberNamePattern:e.value})}}return!1;case"domainname":case"domaincode":case"domain":case"haskey":case"hasvalue":if(t.arguments.length>=2){let[a,s]=t.arguments;a?.type==="Identifier"&&Ve(s)&&i.push({varId:ee(a),memberNamePattern:s.value})}return!0;case"defaultvalue":if(t.arguments.length>2){let[a,s]=t.arguments;a?.type==="Identifier"&&Ve(s)&&i.push({varId:ee(a),memberNamePattern:s.value})}return!0;default:return!0}return t.type!=="MemberExpression"||t.object.type!=="Identifier"||(t.computed?!!Ve(t.property)&&(i.push({varId:ee(t.object),memberNamePattern:t.property.value}),!1):(i.push({varId:ee(t.object),memberNamePattern:t.property.name}),!1))}),i}function Wn(r){let i=[];return R(r,t=>(t.type==="CallExpression"&&t.callee.type==="Identifier"&&i.push(t.callee.name.toLowerCase()),!0)),i}function er(r,i=[]){let t=null;if(r.usesFeatureSet===void 0){t===null&&(t=Wn(r)),r.usesFeatureSet=!1;for(let a=0;a<t.length;a++)ot.has(t[a])&&(r.usesFeatureSet=!0,r.isAsync=!0);if(r.usesFeatureSet===!1&&i&&i.length>0){for(let a of i)if(ut(r,a)){r.usesFeatureSet=!0,r.isAsync=!0;break}}}if(r.usesModules===void 0&&(r.usesModules=!1,ct(r).length>0&&(r.usesModules=!0)),r.usesGeometry===void 0){r.usesGeometry=!1,t===null&&(t=Wn(r));for(let a=0;a<t.length;a++)st.has(t[a])&&(r.usesGeometry=!0)}}function lt(r){function i(n,o,l){if(n instanceof Nn)return n.toArray();if(_(n))return n;throw new d(o,f.InvalidParameter,l)}function t(n,o){let l=n.length,m=Math.floor(l/2);return l===0?[]:l===1?[n[0]]:a(t(n.slice(0,m),o),t(n.slice(m,l),o),o)}function a(n,o,l){let m=[];for(;n.length>0||o.length>0;)if(n.length>0&&o.length>0){let u=l(n[0],o[0]);isNaN(u)&&(u=0),u<=0?(m.push(n[0]),n=n.slice(1)):(m.push(o[0]),o=o.slice(1))}else n.length>0?(m.push(n[0]),n=n.slice(1)):o.length>0&&(m.push(o[0]),o=o.slice(1));return m}function s(n,o){return J(this,null,function*(){let l=n.length,m=Math.floor(l/2);if(l===0)return[];if(l===1)return[n[0]];let u=[yield s(n.slice(0,m),o),yield s(n.slice(m,l),o)];return c(u[0],u[1],o,[])})}function c(n,o,l,m){return J(this,null,function*(){let u=m;if(n.length>0||o.length>0){if(n.length>0&&o.length>0){let h=yield l(n[0],o[0]);return isNaN(h)&&(h=1),h<=0?(u.push(n[0]),n=n.slice(1)):(u.push(o[0]),o=o.slice(1)),c(n,o,l,m)}return n.length>0?(u.push(n[0]),c(n=n.slice(1),o,l,m)):(u.push(o[0]),c(n,o=o.slice(1),l,m))}return m})}function e(n,o,l,m){p(l,1,2,n,o);let u=l[0];if(P(u)&&(u=u.toArray()),_(u)===!1)throw new d(n,f.InvalidParameter,o);if(l.length>1){if(pe(l[1])===!1)throw new d(n,f.InvalidParameter,o);let A=u,D=l[1].createFunction(n);return m?s(A,D):(A=t(A,(Z,Ue)=>D(Z,Ue)),A)}let h=u;if(h.length===0)return[];let w={};for(let A=0;A<h.length;A++){let D=Ze(h[A]);D!==""&&(w[D]=!0)}if(w.Array===!0||w.Dictionary===!0||w.Feature===!0||w.Voxel===!0||w.Point===!0||w.Polygon===!0||w.Polyline===!0||w.Multipoint===!0||w.Extent===!0||w.Function===!0)return h.slice();let x=0,b="";for(let A in w)x++,b=A;return h=x>1||b==="String"?t(h,(A,D)=>{if(A==null||A===F)return D==null||D===F?0:1;if(D==null||D===F)return-1;let Z=v(A),Ue=v(D);return Z<Ue?-1:Z===Ue?0:1}):b==="Number"?t(h,(A,D)=>A-D):b==="Boolean"?t(h,(A,D)=>A===D?0:D?-1:1):b==="Date"?t(h,(A,D)=>A.toNumber()-D.toNumber()):h.slice(),h}r.functions.array=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,0,2,n,o),u.length===0)return[];if(u.length===1&&u[0]===null)return[];if(_(u[0])){if(u.length===2&&H(u[1])===!1)throw new d(n,f.InvalidParameter,o);return M(u[1],!1)===!0?tn(u[0]):u[0].slice()}if(P(u[0])){if(u.length===2&&H(u[1])===!1)throw new d(n,f.InvalidParameter,o);return M(u[1],!1)===!0?tn(u[0]):u[0].toArray().slice()}let h=g(u[0]);if(isNaN(h)||re(h)===!1)throw new d(n,f.InvalidParameter,o);let w=M(u[1],null),x=new Array(h);return x.fill(w),x})},r.functions.front=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,1,1,n,o),P(u[0])){if(u[0].length()<=0)throw new d(n,f.OutOfBounds,o);return u[0].get(0)}if(_(u[0])){if(u[0].length<=0)throw new d(n,f.OutOfBounds,o);return u[0][0]}throw new d(n,f.InvalidParameter,o)})},r.functions.back=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,1,1,n,o),P(u[0])){if(u[0].length()<=0)throw new d(n,f.OutOfBounds,o);return u[0].get(u[0].length()-1)}if(_(u[0])){if(u[0].length<=0)throw new d(n,f.OutOfBounds,o);return u[0][u[0].length-1]}throw new d(n,f.InvalidParameter,o)})},r.functions.push=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,1,2,n,o),_(u[0]))return u[0][u[0].length]=u[1],u[0].length;throw new d(n,f.InvalidParameter,o)})},r.functions.pop=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,1,1,n,o),_(u[0])){if(u[0].length<=0)throw new d(n,f.OutOfBounds,o);let h=u[0][u[0].length-1];return u[0].length=u[0].length-1,h}throw new d(n,f.InvalidParameter,o)})},r.functions.erase=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,2,2,n,o),_(u[0])){let h=g(u[1]);if(isNaN(h)||re(h)===!1)throw new d(n,f.InvalidParameter,o);let w=u[0];if(w.length<=0)throw new d(n,f.OutOfBounds,o);if(h<0&&(h=w.length+h),h<0)throw new d(n,f.OutOfBounds,o);if(h>=w.length)throw new d(n,f.OutOfBounds,o);return w.splice(h,1),F}throw new d(n,f.InvalidParameter,o)})},r.functions.insert=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,3,3,n,o),_(u[0])){let h=g(u[1]);if(isNaN(h)||re(h)===!1)throw new d(n,f.InvalidParameter,o);let w=u[2],x=u[0];if(h>x.length)throw new d(n,f.OutOfBounds,o);if(h<0&&h<-1*x.length)throw new d(n,f.OutOfBounds,o);return h===x.length?(x[h]=w,F):(x.splice(h,0,w),F)}throw new d(n,f.InvalidParameter,o)})},r.functions.resize=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,2,3,n,o),_(u[0])){let h=g(u[1]);if(isNaN(h)||re(h)===!1)throw new d(n,f.InvalidParameter,o);if(h<0)throw new d(n,f.InvalidParameter,o);let w=M(u[2],null),x=u[0];if(x.length>=h)return x.length=h,F;let b=x.length;x.length=h;for(let A=b;A<x.length;A++)x[A]=w;return F}throw new d(n,f.InvalidParameter,o)})},r.functions.includes=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,2,2,n,o),_(u[0])){let h=u[1];return!!u[0].some(w=>ye(w,h))}if(P(u[0])){let h=u[1];return!!u[0].toArray().some(w=>ye(w,h))}throw new d(n,f.InvalidParameter,o)})},r.functions.slice=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,1,3,n,o),_(u[0])){let h=g(M(u[1],0)),w=g(M(u[2],u[0].length));if(isNaN(h)||re(h)===!1)throw new d(n,f.InvalidParameter,o);if(isNaN(w)||re(w)===!1)throw new d(n,f.InvalidParameter,o);return u[0].slice(h,w)}if(P(u[0])){let h=u[0],w=g(M(u[1],0)),x=g(M(u[2],h.length()));if(isNaN(w)||re(w)===!1)throw new d(n,f.InvalidParameter,o);if(isNaN(x)||re(x)===!1)throw new d(n,f.InvalidParameter,o);return h.toArray().slice(w,x)}throw new d(n,f.InvalidParameter,o)})},r.functions.splice=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{let h=[];for(let w=0;w<u.length;w++)_(u[w])?h.push(...u[w]):P(u[w])?h.push(...u[w].toArray()):h.push(u[w]);return h})},r.functions.top=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{if(p(u,2,2,n,o),_(u[0]))return g(u[1])>=u[0].length?u[0].slice():u[0].slice(0,g(u[1]));if(P(u[0]))return g(u[1])>=u[0].length()?u[0].slice():u[0].slice(0,g(u[1]));throw new d(n,f.InvalidParameter,o)})},r.functions.first=function(n,o){return r.standardFunction(n,o,(l,m,u)=>(p(u,1,1,n,o),_(u[0])?u[0].length===0?null:u[0][0]:P(u[0])?u[0].length()===0?null:u[0].get(0):null))},r.mode==="sync"&&(r.functions.sort=function(n,o){return r.standardFunction(n,o,(l,m,u)=>e(n,m,u,!1))},r.functions.any=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);for(let x of w){let b=h(x);if(H(b)&&b===!0)return!0}return!1})},r.functions.all=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);for(let x of w)if(h(x)!==!0)return!1;return!0})},r.functions.none=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);for(let x of w)if(h(x)===!0)return!1;return!0})},r.functions.reduce=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{p(u,2,3,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);return u.length===2?w.length===0?null:w.reduce((x,b)=>{let A=h(x,b);return x=A!==void 0&&A!==F?A:null}):w.reduce((x,b)=>{let A=h(x,b);return x=A!==void 0&&A!==F?A:null},u[2])})},r.functions.map=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m),x=[];for(let b of w){let A=h(b);A!==void 0&&A!==F?x.push(A):x.push(null)}return x})},r.functions.filter=function(n,o){return r.standardFunction(n,o,(l,m,u)=>{p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m),x=[];for(let b of w)h(b)===!0&&x.push(b);return x})}),r.mode==="async"&&(r.functions.sort=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){return e(n,m,u,!0)}))},r.functions.any=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);for(let x of w){let b=yield h(x),A=null;if(A=ge(A)?yield b:b,H(A)&&A===!0)return!0}return!1}))},r.functions.all=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);for(let x of w){let b=yield h(x),A=null;if(A=ge(A)?yield b:b,A!==!0)return!1}return!0}))},r.functions.none=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m);for(let x of w){let b=yield h(x),A=null;if(A=ge(A)?yield b:b,A===!0)return!1}return!0}))},r.functions.filter=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m),x=[];for(let b of w){let A=yield h(b),D=null;D=ge(D)?yield A:A,D===!0&&x.push(b)}return x}))},r.functions.reduce=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){p(u,2,3,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m),x;if(u.length>2){let b=M(u[2],null);x=w.reduce((A,D)=>J(this,null,function*(){let Z=yield A;return Z!==void 0&&Z!==F||(Z=null),h(Z,D)}),Promise.resolve(b))}else{if(w.length===0)return null;x=w.reduce((b,A,D)=>J(this,null,function*(){if(D<=1)return h(b,A);let Z=yield b;return Z!==void 0&&Z!==F||(Z=null),h(Z,A)}))}return x.then(b=>b!==void 0&&b!==F?b:null)}))},r.functions.map=function(n,o){return r.standardFunctionAsync(n,o,(l,m,u)=>J(this,null,function*(){p(u,2,2,n,m);let h=u[1].createFunction(n),w=i(u[0],n,m),x=[];for(let b of w){let A=yield h(b),D=null;D=ge(D)?yield A:A,D!==void 0&&D!==F?x.push(D):x.push(null)}return x}))})}var ur=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:lt},Symbol.toStringTag,{value:"Module"}));function mt(r,i,t){return r+(ft(t)?pt:dt)[i]}function ft(r){return r%4==0&&(r%100!=0||r%400==0)}var dt=[0,31,59,90,120,151,181,212,243,273,304,334],pt=[0,31,60,91,121,152,182,213,244,274,305,335];function ne(r){return r===null?r:r.isValid===!1?null:r}function Pe(r,i){return r===""||r.toLowerCase().trim()==="default"?I(i):r==="z"||r==="Z"?"UTC":r}function oe(r,i){return T(r)?r.toArcadeDate():C(r,I(i))}function xr(r,i){r.today=function(t,a){return i(t,a,(s,c,e)=>{p(e,0,0,t,a);let n=new Date;return n.setHours(0,0,0,0),O.dateJSAndZoneToArcadeDate(n,I(t))})},r.time=function(t,a){return i(t,a,(s,c,e)=>{switch(p(e,0,4,t,a),e.length){case 0:{let n=O.nowToArcadeDate(I(t));return new $(n.hour,n.minute,n.second,n.millisecond)}case 1:{if(L(e[0]))return e[0].clone();if(G(e[0]))return new $(e[0].hour,e[0].minute,e[0].second,e[0].millisecond);if(T(e[0]))return new $(0,0,0,0);if(E(e[0]))return $.fromString(e[0]);let n=g(e[0]);return isNaN(n)===!1?$.fromMilliseconds(n):null}case 2:return E(e[0])&&E(e[1])?$.fromString(e[0],e[1]):$.fromParts(g(e[0]),g(e[1]),0,0);case 3:return $.fromParts(g(e[0]),g(e[1]),g(e[2]),0);case 4:return $.fromParts(g(e[0]),g(e[1]),g(e[2]),g(e[3]))}throw new d(t,f.InvalidParameter,a)})},r.dateonly=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,0,3,t,a),e.length===3)return K.fromParts(g(e[0]),g(e[1])+1,g(e[2]));if(e.length===2){let n=v(e[1]);return n===""?null:n==="X"?K.fromSeconds(g(e[0])):n==="x"?K.fromMilliseconds(g(e[0])):K.fromString(v(e[0]),n)}if(e.length===1){if(E(e[0])){if(e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(e[0])===!0)return K.fromString(e[0]+"-01-01")}if(T(e[0]))return e[0].clone();if(G(e[0]))return K.fromParts(e[0].year,e[0].monthJS+1,e[0].day);let n=g(e[0]);return isNaN(n)===!1?K.fromMilliseconds(n):E(e[0])?K.fromString(e[0]):null}if(e.length===0){let n=O.nowToArcadeDate(I(t));return n.isValid===!1?null:K.fromParts(n.year,n.monthJS+1,n.day)}return null})},r.changetimezone=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,2,2,t,a),e[0]===null)return null;if(T(e[0]))throw new d(t,f.CannotChangeTimeZoneDateOnly,a);if(T(e[0]))throw new d(t,f.CannotChangeTimeZoneTime,a);let n=C(e[0],I(t));if(n===null)throw new d(t,f.InvalidParameter,a);let o=Se(Pe(v(e[1]),t),!1);if(o===null)return null;let l=O.arcadeDateAndZoneToArcadeDate(n,o);return l.isValid===!1?null:l})},r.timezone=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,2,t,a),L(e[0])||T(e[0]))return"Unknown";let n=C(e[0],I(t));if(n===null)return null;let o=n.timeZone;return o==="system"?O.systemTimeZoneCanonicalName:o.toLowerCase()==="utc"?"UTC":o.toLowerCase()==="unknown"?"Unknown":o})},r.timezoneoffset=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=C(e[0],I(t));return n===null?null:60*n.timeZoneOffset*1e3})},r.now=function(t,a){return i(t,a,(s,c,e)=>{p(e,0,0,t,a);let n=O.nowToArcadeDate(I(t));return n.isValid===!1?null:n})},r.timestamp=function(t,a){return i(t,a,(s,c,e)=>{p(e,0,0,t,a);let n=O.nowUTCToArcadeDate();return n.isValid===!1?null:n})},r.toutc=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=C(e[0],I(t));return n===null?null:n.toUTC()})},r.tolocal=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=C(e[0],I(t));return n===null?null:n.toLocal()})},r.day=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.day})},r.month=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.monthJS})},r.year=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.year})},r.hour=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),L(e[0]))return e[0].hour;let n=C(e[0],I(t));return n===null?NaN:n.hour})},r.second=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),L(e[0]))return e[0].second;let n=C(e[0],I(t));return n===null?NaN:n.second})},r.millisecond=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),L(e[0]))return e[0].millisecond;let n=C(e[0],I(t));return n===null?NaN:n.millisecond})},r.minute=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),L(e[0]))return e[0].minute;let n=C(e[0],I(t));return n===null?NaN:n.minute})},r.week=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,2,t,a);let n=oe(e[0],I(t));if(n===null)return NaN;let o=g(M(e[1],0));if(o<0||o>6)throw new d(t,f.InvalidParameter,a);let l=n.day,m=n.monthJS,u=n.year,h=n.dayOfWeekJS,w=mt(l,m,u)-1,x=Math.floor(w/7);return h-o+(h-o<0?7:0)<w-7*x?x+1:x})},r.weekday=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.dayOfWeekJS})},r.isoweekday=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.dayOfWeekISO})},r.isomonth=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.monthISO})},r.isoweek=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.weekISO})},r.isoyear=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=oe(e[0],I(t));return n===null?NaN:n.yearISO})},r.date=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,0,8,t,a),e.length===3){if(T(e[0])&&L(e[1])&&E(e[2])){let n=Se(Pe(v(e[2])??"unknown",t),!1);return n===null?null:ne(O.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,n))}return ne(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),0,0,0,0,I(t)))}if(e.length===4)return ne(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),0,0,0,I(t)));if(e.length===5)return ne(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),0,0,I(t)));if(e.length===6)return ne(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),0,I(t)));if(e.length===7)return ne(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),g(e[6]),I(t)));if(e.length===8){let n=Se(Pe(v(e[7])??"unknown",t),!1);return n===null?null:ne(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),g(e[6]),n))}if(e.length===2){if(T(e[0])&&E(e[1])){let l=Se(Pe(v(e[1])??"unknown",t),!1);return l===null?null:ne(O.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,l))}if(T(e[0])&&L(e[1]))return ne(O.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,"unknown"));let n,o=v(e[1]);return o===""?null:(o=En(o,!0),n=o==="X"?Ne.fromSeconds(g(e[0])):o==="x"?Ne.fromMillis(g(e[0])):Ne.fromFormat(v(e[0]),o,{locale:xn(),numberingSystem:"latn"}),n.isValid?O.dateTimeToArcadeDate(n):null)}if(e.length===1){if(T(e[0]))return ne(O.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,"unknown"));if(E(e[0])){if(e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(e[0])===!0)return C(e[0]+"-01-01",I(t))}let n=g(e[0]);if(isNaN(n)===!1){let o=Ne.fromMillis(n);return o.isValid?O.dateTimeAndZoneToArcadeDate(o,I(t)):null}return C(e[0],I(t))}return e.length===0?O.nowToArcadeDate(I(t)):null})},r.datediff=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,2,4,t,a),L(e[0]))return L(e[1])?e[0].difference(e[1],v(e[2])):NaN;if(L(e[1]))return NaN;if(T(e[0]))return T(e[1])?e[0].difference(e[1],v(e[2])):NaN;if(T(e[1]))return NaN;let n=C(e[0],I(t)),o=C(e[1],I(t));if(n===null||o===null)return NaN;let l=M(e[3],"");switch(l!==""&&l!==null?(l=Pe(v(l),t),n=O.arcadeDateAndZoneToArcadeDate(n,l),o=O.arcadeDateAndZoneToArcadeDate(o,l)):n.timeZone!==o.timeZone&&(n.isUnknownTimeZone?n=O.arcadeDateAndZoneToArcadeDate(n,o.timeZone):o=(o.isUnknownTimeZone,O.arcadeDateAndZoneToArcadeDate(o,n.timeZone))),v(e[2]).toLowerCase()){case"days":case"day":case"d":return n.diff(o,"days");case"months":case"month":return n.diff(o,"months");case"minutes":case"minute":case"m":return e[2]==="M"?n.diff(o,"months"):n.diff(o,"minutes");case"seconds":case"second":case"s":return n.diff(o,"seconds");case"milliseconds":case"millisecond":case"ms":default:return n.diff(o);case"hours":case"hour":case"h":return n.diff(o,"hours");case"years":case"year":case"y":return n.diff(o,"years")}})},r.dateadd=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,3,t,a);let n=g(e[1]);if(isNaN(n)||n===1/0||n===-1/0)return L(e[0])||T(e[0])?e[0].clone():C(e[0],I(t));let o="milliseconds";switch(v(e[2]).toLowerCase()){case"days":case"day":case"d":o="days",n=T(e[0])?n:nn(n);break;case"months":case"month":o="months",n=T(e[0])?n:nn(n);break;case"minutes":case"minute":case"m":o=e[2]==="M"?"months":"minutes";break;case"seconds":case"second":case"s":o="seconds";break;case"milliseconds":case"millisecond":case"ms":o="milliseconds";break;case"hours":case"hour":case"h":o="hours";break;case"years":case"year":case"y":o="years"}if(L(e[0])||T(e[0]))return e[0].plus(o,n);let l=C(e[0],I(t));return l===null?null:l.plus({[o]:n})})}}function ht(r){let i=r?.fullSchema();return i?.datesInUnknownTimezone?"unknown":i?.dateFieldsTimeZone||"UTC"}function Vn(r){let i=r.fullSchema()?.fieldsIndex;return i==null&&r instanceof Q?r.fieldsIndex:i}var gt={getAttributeSQL(r,i){let t=r.field(i);if(t==null)return t;if(G(t)){let a=t.toDateTime(),s=Vn(r)?.get(i)?.type;return s==="esriFieldTypeTimestampOffset"||s==="timestamp-offset"?In.fromDateTime(a):a}return t}};function kr(r,i,t){r.domain=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,2,3,a,s),U(n[0])){let o=Fn(n[0],v(n[1]),n[2]===void 0?void 0:n[2]);return o&&o.domain?o.domain.type==="coded-value"||o.domain.type==="codedValue"?N.convertObjectToArcadeDictionary({type:"codedValue",name:o.domain.name,dataType:en[o.field.type],codedValues:o.domain.codedValues.map(l=>({name:l.name,code:l.code}))},I(a)):N.convertObjectToArcadeDictionary({type:"range",name:o.domain.name,dataType:en[o.field.type],min:o.domain.minValue,max:o.domain.maxValue},I(a)):null}throw new d(a,f.InvalidParameter,s)})},r.domaincode=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,2,4,a,s),U(n[0]))return Tn(n[0],v(n[1]),n[2],n[3]===void 0?void 0:n[3]);throw new d(a,f.InvalidParameter,s)})},r.domainname=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,2,4,a,s),U(n[0]))return On(n[0],v(n[1]),n[2],n[3]===void 0?void 0:n[3]);throw new d(a,f.InvalidParameter,s)})},r.expects=function(a,s){return i(a,s,(c,e,n)=>{if(n.length<1)throw new d(a,f.WrongNumberOfParameters,s);return F})},r.featureinfilter=function(a,s){return i(a,s,(c,e,n)=>{p(n,2,2,c,e);let[o,l]=n;if(o==null)return!1;if(l===""||l==null)return!0;if(!U(o)||!E(l))throw new d(c,f.InvalidParameter,e);let m=bn.create(l,{fieldsIndex:Vn(o),timeZone:ht(o)}),u=m.getVariables();for(let h of u)m.parameters[h]=t(c,{name:h});return m.testFeature(o,gt)})},r.gdbversion=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,1,a,s),U(n[0]))return n[0].gdbVersion();throw new d(a,f.InvalidParameter,s)})},r.schema=function(a,s){return i(a,s,(c,e,n)=>{if(U(n[0])){let o=Mn(n[0]);return o?N.convertObjectToArcadeDictionary(o,I(a)):null}throw new d(a,f.InvalidParameter,s)})},r.subtypecode=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,1,a,s),U(n[0])){let o=Je(n[0]);if(!o)return null;if(o.subtypeField&&n[0].hasField(o.subtypeField)){let l=n[0].field(o.subtypeField);for(let m of o.subtypes)if(m.code===l)return m.code;return null}return null}throw new d(a,f.InvalidParameter,s)})},r.subtypename=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,1,a,s),U(n[0])){let o=Je(n[0]);if(!o)return"";if(o.subtypeField&&n[0].hasField(o.subtypeField)){let l=n[0].field(o.subtypeField);for(let m of o.subtypes)if(m.code===l)return m.name;return""}return""}throw new d(a,f.InvalidParameter,s)})},r.subtypes=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,1,a,s),U(n[0])){let o=Je(n[0]);return o?N.convertObjectToArcadeDictionary(o,I(a)):null}throw new d(a,f.InvalidParameter,s)})}}function Br(r,i){r.ringisclockwise=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=[];if(e[0]===null)return!1;if(_(e[0]))for(let o of e[0]){if(!(o instanceof j))throw new d(t,f.InvalidParameter,a);n.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}else if(e[0]instanceof ze)n=e[0]._elements;else{if(!P(e[0]))throw new d(t,f.InvalidParameter,a);for(let o of e[0].toArray()){if(!(o instanceof j))throw new d(t,f.InvalidParameter,a);n.push(o.hasZ?o.hasM?[o.x,o.y,o.z,o.m]:[o.x,o.y,o.z]:[o.x,o.y])}}return!(n.length<3)&&vn(n)})},r.polygon=function(t,a){return i(t,a,(s,c,e)=>{let n;if(p(e,1,1,t,a),e[0]instanceof N){let o=z(Y(e[0],t.spatialReference,"polygon"),t.spatialReference);if(o==null)return null;n=o}else if(e[0]instanceof fe)n=B(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=t.spatialReference),n=z(new fe(o),t.spatialReference)}if(n!==null&&n.spatialReference.equals(t.spatialReference)===!1)throw new d(t,f.WrongSpatialReference,a);return he(n)})},r.polyline=function(t,a){return i(t,a,(s,c,e)=>{let n;if(p(e,1,1,t,a),e[0]instanceof N){let o=z(Y(e[0],t.spatialReference,"polyline"),t.spatialReference);if(o==null)return null;n=o}else if(e[0]instanceof de)n=B(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=t.spatialReference),n=z(new de(o),t.spatialReference)}if(n!==null&&n.spatialReference.equals(t.spatialReference)===!1)throw new d(t,f.WrongSpatialReference,a);return he(n)})},r.point=function(t,a){return i(t,a,(s,c,e)=>{let n;if(p(e,1,1,t,a),e[0]instanceof N){let o=z(Y(e[0],t.spatialReference,"point"),t.spatialReference);if(o==null)return null;n=o}else if(e[0]instanceof j)n=B(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=t.spatialReference),n=z(new j(o),t.spatialReference)}if(n!==null&&n.spatialReference.equals(t.spatialReference)===!1)throw new d(t,f.WrongSpatialReference,a);return he(n)})},r.multipoint=function(t,a){return i(t,a,(s,c,e)=>{let n;if(p(e,1,1,t,a),e[0]instanceof N){let o=z(Y(e[0],t.spatialReference,"multipoint"),t.spatialReference);if(o==null)return null;n=o}else if(e[0]instanceof me)n=B(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=t.spatialReference),n=z(new me(o),t.spatialReference)}if(n!==null&&n.spatialReference.equals(t.spatialReference)===!1)throw new d(t,f.WrongSpatialReference,a);return he(n)})},r.extent=function(t,a){return i(t,a,(s,c,e)=>{e=Ee(e),p(e,1,1,t,a);let n=null;if(e[0]instanceof N)n=z(Y(e[0],t.spatialReference),t.spatialReference);else if(e[0]instanceof j){let o={xmin:e[0].x,ymin:e[0].y,xmax:e[0].x,ymax:e[0].y,spatialReference:e[0].spatialReference.toJSON()},l=e[0];l.hasZ&&(o.zmin=l.z,o.zmax=l.z),l.hasM&&(o.mmin=l.m,o.mmax=l.m),n=B(o)}else if(e[0]instanceof fe)n=B(e[0].extent?.toJSON());else if(e[0]instanceof de)n=B(e[0].extent?.toJSON());else if(e[0]instanceof me)n=B(e[0].extent?.toJSON());else if(e[0]instanceof _e)n=B(e[0].toJSON());else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=t.spatialReference),n=z(new _e(o),t.spatialReference)}if(n!==null&&n.spatialReference.equals(t.spatialReference)===!1)throw new d(t,f.WrongSpatialReference,a);return he(n)})},r.geometry=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=null;if(e[0]===null)return null;if(U(e[0]))n=z(e[0].geometry(),t.spatialReference);else if(e[0]instanceof N)n=z(Y(e[0],t.spatialReference),t.spatialReference);else{let o=JSON.parse(e[0]);o&&!o.spatialReference&&(o.spatialReference=t.spatialReference),n=z(B(o),t.spatialReference)}if(n!==null&&n.spatialReference.equals(t.spatialReference)===!1)throw new d(t,f.WrongSpatialReference,a);return he(n)})},r.setgeometry=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,2,2,t,a),!U(e[0]))throw new d(t,f.InvalidParameter,a);if(e[0].immutable===!0)throw new d(t,f.Immutable,a);if(!(e[1]instanceof le||e[1]===null))throw new d(t,f.InvalidParameter,a);return e[0]._geometry=e[1],F})},r.feature=function(t,a){return i(t,a,(s,c,e)=>{if(e.length===0)throw new d(t,f.WrongNumberOfParameters,a);let n;if(e.length===1)if(E(e[0]))n=Q.fromJson(JSON.parse(e[0]),t.timeZone);else if(U(e[0]))n=Q.createFromArcadeFeature(e[0]);else if(e[0]instanceof le)n=Q.createFromGraphicLikeObject(e[0],null,null,t.timeZone);else{if(!(e[0]instanceof N))throw new d(t,f.InvalidParameter,a);{let o=e[0].hasField("geometry")?e[0].field("geometry"):null,l=e[0].hasField("attributes")?e[0].field("attributes"):null,m,u;if(qe(o))m=Y(o,t.spatialReference);else{if(o!=null&&!je(o))throw new d(t,f.InvalidParameter,a);m=o}if(qe(l))u=Q.parseAttributesFromDictionary(l);else{if(l!=null)throw new d(t,f.InvalidParameter,a);u=null}n=Q.createFromGraphicLikeObject(m,u,null,t.timeZone)}}else if(e.length===2){let o=null,l=null;if(e[0]!==null)if(e[0]instanceof le)o=e[0];else{if(!(e[0]instanceof N))throw new d(t,f.InvalidParameter,a);o=Y(e[0],t.spatialReference)}if(e[1]!==null){if(!(e[1]instanceof N))throw new d(t,f.InvalidParameter,a);l=Q.parseAttributesFromDictionary(e[1])}n=Q.createFromGraphicLikeObject(o,l,null,t.timeZone)}else{let o=null,l={};if(e[0]!==null)if(e[0]instanceof le)o=e[0];else{if(!(e[0]instanceof N))throw new d(t,f.InvalidParameter,a);o=Y(e[0],t.spatialReference)}for(let m=1;m<e.length;m+=2){let u=v(e[m]),h=e[m+1];if(!(h==null||E(h)||isNaN(h)||G(h)||q(h)||L(h)||T(h)||H(h)))throw new d(t,f.InvalidParameter,a);if(pe(h)||Sn(h)===!1)throw new d(t,f.InvalidParameter,a);l[u]=h===F?null:h}n=Q.createFromGraphicLikeObject(o,l,null,t.timeZone)}return n._geometry=z(n.geometry(),t.spatialReference),n.immutable=!1,n})},r.dictionary=function(t,a){return i(t,a,(s,c,e)=>{if(e.length===0||e.length===1&&e[0]===null){let l=new N;return l.immutable=!1,l}if(e.length===1&&E(e[0]))try{let l=JSON.parse(e[0]),m=N.convertObjectToArcadeDictionary(l,I(t),!1);return m.immutable=!1,m}catch{throw new d(t,f.InvalidParameter,a)}if(e.length===1&&e[0]instanceof le)try{let l=e[0].toJSON();l.hasZ=e[0].hasZ===!0,l.hasM=e[0].hasM===!0;let m=N.convertObjectToArcadeDictionary(l,I(t),!1);return m.immutable=!1,m}catch{throw new d(t,f.InvalidParameter,a)}if(e.length===1&&U(e[0]))try{let l=new N;l.immutable=!1,l.setField("geometry",e[0].geometry());let m=new N;m.immutable=!1,l.setField("attributes",m);for(let u of e[0].keys())m.setField(u,e[0].field(u));return l}catch{throw new d(t,f.InvalidParameter,a)}if(e.length===1&&(qe(e[0])||Dn(e[0])))try{let l=new N;l.immutable=!1;for(let m of e[0].keys())l.setField(m,e[0].field(m));return l}catch{throw new d(t,f.InvalidParameter,a)}if(e.length===2&&e[0]instanceof N&&H(e[1]))try{if(e[1]!==!0){let l=new N;l.immutable=!1;for(let m of e[0].keys())l.setField(m,e[0].field(m));return l}return e[0].deepClone()}catch{throw new d(t,f.InvalidParameter,a)}if(e.length%2!=0)throw new d(t,f.WrongNumberOfParameters,a);let n={};for(let l=0;l<e.length;l+=2){let m=v(e[l]),u=e[l+1];if(!(u==null||E(u)||isNaN(u)||G(u)||q(u)||H(u)||T(u)||L(u)||_(u)||P(u)))throw new d(t,f.InvalidParameter,a);if(pe(u))throw new d(t,f.InvalidParameter,a);n[m]=u===F?null:u}let o=new N(n);return o.immutable=!1,o})},r.haskey=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,2,t,a);let n=v(e[1]);if(He(e[0])||e[0]instanceof N)return e[0].hasField(n);if(e[0]instanceof le){let o=an(e[0],n,null,null,2);return!o||o.keystate!=="notfound"}throw new d(t,f.InvalidParameter,a)})},r.hasvalue=function(t,a){return i(t,a,(s,c,e)=>(p(e,2,2,t,a),Jn(e[0],e[1])!=null))},r.indexof=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,2,t,a);let n=e[1];if(_(e[0])){for(let o=0;o<e[0].length;o++)if(ye(n,e[0][o]))return o;return-1}if(P(e[0])){let o=e[0].length();for(let l=0;l<o;l++)if(ye(n,e[0].get(l)))return l;return-1}throw new d(t,f.InvalidParameter,a)})},r.angle=function(t,a){return i(t,a,(s,c,e)=>{if(e=Ee(e),p(e,2,3,t,a),!(e[0]instanceof j))throw new d(t,f.InvalidParameter,a);if(!(e[1]instanceof j))throw new d(t,f.InvalidParameter,a);if(e.length>2&&!(e[2]instanceof j))throw new d(t,f.InvalidParameter,a);return e.length===2?Un(e[0],e[1]):zn(e[0],e[1],e[2])})},r.bearing=function(t,a){return i(t,a,(s,c,e)=>{if(e=Ee(e),p(e,2,3,t,a),!(e[0]instanceof j))throw new d(t,f.InvalidParameter,a);if(!(e[1]instanceof j))throw new d(t,f.InvalidParameter,a);if(e.length>2&&!(e[2]instanceof j))throw new d(t,f.InvalidParameter,a);return e.length===2?Cn(e[0],e[1]):Zn(e[0],e[1],e[2])})},r.isselfintersecting=function(t,a){return i(t,a,(s,c,e)=>{e=Ee(e),p(e,1,1,t,a);let n=e[0];if(n instanceof fe)return n.isSelfIntersecting;if(n instanceof de)return rn(n.paths);if(n instanceof me){let o=n.points;for(let l=0;l<o.length;l++)for(let m=0;m<o.length;m++)if(m!==l){let u=!0;for(let h=0;h<o[l].length;h++)if(o[l][h]!==o[m][h]){u=!1;break}if(u===!0)return!0}}if(_(n)||P(n)){let o=Pn(n,t.spatialReference);return o!==null&&(n=o.paths),rn(n)}return!1})}}function ea(r,i){function t(a,s,c){let e=g(a);return isNaN(e)?e:isNaN(s)||isNaN(c)||s>c?NaN:e<s?s:e>c?c:e}r.number=function(a,s){return i(a,s,(c,e,n)=>{p(n,1,2,a,s);let o=n[0];if(q(o))return o;if(o===null)return 0;if(G(o)||L(o)||T(o))return o.toNumber();if(H(o))return Number(o);if(_(o))return NaN;if(o===""||o===void 0)return Number(o);if(E(o)){if(n[1]!==void 0){let l=De(n[1],"\u2030","");return l=De(l,"\xA4",""),_n(o,{pattern:l})}return Number(o.trim())}return Number(o)})},r.abs=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.abs(g(n[0]))))},r.acos=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.acos(g(n[0]))))},r.asin=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.asin(g(n[0]))))},r.atan=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.atan(g(n[0]))))},r.atan2=function(a,s){return i(a,s,(c,e,n)=>(p(n,2,2,a,s),Math.atan2(g(n[0]),g(n[1]))))},r.ceil=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,2,a,s),n.length===2){let o=g(n[1]);return isNaN(o)&&(o=0),Ce("ceil",g(n[0]),-1*o)}return Math.ceil(g(n[0]))})},r.round=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,2,a,s),n.length===2){let o=g(n[1]);return isNaN(o)&&(o=0),Ce("round",g(n[0]),-1*o)}return Math.round(g(n[0]))})},r.floor=function(a,s){return i(a,s,(c,e,n)=>{if(p(n,1,2,a,s),n.length===2){let o=g(n[1]);return isNaN(o)&&(o=0),Ce("floor",g(n[0]),-1*o)}return Math.floor(g(n[0]))})},r.cos=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.cos(g(n[0]))))},r.isnan=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),typeof n[0]=="number"&&isNaN(n[0])))},r.exp=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.exp(g(n[0]))))},r.log=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.log(g(n[0]))))},r.pow=function(a,s){return i(a,s,(c,e,n)=>(p(n,2,2,a,s),g(n[0])**g(n[1])))},r.random=function(a,s){return i(a,s,(c,e,n)=>(p(n,0,0,a,s),Math.random()))},r.sin=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.sin(g(n[0]))))},r.sqrt=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.sqrt(g(n[0]))))},r.tan=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),Math.tan(g(n[0]))))},r.isempty=function(a,s){return i(a,s,(c,e,n)=>(p(n,1,1,a,s),n[0]===null||n[0]===""||n[0]===void 0||n[0]===F))},r.boolean=function(a,s){return i(a,s,(c,e,n)=>{p(n,1,1,a,s);let o=n[0];return ke(o)})},r.constrain=function(a,s){return i(a,s,(c,e,n)=>{p(n,3,3,a,s);let o=g(n[1]),l=g(n[2]);if(_(n[0])){let m=[];for(let u of n[0])m.push(t(u,o,l));return m}if(P(n[0])){let m=[];for(let u=0;u<n[0].length();u++)m.push(t(n[0].get(u),o,l));return m}return t(n[0],o,l)})}}function se(r,i){if(i.length===1){if(_(i[0]))return Ge(r,i[0],-1);if(P(i[0]))return Ge(r,i[0].toArray(),-1)}return Ge(r,i,-1)}function oa(r,i){r.stdev=function(t,a){return i(t,a,(s,c,e)=>se("stdev",e))},r.variance=function(t,a){return i(t,a,(s,c,e)=>se("variance",e))},r.average=function(t,a){return i(t,a,(s,c,e)=>se("mean",e))},r.mean=function(t,a){return i(t,a,(s,c,e)=>se("mean",e))},r.sum=function(t,a){return i(t,a,(s,c,e)=>se("sum",e))},r.min=function(t,a){return i(t,a,(s,c,e)=>se("min",e))},r.max=function(t,a){return i(t,a,(s,c,e)=>se("max",e))},r.distinct=function(t,a){return i(t,a,(s,c,e)=>se("distinct",e))},r.count=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),_(e[0])||E(e[0]))return e[0].length;if(P(e[0]))return e[0].length();throw new d(t,f.InvalidParameter,a)})}}var hn=r=>(i,t,a=14)=>+r(i,t).toFixed(a),wt=(r,i)=>r+i;var yt=(r,i)=>r*i,xt=(r,i)=>r/i,Bn=(r,i,t)=>hn(wt)(r,i,t);var be=(r,i,t)=>hn(yt)(r,i,t),Xe=(r,i,t)=>hn(xt)(r,i,t),Ke=360,At=400,vt=2*Math.PI,X=3600,Qn=3240,Me=60,ue=60,Xn=180*X/Math.PI,Oe=Ke*Me*ue,on=90*X,xe=180*X,It=270*X,nt="\u1D4D",Te="\xB0";function Fe(r){if(E(r)===!1)throw new d(null,f.InvalidParameter,null);return r}function ln(r,i){let t=10**i;return Math.round(r*t)/t}function bt(r,i){return r%i}function Ae(r){let i=parseFloat(r.toString().replace(Math.trunc(r).toString(),"0"))*Math.sign(r);return r<0?{fraction:i,integer:Math.ceil(r)}:{fraction:i,integer:Math.floor(r)}}var k,y,S,mn;function Ie(r,i){switch(r){case k.north:return i==="SHORT"?"N":"North";case k.east:return i==="SHORT"?"E":"East";case k.south:return i==="SHORT"?"S":"South";case k.west:return i==="SHORT"?"W":"West"}}function sn(r,i){return r-Math.floor(r/i)*i}function un(r){switch(r){case y.truncated_degrees:case y.decimal_degrees:return Ke;case y.radians:return vt;case y.gradians:return At;case y.seconds:return Oe;case y.fractional_degree_minutes:return Me;case y.fractional_minute_seconds:return ue;default:throw new d(null,f.LogicError,null,{reason:"unsupported evaluations"})}}function Kn(r){switch(r.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return S.north_azimuth;case"POLAR":return S.polar;case"QUADRANT":return S.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return S.south_azimuth}throw new d(null,f.LogicError,null,{reason:"unsupported directionType"})}function $n(r){switch(r.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return y.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return y.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return y.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return y.gradians}throw new d(null,f.LogicError,null,{reason:"unsupported units"})}(function(r){r[r.north=0]="north",r[r.east=1]="east",r[r.south=2]="south",r[r.west=3]="west"})(k||(k={})),function(r){r[r.decimal_degrees=1]="decimal_degrees",r[r.seconds=2]="seconds",r[r.degrees_minutes_seconds=3]="degrees_minutes_seconds",r[r.radians=4]="radians",r[r.gradians=5]="gradians",r[r.truncated_degrees=6]="truncated_degrees",r[r.fractional_degree_minutes=7]="fractional_degree_minutes",r[r.fractional_minute_seconds=8]="fractional_minute_seconds"}(y||(y={})),function(r){r[r.north_azimuth=1]="north_azimuth",r[r.polar=2]="polar",r[r.quadrant=3]="quadrant",r[r.south_azimuth=4]="south_azimuth"}(S||(S={})),function(r){r[r.meridian=0]="meridian",r[r.direction=1]="direction"}(mn||(mn={}));var ce=class r{constructor(i,t,a){this.m_degrees=i,this.m_minutes=t,this.m_seconds=a}getField(i){switch(i){case y.decimal_degrees:case y.truncated_degrees:return this.m_degrees;case y.fractional_degree_minutes:return this.m_minutes;case y.seconds:case y.fractional_minute_seconds:return this.m_seconds;default:throw new d(null,f.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(i){let t=Ae(i).fraction,a=Ae(i).integer,s=Math.floor(a/X);a-=s*X;let c=Math.floor(a/ue);return a-=c*ue,new r(s,c,a+t)}static numberToDms(i){let t=Ae(i).fraction,a=Ae(i).integer,s=be(Ae(100*t).fraction,100),c=Ae(100*t).integer;return new r(a,c,s)}format(i,t){let a=ln(this.m_seconds,t),s=this.m_minutes,c=this.m_degrees;if(i===y.seconds||i===y.fractional_minute_seconds)ue<=a&&(a-=ue,++s),Me<=s&&(s=0,++c),Ke<=c&&(c=0);else if(i===y.fractional_degree_minutes)a=0,s=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,c=this.m_degrees,Me<=s&&(s=0,++c),Ke<=c&&(c=0);else if(i===y.decimal_degrees||i===y.truncated_degrees){let e=Xe(this.m_seconds,X),n=Xe(this.m_minutes,Me);c=Math.round(this.m_degrees+n+e),s=0,a=0}return new r(c,s,a)}static dmsToSeconds(i,t,a){return i*X+t*ue+a}},fn=class{constructor(i,t,a){this.meridian=i,this.angle=t,this.direction=a}fetchAzimuth(i){return i===mn.meridian?this.meridian:this.direction}},te=class r{constructor(i){this._angle=i}static createFromAngleAndDirection(i,t){return new r(new W(r._convertDirectionFormat(i.extractAngularUnits(y.seconds),t,S.north_azimuth)))}getAngle(i){let t=this._angle.extractAngularUnits(y.seconds);switch(i){case S.north_azimuth:case S.south_azimuth:case S.polar:return new W(r._convertDirectionFormat(t,S.north_azimuth,i));case S.quadrant:{let a=r.secondsNorthAzimuthToQuadrant(t);return new W(a.angle)}}}getMeridian(i){let t=this._angle.extractAngularUnits(y.seconds);switch(i){case S.north_azimuth:return k.north;case S.south_azimuth:return k.south;case S.polar:return k.east;case S.quadrant:return r.secondsNorthAzimuthToQuadrant(t).meridian}}getDirection(i){let t=this._angle.extractAngularUnits(y.seconds);switch(i){case S.north_azimuth:return k.east;case S.south_azimuth:return k.west;case S.polar:return k.north;case S.quadrant:return r.secondsNorthAzimuthToQuadrant(t).direction}}static secondsNorthAzimuthToQuadrant(i){let t=i<=on||i>=It?k.north:k.south,a=t===k.north?Math.min(Oe-i,i):Math.abs(i-xe),s=i>xe?k.west:k.east;return new fn(t,a,s)}static createFromAngleMeridianAndDirection(i,t,a){return new r(new W(r.secondsQuadrantToNorthAzimuth(i.extractAngularUnits(y.seconds),t,a)))}static secondsQuadrantToNorthAzimuth(i,t,a){return t===k.north?a===k.east?i:Oe-i:a===k.east?xe-i:xe+i}static _convertDirectionFormat(i,t,a){let s=0;switch(t){case S.north_azimuth:s=i;break;case S.polar:s=on-i;break;case S.quadrant:throw new d(null,f.LogicError,null,{reason:"unexpected evaluation"});case S.south_azimuth:s=i+xe}let c=0;switch(a){case S.north_azimuth:c=s;break;case S.polar:c=on-s;break;case S.quadrant:throw new d(null,f.LogicError,null,{reason:"unexpected evaluation"});case S.south_azimuth:c=s-xe}return c=bt(c,Oe),c<0?Oe+c:c}};function Yn(r,i,t){let a=null;switch(i){case y.decimal_degrees:a=be(r,X);break;case y.seconds:a=r;break;case y.gradians:a=be(r,Qn);break;case y.radians:a=be(r,Xn);break;default:throw new d(null,f.LogicError,null,{reason:"unexpected evaluation"})}switch(t){case y.decimal_degrees:return Xe(a,X);case y.seconds:return a;case y.gradians:return Xe(a,Qn);case y.radians:return a/Xn;default:throw new d(null,f.LogicError,null,{reason:"unexpected evaluation"})}}var W=class r{constructor(i){this._seconds=i}static createFromAngleAndUnits(i,t){return new r(Yn(i,t,y.seconds))}extractAngularUnits(i){return Yn(this._seconds,y.seconds,Le(i))}static createFromDegreesMinutesSeconds(i,t,a){return new r(Bn(Bn(be(i,X),be(t,ue)),a))}};function Le(r){switch(gn(r),r){case y.decimal_degrees:case y.truncated_degrees:case y.degrees_minutes_seconds:return y.decimal_degrees;case y.gradians:return y.gradians;case y.fractional_degree_minutes:return y.fractional_degree_minutes;case y.radians:return y.radians;case y.seconds:case y.fractional_minute_seconds:return y.seconds}}var dn=class r{constructor(i,t,a,s){this.view=i,this.angle=t,this.merdian=a,this.direction=s,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(i,t,a){return new r(i,t.getAngle(a),t.getMeridian(a),t.getDirection(a))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let i=null,t=y.truncated_degrees,a=0;for(let s=0;s<this.view.length;s++){let c=this.view[s];switch(c){case"m":i=pn(this.view,s,c),t=t===y.truncated_degrees?y.fractional_degree_minutes:t,s=i.newpos;continue;case"s":i=pn(this.view,s,c),t=y.fractional_minute_seconds,a=a<i.rounding?i.rounding:a,s=i.newpos;continue;default:continue}}this._dms=ce.secondsToDMS(this.angle.extractAngularUnits(y.seconds)),this._formattedDms=ce.secondsToDMS(this.angle.extractAngularUnits(y.seconds)).format(t,a)}};function Nt(r,i,t,a,s){let c=null;switch(i){case y.decimal_degrees:case y.radians:case y.gradians:return c=sn(ln(r.extractAngularUnits(i),a),un(i)),c.toFixed(a).padStart(t+a+(a>0?1:0),"0");case y.truncated_degrees:case y.fractional_degree_minutes:return c=sn(s.fetchFormattedDms().getField(i),un(i)),c.toFixed(a).padStart(t+a+(a>0?1:0),"0");case y.fractional_minute_seconds:return c=sn(ln(s.fetchDms().getField(i),a),un(i)),c.toFixed(a).padStart(t+a+(a>0?1:0),"0");default:throw new d(null,f.LogicError,null,{reason:"unexpected evaluation"})}}function _t(r,i,t){if(t===S.quadrant)throw new d(null,f.LogicError,null,{reason:"conversion error"});if(i===y.degrees_minutes_seconds){let a=ce.numberToDms(r);return te.createFromAngleAndDirection(W.createFromDegreesMinutesSeconds(a.m_degrees,a.m_minutes,a.m_seconds),t)}return te.createFromAngleAndDirection(W.createFromAngleAndUnits(r,Le(i)),t)}function St(r){switch(g(r)){case 1:return{first:k.north,second:k.east};case 2:return{first:k.south,second:k.east};case 3:return{first:k.south,second:k.west};case 4:return{first:k.north,second:k.west}}return null}function et(r){switch(r.toUpperCase().trim()){case"N":case"NORTH":return k.north;case"E":case"EAST":return k.east;case"S":case"SOUTH":return k.south;case"W":case"WEST":return k.west}return null}function ve(r){let i=parseFloat(r);if(q(i)){if(isNaN(i))throw new d(null,f.LogicError,null,{reason:"invalid conversion"});return i}throw new d(null,f.LogicError,null,{reason:"invalid conversion"})}function cn(r,i,t){let a=t===S.quadrant,s=null,c=null,e=0,n=0,o=0;if(a){if(r.length<2)throw new d(null,f.LogicError,null,{reason:"conversion error"});o=1;let l=St(v(r[r.length-1]));if(l?(s=l.first,c=l.second):(e=1,s=et(v(r[0])),c=et(v(r[r.length-1]))),s===null||c===null)throw new d(null,f.LogicError,null,{reason:"invalid conversion"})}switch(i){case y.decimal_degrees:case y.radians:case y.gradians:if(r.length===0)throw new d(null,f.LogicError,null,{reason:"invalid conversion"});return a?te.createFromAngleMeridianAndDirection(W.createFromAngleAndUnits(ve(r[e]),Le(i)),s,c):te.createFromAngleAndDirection(W.createFromAngleAndUnits(ve(r[e]),Le(i)),t);case y.degrees_minutes_seconds:if(n=r.length-o-e,n===3){let l=W.createFromDegreesMinutesSeconds(ve(r[e]),ve(r[e+1]),ve(r[e+2]));return a?te.createFromAngleMeridianAndDirection(l,s,c):te.createFromAngleAndDirection(l,t)}if(n===1){let l=ve(r[e]),m=ce.numberToDms(l),u=W.createFromDegreesMinutesSeconds(m.m_degrees,m.m_minutes,m.m_seconds);return a?te.createFromAngleMeridianAndDirection(u,s,c):te.createFromAngleAndDirection(u,t)}}throw new d(null,f.LogicError,null,{reason:"invalid conversion"})}function Dt(r){let i=new Set([" ","-","/","'",'"',"\\","^",Te,nt,"	","\r",`
`,"*"]),t="";for(let a=0;a<r.length;a++){let s=r.charAt(a);i.has(s)?t+="RRSPLITRRSPLITRR":t+=s}return t.split("RRSPLITRRSPLITRR").filter(a=>a!=="")}function Rt(r,i,t){if(q(r))return _t(g(r),i,t);if(E(r))return cn(Dt(r),i,t);if(_(r))return cn(r,i,t);if(P(r))return cn(r.toArray(),i,t);throw new d(null,f.LogicError,null,{reason:"conversion error"})}function kt(r,i,t){let a=Le(t);if(a&&t!==y.degrees_minutes_seconds)return r.getAngle(i).extractAngularUnits(a);throw new d(null,f.LogicError,null,{reason:"conversion error"})}function Et(r,i,t){let a=r.getAngle(i);if(i===S.quadrant&&t===y.degrees_minutes_seconds){let s=ce.secondsToDMS(a.extractAngularUnits(y.seconds));return[Ie(r.getMeridian(i),"SHORT"),s.m_degrees,s.m_minutes,s.m_seconds,Ie(r.getDirection(i),"SHORT")]}if(t===y.degrees_minutes_seconds){let s=ce.secondsToDMS(a.extractAngularUnits(y.seconds));return[s.m_degrees,s.m_minutes,s.m_seconds]}return i===S.quadrant?[Ie(r.getMeridian(i),"SHORT"),a.extractAngularUnits(t),Ie(r.getDirection(i),"SHORT")]:[a.extractAngularUnits(t)]}function Pt(r,i){let t="";switch(r){case y.decimal_degrees:t=i===S.quadrant?"DD.DD"+Te:"DDD.DD"+Te;break;case y.degrees_minutes_seconds:t=i===S.quadrant?"dd"+Te+` mm' ss"`:"ddd"+Te+` mm' ss.ss"`;break;case y.radians:t="R.RR";break;case y.gradians:t="GGG.GG"+nt;break;default:throw new d(null,f.LogicError,null,{reason:"conversion error"})}return i===S.quadrant&&(t="p "+t+" b"),t}function pn(r,i,t){let a={padding:0,rounding:0,newpos:i},s=!1;for(;i<r.length;){let c=r[i];if(c===t)s?a.rounding++:a.padding++,i++;else{if(c!==".")break;s=!0,i++}}return a.newpos=i-1,a}function Ft(r,i,t){let a={escaped:"",newpos:i};for(i++;i<r.length;){let s=r[i];if(i++,s==="]")break;a.escaped+=s}return a.newpos=i-1,a}function Ot(r,i,t){let a="",s=null,c=null,e=dn.createFromStringAndBearing(i,r,t),n={D:y.decimal_degrees,d:y.truncated_degrees,m:y.fractional_degree_minutes,s:y.fractional_minute_seconds,R:y.radians,G:y.gradians};for(let o=0;o<i.length;o++){let l=i[o];switch(l){case"[":s=Ft(i,o),a+=s.escaped,o=s.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":s=pn(i,o,l),c=r.getAngle(t),a+=Nt(c,n[l],s.padding,s.rounding,e),o=s.newpos;continue;case"P":case"p":a+=Ie(e.fetchMeridian(),l==="p"?"SHORT":"LONG");continue;case"B":case"b":a+=Ie(e.fetchDirection(),l==="b"?"SHORT":"LONG");continue;default:a+=l}}return a}function tt(r,i,t){if(!(i instanceof N))throw new d(null,f.InvalidParameter,null);if(i.hasField("directionType")===!1)throw new d(null,f.LogicError,null,{reason:"missing directionType"});if(i.hasField("angleType")===!1)throw new d(null,f.LogicError,null,{reason:"missing angleType"});let a=Kn(Fe(i.field("directiontype"))),s=Rt(r,$n(Fe(i.field("angletype"))),a);if(!(t instanceof N))throw new d(null,f.InvalidParameter,null);if(t.hasField("directionType")===!1)throw new d(null,f.LogicError,null,{reason:"missing directionType"});if(t.hasField("outputType")===!1)throw new d(null,f.LogicError,null,{reason:"missing angleType"});let c=Kn(Fe(t.field("directiontype"))),e=t.hasField("angleType")?$n(Fe(t.field("angletype"))):null,n=Fe(t.field("outputType")).toUpperCase().trim();if(!c||!n)throw new d(null,f.LogicError,null,{reason:"conversion error"});if(!(e||n==="TEXT"&&t.hasField("format")))throw new d(null,f.LogicError,null,{reason:"invalid unit"});switch(n){case"VALUE":return c===S.quadrant||e===y.degrees_minutes_seconds?Et(s,c,e):kt(s,c,e);case"TEXT":{let o="";return t.hasField("format")&&(o=v(t.field("format"))),o!==null&&o!==""||(o=Pt(e,c)),Ot(s,o,c)}default:throw new d(null,f.InvalidParameter,null)}}function rt(r){let i=[];for(let t=0,a=r.length;t<a;t++){let s=r.charCodeAt(t);s<128?i.push(s):s<2048?i.push(192|s>>6,128|63&s):s<55296||s>=57344?i.push(224|s>>12,128|s>>6&63,128|63&s):(t++,s=65536+((1023&s)<<10|1023&r.charCodeAt(t)),i.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|63&s))}return new Uint8Array(i)}var $e=class{constructor(i){this._seed=i,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(i){let t=[];for(let a of i)isNaN(a)?t.push("NaN"):a===1/0?t.push("Infinity"):a===-1/0?t.push("-Infinity"):a===0?t.push("0"):t.push(a.toString(16));this.update(rt(t.join("")))}updateIntArray(i){let t=Int32Array.from(i);this.update(new Uint8Array(t.buffer))}updateUint8Array(i){this.update(Uint8Array.from(i))}updateWithString(i){return this.update(rt(i))}update(i){return this._bufs.push(i),this._totallen+=i.length,this}digest(){let i=new Uint8Array(this._totallen),t=0;for(let a of this._bufs)i.set(a,t),t+=a.length;return this.init(),this._xxHash32(i,this._seed)}_xxHash32(i,t=0){let a=i,s=t+374761393&4294967295,c=0;if(a.length>=16){let n=[t+2654435761+2246822519&4294967295,t+2246822519&4294967295,t+0&4294967295,t-2654435761&4294967295],o=i,l=o.length-16,m=0;for(c=0;(4294967280&c)<=l;c+=4){let u=c,h=o[u]+(o[u+1]<<8),w=o[u+2]+(o[u+3]<<8),x=h*2246822519+(w*2246822519<<16),b=n[m]+x&4294967295;b=b<<13|b>>>19;let A=65535&b,D=b>>>16;n[m]=A*2654435761+(D*2654435761<<16)&4294967295,m=m+1&3}s=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}s=s+i.length&4294967295;let e=i.length-4;for(;c<=e;c+=4){let n=c,o=a[n]+(a[n+1]<<8),l=a[n+2]+(a[n+3]<<8);s=s+(o*3266489917+(l*3266489917<<16))&4294967295,s=s<<17|s>>>15,s=(65535&s)*668265263+((s>>>16)*668265263<<16)&4294967295}for(;c<a.length;++c)s+=a[c]*374761393,s=s<<11|s>>>21,s=(65535&s)*2654435761+((s>>>16)*2654435761<<16)&4294967295;return s^=s>>>15,s=((65535&s)*2246822519&4294967295)+((s>>>16)*2246822519<<16),s^=s>>>13,s=((65535&s)*3266489917&4294967295)+((s>>>16)*3266489917<<16),s^=s>>>16,s<0?s+4294967296:s}};function Tt(r){return r.loadStatus==="loaded"&&r.user?.sourceJSON?r.user.sourceJSON:null}function Mt(r,i){return!!r&&yn(r,i?.restUrl||"")}function at(r,i){if(!r||!i)return r===i;if(r.x===i.x&&r.y===i.y){if(r.hasZ){if(r.z!==i.z)return!1}else if(i.hasZ)return!1;if(r.hasM){if(r.m!==i.m)return!1}else if(i.hasM)return!1;return!0}return!1}function V(r,i,t){if(r!==null)if(_(r)){if(i.updateUint8Array([61]),t.map.has(r)){let a=t.map.get(r);i.updateIntArray([61237541^a])}else{t.map.set(r,t.currentLength++);for(let a of r)V(a,i,t);t.map.delete(r),t.currentLength--}i.updateUint8Array([199])}else if(P(r)){if(i.updateUint8Array([61]),t.map.has(r)){let a=t.map.get(r);i.updateIntArray([61237541^a])}else{t.map.set(r,t.currentLength++);for(let a of r.toArray())V(a,i,t);t.map.delete(r),t.currentLength--}i.updateUint8Array([199])}else{if(G(r))return i.updateIntArray([r.toNumber()]),void i.updateUint8Array([241]);if(T(r))return i.updateIntArray([r.toNumber()]),void i.updateIntArray([257]);if(L(r))return i.updateIntArray([r.toNumber()]),void i.updateIntArray([263]);if(E(r))return i.updateIntArray([r.length]),i.updateWithString(r),void i.updateUint8Array([41]);if(H(r))i.updateUint8Array([r===!0?1:0,113]);else{if(q(r))return i.updateFloatArray([r]),void i.updateUint8Array([173]);if(r instanceof jn)throw new d(t.context,f.UnsupportedHashType,t.node);if(r instanceof We)throw new d(t.context,f.UnsupportedHashType,t.node);if(!(r instanceof N)){if(U(r))throw new d(t.context,f.UnsupportedHashType,t.node);if(r instanceof j)return i.updateIntArray([3833836621]),i.updateIntArray([0]),i.updateFloatArray([r.x]),i.updateIntArray([1]),i.updateFloatArray([r.y]),r.hasZ&&(i.updateIntArray([2]),i.updateFloatArray([r.z])),r.hasM&&(i.updateIntArray([3]),i.updateFloatArray([r.m])),i.updateIntArray([3765347959]),void V(r.spatialReference.wkid,i,t);if(r instanceof fe){i.updateIntArray([1266616829]);for(let a=0;a<r.rings.length;a++){let s=r.rings[a],c=[],e=null,n=null;for(let o=0;o<s.length;o++){let l=r.getPoint(a,o);if(o===0)e=l;else if(at(n,l))continue;n=l,o===s.length-1&&at(e,l)||c.push(l)}i.updateIntArray([1397116793,c.length]);for(let o=0;o<c.length;o++){let l=c[o];i.updateIntArray([3962308117,o]),V(l,i,t),i.updateIntArray([2716288009])}i.updateIntArray([2278822459])}return i.updateIntArray([3878477243]),void V(r.spatialReference.wkid,i,t)}if(r instanceof de){i.updateIntArray([4106883559]);for(let a=0;a<r.paths.length;a++){let s=r.paths[a];i.updateIntArray([1397116793,s.length]);for(let c=0;c<s.length;c++)i.updateIntArray([3962308117,c]),V(r.getPoint(a,c),i,t),i.updateIntArray([2716288009]);i.updateIntArray([2278822459])}return i.updateIntArray([2568784753]),void V(r.spatialReference.wkid,i,t)}if(r instanceof me){i.updateIntArray([588535921,r.points.length]);for(let a=0;a<r.points.length;a++){let s=r.getPoint(a);i.updateIntArray([a]),V(s,i,t)}return i.updateIntArray([1700171621]),void V(r.spatialReference.wkid,i,t)}if(r instanceof _e)return i.updateIntArray([3483648373]),i.updateIntArray([0]),i.updateFloatArray([r.xmax]),i.updateIntArray([1]),i.updateFloatArray([r.xmin]),i.updateIntArray([2]),i.updateFloatArray([r.ymax]),i.updateIntArray([3]),i.updateFloatArray([r.ymin]),r.hasZ&&(i.updateIntArray([4]),i.updateFloatArray([r.zmax]),i.updateIntArray([5]),i.updateFloatArray([r.zmin])),r.hasM&&(i.updateIntArray([6]),i.updateFloatArray([r.mmax]),i.updateIntArray([7]),i.updateFloatArray([r.mmin])),i.updateIntArray([3622027469]),void V(r.spatialReference.wkid,i,t);if(r instanceof An)return i.updateIntArray([14]),r.wkid!==void 0&&r.wkid!==null&&i.updateIntArray([r.wkid]),r.wkt&&i.updateWithString(r.wkt),void(r.wkt2&&i.updateWithString(r.wkt2));throw pe(r)?new d(t.context,f.UnsupportedHashType,t.node):Rn(r)?new d(t.context,f.UnsupportedHashType,t.node):kn(r)?new d(t.context,f.UnsupportedHashType,t.node):r===F?new d(t.context,f.UnsupportedHashType,t.node):new d(t.context,f.UnsupportedHashType,t.node)}if(i.updateUint8Array([223]),t.map.has(r)){let a=t.map.get(r);i.updateIntArray([61237541^a])}else{t.map.set(r,t.currentLength++);for(let a of r.keys())i.updateIntArray([a.length]),i.updateWithString(a),i.updateUint8Array([251]),V(r.field(a),i,t),i.updateUint8Array([239]);t.map.delete(r),t.currentLength--}i.updateUint8Array([73])}}else i.updateUint8Array([0,139])}function Fa(r,i){r.portal=function(t,a){return i(t,a,(s,c,e)=>(p(e,1,1,t,a),new We(v(e[0]))))},r.typeof=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=Ze(e[0]);if(n==="Unrecognized Type")throw new d(t,f.UnrecognizedType,a);return n})},r.trim=function(t,a){return i(t,a,(s,c,e)=>(p(e,1,1,t,a),v(e[0]).trim()))},r.tohex=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=g(e[0]);return isNaN(n)?n:n.toString(16)})},r.upper=function(t,a){return i(t,a,(s,c,e)=>(p(e,1,1,t,a),v(e[0]).toUpperCase()))},r.proper=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,2,t,a);let n=1;e.length===2&&v(e[1]).toLowerCase()==="firstword"&&(n=2);let o=/\s/,l=v(e[0]),m="",u=!0;for(let h=0;h<l.length;h++){let w=l[h];o.test(w)?n===1&&(u=!0):w.toUpperCase()!==w.toLowerCase()&&(u?(w=w.toUpperCase(),u=!1):w=w.toLowerCase()),m+=w}return m})},r.lower=function(t,a){return i(t,a,(s,c,e)=>(p(e,1,1,t,a),v(e[0]).toLowerCase()))},r.guid=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,0,1,t,a),e.length>0)switch(v(e[0]).toLowerCase()){case"digits":return we().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return we();case"digits-hyphen-braces":return"{"+we()+"}";case"digits-hyphen-parentheses":return"("+we()+")"}return"{"+we()+"}"})},r.standardizeguid=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,2,t,a);let n=v(e[0]);if(n===""||n===null)return"";let o=/^(\{|\()?(?<partA>[0-9a-z]{8})(-?)(?<partB>[0-9a-z]{4})(-?)(?<partC>[0-9a-z]{4})(-?)(?<partD>[0-9a-z]{4})(-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(n);if(!o)return"";let l=o.groups;switch(n=l.partA+"-"+l.partB+"-"+l.partC+"-"+l.partD+"-"+l.partE,v(e[1]).toLowerCase()){case"digits":return n.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return n;case"digits-hyphen-braces":return"{"+n+"}";case"digits-hyphen-parentheses":return"("+n+")"}return"{"+n+"}"})},r.console=function(t,a){return i(t,a,(s,c,e)=>(e.length===0||(e.length===1?t.console(v(e[0])):t.console(v(e))),F))},r.mid=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,3,t,a);let n=g(e[1]);if(isNaN(n))return"";if(n=Math.max(0,n),e.length===2)return v(e[0]).slice(n);let o=g(e[2]);return isNaN(o)?"":(o<0&&(o=0),v(e[0]).slice(n,n+o))})},r.find=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,3,t,a);let n=0;if(e.length>2){if(n=g(M(e[2],0)),isNaN(n))return-1;n<0&&(n=0)}return v(e[1]).indexOf(v(e[0]),n)})},r.left=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,2,t,a);let n=g(e[1]);return isNaN(n)?"":(n<0&&(n=0),v(e[0]).slice(0,n))})},r.right=function(t,a){return i(t,a,(s,c,e)=>{p(e,2,2,t,a);let n=g(e[1]);return isNaN(n)||n<=0?"":v(e[0]).slice(-n)})},r.split=function(t,a){return i(t,a,(s,c,e)=>{let n;p(e,2,4,t,a);let o=g(M(e[2],-1)),l=ke(M(e[3],!1));if(o===-1||o===null||l===!0?n=v(e[0]).split(v(e[1])):(isNaN(o)&&(o=-1),o<-1&&(o=-1),n=v(e[0]).split(v(e[1]),o)),l===!1)return n;let m=[];for(let u=0;u<n.length&&!(o!==-1&&m.length>=o);u++)n[u]!==""&&n[u]!==void 0&&m.push(n[u]);return m})},r.text=function(t,a){return i(t,a,(s,c,e)=>(p(e,1,2,t,a),Re(e[0],e[1])))},r.concatenate=function(t,a){return i(t,a,(s,c,e)=>{let n=[];if(e.length<1)return"";if(_(e[0])){let o=M(e[2],"");for(let l=0;l<e[0].length;l++)n[l]=Re(e[0][l],o);return e.length>1?n.join(e[1]):n.join("")}if(P(e[0])){let o=M(e[2],"");for(let l=0;l<e[0].length();l++)n[l]=Re(e[0].get(l),o);return e.length>1?n.join(e[1]):n.join("")}for(let o=0;o<e.length;o++)n[o]=Re(e[o]);return n.join("")})},r.reverse=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),_(e[0])){let n=e[0].slice();return n.reverse(),n}if(P(e[0])){let n=e[0].toArray().slice();return n.reverse(),n}throw new d(t,f.InvalidParameter,a)})},r.replace=function(t,a){return i(t,a,(s,c,e)=>{p(e,3,4,t,a);let n=v(e[0]),o=v(e[1]),l=v(e[2]);return e.length!==4||ke(e[3])?De(n,o,l):n.replace(o,l)})},r.urlencode=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),e[0]===null)return"";if(e[0]instanceof N){let n="";for(let o of e[0].keys()){let l=e[0].field(o);n!==""&&(n+="&"),n+=l===null?encodeURIComponent(o)+"=":encodeURIComponent(o)+"="+encodeURIComponent(l)}return n}return encodeURIComponent(v(e[0]))})},r.hash=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,t,a);let n=new $e(0);return V(e[0],n,{context:t,node:a,map:new Map,currentLength:0}),n.digest()})},r.convertdirection=function(t,a){return i(t,a,(s,c,e)=>(p(e,3,3,t,a),tt(e[0],e[1],e[2])))},r.fromjson=function(t,a){return i(t,a,(s,c,e)=>{if(p(e,1,1,t,a),E(e[0])===!1)throw new d(t,f.InvalidParameter,a);return N.convertJsonToArcade(JSON.parse(v(e[0])),I(t))})},r.tocharcode=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,2,t,a);let n=g(M(e[1],0)),o=v(e[0]);if(o.length===0&&e.length===1)return null;if(o.length<=n||n<0)throw new d(t,f.OutOfBounds,a);return o.charCodeAt(n)})},r.tocodepoint=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,2,t,a);let n=g(M(e[1],0)),o=v(e[0]);if(o.length===0&&e.length===1)return null;if(o.length<=n||n<0)throw new d(t,f.OutOfBounds,a);return o.codePointAt(n)})},r.fromcharcode=function(t,a){return i(t,a,(s,c,e)=>{if(e.length<1)throw new d(t,f.WrongNumberOfParameters,a);let n=e.map(o=>Math.trunc(g(o))).filter(o=>o>=0&&o<=65535);return n.length===0?null:String.fromCharCode.apply(null,n)})},r.fromcodepoint=function(t,a){return i(t,a,(s,c,e)=>{if(e.length<1)throw new d(t,f.WrongNumberOfParameters,a);let n;try{n=e.map(o=>Math.trunc(g(o))).filter(o=>o<=1114111&&o>>>0===o)}catch{return null}return n.length===0?null:String.fromCodePoint.apply(null,n)})},r.getuser=function(t,a){return i(t,a,(s,c,e)=>{p(e,0,2,t,a);let n=M(e[1],"");if(n=n===!0||n===!1?"":v(n),n!==null&&n!=="")return null;if(e.length===0||e[0]instanceof We){let o=null;if(o=t.services?.portal?t.services.portal:qn.getDefault(),e.length>0&&!Mt(e[0].field("url"),o)||!o)return null;if(n===""){let l=Tt(o);if(l){let m=JSON.parse(JSON.stringify(l));for(let u of["lastLogin","created","modified"])m[u]!==void 0&&m[u]!==null&&(m[u]=new Date(m[u]));return N.convertObjectToArcadeDictionary(m,I(t))}}return null}throw new d(t,f.InvalidParameter,a)})},r.getenvironment=function(t,a){return i(t,a,(s,c,e)=>(p(e,0,0,t,a),N.convertObjectToArcadeDictionary(Ln(I(t),t.spatialReference),I(t),!0)))},r.standardizefilename=function(t,a){return i(t,a,(s,c,e)=>{p(e,1,1,s,c);let[n]=e;if(n==null)return"";if(!E(n))throw new d(s,f.InvalidParameter,c);return n.replaceAll(/[<>"?*]/g,"_").replaceAll(/[/\\|]/g,"-").replaceAll(":",", ")})}}export{ee as a,Hn as b,Wt as c,an as d,Jn as e,Xt as f,ut as g,ct as h,Kt as i,$t as j,Yt as k,Wn as l,er as m,ur as n,xr as o,kr as p,Br as q,ea as r,oa as s,Fa as t};
