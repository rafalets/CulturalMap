import{a as x}from"./chunk-FHBFWDFD.js";import{a as w}from"./chunk-5X2QFKFJ.js";import{j as s}from"./chunk-IPGHBSHO.js";import{a as v}from"./chunk-DCKTHYU4.js";import{b as y}from"./chunk-VOFKUGRY.js";import{g as b}from"./chunk-UAKHZRKN.js";import{e as h}from"./chunk-HAHX77IL.js";import{b as g}from"./chunk-5TW726OD.js";import{c as p}from"./chunk-WMHJC7XF.js";import{h as d}from"./chunk-47GHT6OF.js";import{a as f,b as m,c,f as u}from"./chunk-VTHXE323.js";function D(n,o){var i=n,{level:e,class:a}=i,t=c(i,["level","class"]);let r=F(e);return b(`h${r}`,m(f({},t),{"aria-level":String(r),class:h(x.heading,a),role:"heading"}),o)}function F(e){return y(Math.ceil(e),1,6)}function C(e,a=1){return F(e+a)}function V(e){if(!e.colorStops)return[];let a=[...e.colorStops].filter(o=>o.color?.a>0),t=a.length-1;if(a[0]){let o=a[t];o&&o.ratio!==1&&(a.push(new v({ratio:1,color:o.color})),t++)}return a.map((o,n)=>{let i="";return n===0?i=e.legendOptions?.minLabel||"low":n===t&&(i=e.legendOptions?.maxLabel||"high"),{color:o.color,label:i,ratio:o.ratio}}).reverse()}var ae=g("short-date");function l(e,a,t){return u(this,null,function*(){p(e,a,()=>[]).push(...t)})}function oe(e){return u(this,null,function*(){let a=new Map;if(!e)return a;if("visualVariables"in e&&e.visualVariables){for(let t of e.visualVariables)if(E(t)){let o=((yield w(t))??[]).map(n=>n.color);yield l(a,t.field||t.valueExpression,o)}}if(e.type==="heatmap"){let t=V(e).map(o=>o.color);yield l(a,e.field||e.valueExpression,t)}else if(e.type==="pie-chart"){for(let t of e.attributes)yield l(a,t.field||t.valueExpression,[t.color]);yield l(a,"default",[e?.othersCategory?.color,s(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(let t of e.attributes)yield l(a,t.field||t.valueExpression,[t.color]);yield l(a,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(e.authoringInfo?.type==="predominance")for(let t of e.uniqueValueInfos??[])yield l(a,t.value.toString(),[s(t.symbol,null)]);else{let t=(e.uniqueValueInfos??[]).map(S=>s(S.symbol,null)),{field:o,field2:n,field3:i,valueExpression:r}=e;(o||r)&&(yield l(a,o||r,t)),n&&(yield l(a,n,t)),i&&(yield l(a,i,t))}else if(e.type==="class-breaks"){let t=e.classBreakInfos.map(i=>s(i.symbol,null)),{field:o,valueExpression:n}=e;yield l(a,o??n,t)}else e.type==="simple"&&(yield l(a,"default",[s(e.symbol,null)]));return"defaultSymbol"in e&&e.defaultSymbol&&(yield l(a,"default",[s(e.defaultSymbol,null)])),a.forEach((t,o)=>{let n=d(t.filter(Boolean),(i,r)=>JSON.stringify(i)===JSON.stringify(r));a.set(o,n)}),a})}function E(e){return e.type==="color"}export{D as a,C as b,V as c,oe as d};
