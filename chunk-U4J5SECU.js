import{f as A}from"./chunk-7EG726PT.js";import{k as v,r as E,t as G}from"./chunk-HHDFN2GK.js";import{t as D}from"./chunk-47GHT6OF.js";import{a as C,f as P}from"./chunk-VTHXE323.js";var Y=/^https:\/\/([a-z\d-]+)(\.maps([^.]*))?\.arcgis\.com/i,Z={devext:{customBaseUrl:"mapsdevext.arcgis.com",portalHostname:"devext.arcgis.com"},qaext:{customBaseUrl:"mapsqa.arcgis.com",portalHostname:"qaext.arcgis.com"},www:{customBaseUrl:"maps.arcgis.com",portalHostname:"www.arcgis.com"}};function R(e){let n=e?.match(Y);if(!n)return null;let[,r,t,s]=n;if(!r)return null;let o=null,a=null,i=null,{devext:u,qaext:c,www:d}=Z;if(t)if(o=r,s)switch(s.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:i}=u);break;case"qa":({customBaseUrl:a,portalHostname:i}=c);break;default:return null}else({customBaseUrl:a,portalHostname:i}=d);else switch(r.toLowerCase()){case"devext":({customBaseUrl:a,portalHostname:i}=u);break;case"qaext":({customBaseUrl:a,portalHostname:i}=c);break;case"www":({customBaseUrl:a,portalHostname:i}=d);break;default:return null}return{customBaseUrl:a,isPortal:!1,portalHostname:i,urlKey:o}}function Ae(e){return/\/(sharing|usrsvcs)\/(appservices|servers)\//i.test(e)}function Re(e){let n=/^https?:\/\/(?:cdn|[a-z\d-]+\.maps)\.arcgis\.com/i,r=/^https?:\/\/(?:cdndev|[a-z\d-]+\.mapsdevext)\.arcgis\.com/i,t=/^https?:\/\/(?:cdnqa|[a-z\d-]+\.mapsqa)\.arcgis\.com/i;return n.test(e)?e=e.replace(n,"https://www.arcgis.com"):r.test(e)?e=e.replace(r,"https://devext.arcgis.com"):t.test(e)&&(e=e.replace(t,"https://qaext.arcgis.com")),e}function Q(e){let n=atob(e),r=new Uint8Array(n.length);for(let t=0;t<n.length;t++)r[t]=n.charCodeAt(t);return r.buffer}function F(e){let n=new Uint8Array(e),r="";for(let t=0;t<n.length;t++)r+=String.fromCharCode(n[t]);return btoa(r)}var ee=()=>E.getLogger("esri.core.urlUtils"),h=v.request,W="esri/config: esriConfig.request.proxyUrl is not set.",J=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,K=/^\s*http:/i,ne=/^\s*https:/i,re=/^\s*file:/i,te=/:\d+$/,se=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,oe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),ae=new RegExp("^((([^[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^[:]*))(:([0-9]+))?$"),f=class{constructor(n=""){this.uri=n,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(oe);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(ae),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}},w={},ie=new f(v.applicationUrl),l=ie,le=ue(),I=le,De=()=>l,Ee=()=>I;function ue(){let e=l.path,n=e.slice(0,e.lastIndexOf("/")+1);return`${`${l.scheme}://${l.host}${l.port!=null?`:${l.port}`:""}`}${n}`}function m(e){if(!e)return null;let n={path:null,query:null},r=new f(e),t=e.indexOf("?");return r.query===null?n.path=e:(n.path=e.slice(0,t),n.query=N(r.query)),r.fragment&&(n.hash=r.fragment,r.query===null&&(n.path=n.path.slice(0,n.path.length-(r.fragment.length+1)))),n}function N(e){let n=e.split("&"),r={};for(let t of n){if(!t)continue;let s=t.indexOf("="),o,a;s<0?(o=decodeURIComponent(t),a=""):(o=decodeURIComponent(t.slice(0,s)),a=decodeURIComponent(t.slice(s+1)));let i=r[o];typeof i=="string"&&(i=r[o]=[i]),Array.isArray(i)?i.push(a):r[o]=a}return r}function H(e,n){return e?n&&typeof n=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(n(r,e[r]))).join("&"):Object.keys(e).map(r=>{let t=e[r];if(t==null)return"";let s=encodeURIComponent(r)+"=",o=n?.[r];return o?s+encodeURIComponent(o(t)):Array.isArray(t)?t.map(a=>A.isSerializable(a)?s+encodeURIComponent(JSON.stringify(a)):s+encodeURIComponent(a)).join("&"):A.isSerializable(t)?s+encodeURIComponent(JSON.stringify(t)):s+encodeURIComponent(t)}).filter(r=>r).join("&"):""}function ce(e=!1){let n,r=h.proxyUrl;if(typeof e=="string"){n=xe(e);let t=j(e);t&&(r=t.proxyUrl)}else n=!!e;if(!r)throw ee().warn(W),new G("urlUtils:proxy-not-set",W);return n&&B()&&(r=V(r)),m(r)}function Ge(e,n=!1){let r=j(e),t,s;if(r){let o=L(r.proxyUrl);t=o.path,s=o.query?N(o.query):null}else if(n){let o=ce(e);t=o.path,s=o.query}if(t){let o=m(e);e=t+"?"+o.path;let a=H(C(C({},s),o.query));a&&(e=`${e}?${a}`)}return e}var y={path:"",query:""};function L(e){let n=e.indexOf("?");return n!==-1?(y.path=e.slice(0,n),y.query=e.slice(n+1)):(y.path=e,y.query=null),y}function M(e){return e=(e=O(e=Oe(e=L(e).path),!0)).toLowerCase()}function Qe(e){let n={proxyUrl:e.proxyUrl,urlPrefix:M(e.urlPrefix)},r=h.proxyRules,t=n.urlPrefix,s=r.length;for(let o=0;o<r.length;o++){let a=r[o].urlPrefix;if(t.indexOf(a)===0){if(t.length===a.length)return-1;s=o;break}a.indexOf(t)===0&&(s=o+1)}return r.splice(s,0,n),s}function j(e){let n=h.proxyRules,r=M(e);for(let t=0;t<n.length;t++)if(r.indexOf(n[t].urlPrefix)===0)return n[t]}function Fe(e,n){if(!e||!n)return!1;e=U(e),n=U(n);let r=R(e),t=R(n);return r!=null&&t!=null?r.portalHostname===t.portalHostname:r==null&&t==null&&S(e,n,!0)}function We(e,n){return e=U(e),n=U(n),O(e)===O(n)}function U(e){let n=(e=$(e)).indexOf("/sharing");return n>0?e.slice(0,n):e.replace(/\/+$/,"")}function Je(e,n=h.interceptors){let r=t=>t==null||t instanceof RegExp&&t.test(e)||typeof t=="string"&&e.startsWith(t);if(n){for(let t of n)if(Array.isArray(t.urls)){if(t.urls.some(r))return t}else if(r(t.urls))return t}return null}function S(e,n,r=!1){if(!e||!n)return!1;let t=T(e),s=T(n);return!(!r&&t.scheme!==s.scheme)&&t.host!=null&&s.host!=null&&t.host.toLowerCase()===s.host.toLowerCase()&&t.port===s.port}function Ke(e){if(typeof e=="string"){if(!x(e))return!0;e=T(e)}if(S(e,l))return!0;let n=h.trustedServers||[];for(let r=0;r<n.length;r++){let t=fe(n[r]);for(let s=0;s<t.length;s++)if(S(e,t[s]))return!0}return!1}function fe(e){return w[e]||(z(e)||p(e)?w[e]=[new f(k(e))]:w[e]=[new f(`http://${e}`),new f(`https://${e}`)]),w[e]}function k(e,n=I,r){return p(e)?r?.preserveProtocolRelative?e:l.scheme==="http"&&l.authority===he(e).slice(2)?`http:${e}`:`https:${e}`:z(e)?e:pe(e[0]==="/"?be(n):n,e)}function Ne(e,n=I,r){if(e==null||!x(e))return e;let t=$(e),s=t.toLowerCase(),o=$(n).toLowerCase().replace(/\/+$/,""),a=r?$(r).toLowerCase().replace(/\/+$/,""):null;if(a&&o.indexOf(a)!==0)return e;let i=(g,X,q)=>(q=g.indexOf(X,q))===-1?g.length:q,u=i(s,"/",s.indexOf("//")+2),c=-1;for(;s.slice(0,u+1)===o.slice(0,u)+"/"&&(c=u+1,u!==s.length);)u=i(s,"/",u+1);if(c===-1||a&&c<a.length)return e;e=t.slice(c);let d=o.slice(c-1).replaceAll(/[^/]+/g,"").length;if(d>0)for(let g=0;g<d;g++)e=`../${e}`;else e=`./${e}`;return e}function $(e){return e=Pe(e=Ce(e=qe(e=k(e=e.trim()))))}function pe(...e){let n=e.filter(D);if(!n?.length)return;let r=[];if(x(n[0])){let s=n[0],o=s.indexOf("//");o!==-1&&(r.push(s.slice(0,o+1)),$e(n[0])&&(r[0]+="/"),n[0]=s.slice(o+2))}else n[0][0]==="/"&&r.push("");let t=n.reduce((s,o)=>o?s.concat(o.split("/")):s,[]);for(let s=0;s<t.length;s++){let o=t[s];o===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!o&&s===t.length-1||o&&(o!=="."||r.length===0))&&r.push(o)}return r.join("/")}function he(e,n=!1){if(e==null||me(e)||de(e))return null;let r=e.indexOf("://");if(r===-1&&p(e))r=2;else{if(r===-1)return null;r+=3}let t=e.indexOf("/",r);return t!==-1&&(e=e.slice(0,t)),n&&(e=O(e,!0)),e}function x(e){return p(e)||z(e)}function me(e){return e!=null&&e.slice(0,5)==="blob:"}function de(e){return e!=null&&e.slice(0,5)==="data:"}function ge(e){let n=b(e);return n?.isBase64?Q(n.data):null}function Me(e){return F(e).replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}var ye=/^data:(.*?)(;base64)?,(.*)$/;function b(e){let n=e.match(ye);if(!n)return null;let[,r,t,s]=n;return{mediaType:r,isBase64:!!t,data:s}}function Ve(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function _e(e){return P(this,null,function*(){return(yield fetch(e)).blob()})}function Xe(e){let n=ge(e);if(!n)return null;let r=b(e);return new Blob([n],{type:r.mediaType})}function p(e){return e!=null&&e[0]==="/"&&e[1]==="/"}function z(e){return e!=null&&J.test(e)}function xe(e){return e!=null&&ne.test(e)||l.scheme==="https"&&p(e)}function we(e){return e!=null&&K.test(e)||l.scheme==="http"&&p(e)}function $e(e){return e!=null&&re.test(e)}function V(e){return p(e)?`https:${e}`:e.replace(K,"https:")}function Ue(){return l.scheme==="http"}function B(){return l.scheme==="https"}function O(e,n=!1){return p(e)?e.slice(2):(e=e.replace(J,""),n&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function be(e){let n=e.indexOf("//"),r=e.indexOf("/",n+2);return r===-1?e:e.slice(0,r)}function Ye(e){let n=0;if(x(e)){let t=e.indexOf("//");t!==-1&&(n=t+2)}let r=e.lastIndexOf("/");return r<n?e:e.slice(0,r+1)}function Ze(e,n){if(!e)return"";let r=m(e).path.replace(/\/+$/,""),t=r.slice(r.lastIndexOf("/")+1);if(!n?.length)return t;let s=new RegExp(`\\.(${n.join("|")})$`,"i");return t.replace(s,"")}function Oe(e){return e.endsWith("/")?e:`${e}/`}function en(e){return e.replace(/\/+$/,"")}function qe(e){if(/^https?:\/\//i.test(e)){let n=L(e);e=(e=n.path.replaceAll(/\/{2,}/g,"/")).replace("/","//"),n.query&&(e+=`?${n.query}`)}return e}function Ce(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Pe(e){let n=h.httpsDomains;if(!we(e))return e;let r=e.indexOf("/",7),t;if(t=r===-1?e:e.slice(0,r),t=t.toLowerCase().slice(7),te.test(t)){if(!t.endsWith(":80"))return e;t=t.slice(0,-3),e=e.replace(":80","")}return Ue()&&t===l.authority&&!se.test(e)||(B()&&t===l.authority||n&&n.some(s=>t===s||t.endsWith(`.${s}`))||B()&&!j(e))&&(e=V(e)),e}function nn(e,n,r){if(!(n&&r&&e&&x(e)))return e;let t=e.indexOf("//"),s=e.indexOf("/",t+2),o=e.indexOf(":",t+2),a=Math.min(s<0?e.length:s,o<0?e.length:o);return e.slice(t+2,a).toLowerCase()!==n.toLowerCase()?e:`${e.slice(0,t+2)}${r}${e.slice(a)}`}function T(e){return typeof e=="string"?new f(k(e)):(e.scheme||(e.scheme=l.scheme),e)}function rn(e){return ve.test(e)}function tn(e,n){let r=m(e),t=Object.keys(r.query||{});return t.length>0&&n&&n.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${t.join(", ")}.`),r.path}function sn(e,n,r){let t=m(e),s=t.query||{};return s[n]=String(r),`${t.path}?${H(s)}`}function on(e,n){if(!n)return e;let r=m(e),t=r.query||{};for(let[o,a]of Object.entries(n))a!=null&&(t[o]=a);let s=H(t);return s?`${r.path}?${s}`:r.path}function an(e){if(e==null)return null;let n=e.match(_);return n?n[2]:null}function ln(e){if(e==null)return null;let n=e.match(_);return n?{path:n[1],extension:n[2]}:{path:e,extension:null}}function un(e){return P(this,null,function*(){return typeof e=="string"?b(e)??{data:e}:new Promise((n,r)=>{let t=new FileReader;t.readAsDataURL(e),t.onload=()=>n(b(t.result)),t.onerror=s=>r(s)})})}var _=/([^.]*)\.([^/]*)$/,ve=/(^data:image\/svg|\.svg$)/i;export{R as a,Ae as b,Re as c,Q as d,f as e,De as f,Ee as g,m as h,N as i,H as j,ce as k,Ge as l,Qe as m,j as n,Fe as o,We as p,Je as q,S as r,Ke as s,k as t,Ne as u,$ as v,pe as w,he as x,x as y,me as z,de as A,ge as B,Me as C,b as D,Ve as E,_e as F,Xe as G,p as H,xe as I,V as J,Ye as K,Ze as L,Oe as M,en as N,nn as O,rn as P,tn as Q,sn as R,on as S,an as T,ln as U,un as V};
