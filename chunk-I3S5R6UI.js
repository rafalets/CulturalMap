import{F as L}from"./chunk-E57FTRWF.js";import{a as f,b as l,c as p,f as s}from"./chunk-VTHXE323.js";function y(e,t){return s(this,null,function*(){let{data:r}=yield L(e,{responseType:"json",query:l(f({f:"json"},t?.customParameters),{token:t?.apiKey})});return r})}var m=new Set(["Catalog Layer","Feature Layer","Oriented Imagery Layer"]);function T(e,t){return s(this,null,function*(){let u=t||{},{loadContext:r}=u,a=p(u,["loadContext"]),n=r?yield r.fetchServiceMetadata(e,a):yield y(e,a);h(n),S(n);let o={serviceJSON:n};if((n.currentVersion??0)<10.5)return o;let i=`${e}/layers`,c=r?yield r.fetchServiceMetadata(i,a):yield y(i,a);return h(c),S(c),o.layersJSON={layers:c.layers,tables:c.tables},o})}function b(e){let{type:t}=e;return!!t&&m.has(t)}function d(e){return e.type==="Table"}function S(e){e.layers=e.layers?.filter(b),e.tables=e.tables?.filter(d)}function g(e){e.type||="Feature Layer"}function w(e){e.type||="Table"}function h(e){e.layers?.forEach(g),e.tables?.forEach(w)}function C(e){switch(e){case"Feature Layer":case"Table":return"FeatureLayer";case"Oriented Imagery Layer":return"OrientedImageryLayer";case"Catalog Layer":return"CatalogLayer"}return"FeatureLayer"}export{y as a,T as b,C as c};
