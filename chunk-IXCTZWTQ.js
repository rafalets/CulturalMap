import{b as c}from"./chunk-6PN3I333.js";import{a as x,c as d}from"./chunk-ZTJLFKGG.js";import{c as i}from"./chunk-5TW726OD.js";import{a as O}from"./chunk-VDKRSX77.js";import{F as y}from"./chunk-E57FTRWF.js";import{h as L,l as b,r as $,t as f}from"./chunk-HHDFN2GK.js";import{f as p}from"./chunk-VTHXE323.js";var B=()=>$.getLogger("esri.intl.substitute");function T(e,t,r={}){let{format:n={}}=r;return b(e,o=>A(o,t,n))}function A(e,t,r){let n,o,a=e.indexOf(":");if(a===-1?n=e.trim():(n=e.slice(0,a).trim(),o=e.slice(a+1).trim()),!n)return"";let s=L(n,t);if(s==null)return"";let u=(o?r?.[o]:null)??r?.[n];return u?J(s,u):o?S(s,o):w(s)}function J(e,t){switch(t.type){case"date":return i(e,t.intlOptions);case"number":return c(e,t.intlOptions);default:return B().warn("missing format descriptor for key {key}"),w(e)}}function S(e,t){switch(t.toLowerCase()){case"dateformat":return i(e);case"numberformat":return c(e);default:return B().warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?i(e):/^numberformat/i.test(t)?c(e):w(e)}}function w(e){switch(typeof e){case"string":return e;case"number":return c(e);case"boolean":return""+e;default:return e instanceof Date?i(e):""}}function k(e,t,r,n){return p(this,null,function*(){let o=t.exec(r);if(!o)throw new f("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);let a=o[1]?`${o[1]}/`:"",s=o[2],u=d(n),m=`${a}${s}.json`,g=u?`${a}${s}_${u}.json`:m,l;try{l=yield N(e(g))}catch(D){if(g===m)throw new f("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:D});try{l=yield N(e(m))}catch(M){throw new f("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:M})}}return l})}function N(e){return p(this,null,function*(){if(R.fetchBundleAsset!=null)return R.fetchBundleAsset(e);let t=yield y(e,{responseType:"text"});return JSON.parse(t.data)})}var h=class{constructor({base:t="",pattern:r,location:n=new URL(window.location.href)}){let o;o=typeof n=="string"?a=>new URL(a,new URL(n,window.location.href)).href:n instanceof URL?a=>new URL(a,n).href:n,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=o,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)\\/)?(.*)$`)}fetchMessageBundle(t,r){return k(this.getAssetUrl,this.matcher,t,r)}};function U(e){return new h(e)}var R={};x(U({pattern:"esri/",location:O}));export{T as a};
