import{a as x,d as L,e as N,f as S,i as I,j as $,l as F}from"./chunk-F6IFFWOX.js";import{a as y,c as z}from"./chunk-KUEZUX3G.js";import{a as k}from"./chunk-YDGEZDOC.js";import{p as D}from"./chunk-GL53GSPS.js";import{d as P}from"./chunk-LNVVFNTC.js";var v,p;function q({templatePart:i,edits:h,relationships:u,shape:d,distance:g,isProportional:A,offsetDistance:s,vertexBeforeOffset:B,vertexPlacement:a,mode:V}){let t=B||s===0?d:G(d,s);if(t===null||!P(t))return;let c=z(t);s=B?s:0;let r=0,l=null,o=0;for(let n=0;n<t.paths.length;n++){if(h.length>D&&V==="digitizing")return;let f=t.paths[n].length,O=n===t.paths.length-1;for(let e=0;e<f;e++){if(h.length>D&&V==="digitizing")return;if(e>0&&g!==0&&(r+=t.hasZ?N(t.paths[n][e-1],t.paths[n][e],c):L(t.paths[n][e-1],t.paths[n][e])),(e!==0||a!==v.NotBeginning)&&!(e===f-1&&a===v.NotEnd&&O||(e===0||e===f-1&&O)&&a===v.Interior||e===0&&g<0&&A||e===f-1&&g>0&&A)){if(g!==0){let E=1;if(A){let Z=g<0?e-1:e+1;if(Z>=f||Z<0)continue;E=t.hasZ?N(t.paths[n][e],t.paths[n][Z],c):L(t.paths[n][e],t.paths[n][Z])}let m=r+E*g;l=t.hasZ?$(t,m,s,c):I(t,m,0)}else l=F(t,n,e),s!==0&&(l=S(l,e===f-1?[t.paths[n][e-1],t.paths[n][e]]:[t.paths[n][e],t.paths[n][e+1]],s));l&&y({templatePart:i,shape:l,edits:h,relationships:u,mode:V},`V${(o+e).toString()}`)}}o+=f}}function G(i,h){return k(i,h,{unit:"meters",joins:"miter",miterLimit:2})}function C(i){let h=0;for(let u of i.paths)h+=u.length;return h}function w({templatePart:i,edits:h,relationships:u,shape:d,distance:g,isProportional:A,offsetDistance:s,vertexBeforeOffset:B,vertexPlacement:a,mode:V}){let t=B||s===0?d:G(d,s);if(t===null||!P(t))return;let c=z(t);s=B?s:0;let r=null,l="";if(g!==0){let o=a===p.AtBeginning?0:t.paths.length-1,n=a===p.AtBeginning?0:t.paths[t.paths.length-1].length-1,f=a===p.AtBeginning?0:x(t),O=a===p.AtBeginning?t.paths[0].length:t.paths[t.paths.length-1].length,e=1;if(A){let m=g<0?n-1:n+1;if(m>=O||m<0)return;e=t.hasZ?N(t.paths[o][n],t.paths[o][m],c):L(t.paths[o][n],t.paths[o][m])}let E=f+e*g;r=t.hasZ?$(t,E,s,c):I(t,E,s),l=a===p.AtBeginning?"V0":`V${(C(t)-1).toString()}`}else{if(r=a===p.AtBeginning?F(t,0,0):F(t,t.paths.length-1,t.paths[t.paths.length-1].length-1),s!==0)if(a===p.AtBeginning)r=S(r,[t.paths[0][0],t.paths[0][1]],s);else{let o=t.paths[t.paths.length-1];r=S(r,[o[o.length-2],o[o.length-1]],s)}l=a===p.AtBeginning?"V0":`V${(C(t)-1).toString()}`}r&&y({templatePart:i,shape:r,edits:h,relationships:u,mode:V},l)}(function(i){i[i.All=0]="All",i[i.NotBeginning=1]="NotBeginning",i[i.NotEnd=2]="NotEnd",i[i.Interior=3]="Interior"})(v||(v={})),function(i){i[i.AtBeginning=4]="AtBeginning",i[i.AtEnd=5]="AtEnd"}(p||(p={}));export{v as a,p as b,q as c,G as d,w as e};
