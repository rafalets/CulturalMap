import{a as x,b as w}from"./chunk-VOB6IBIW.js";import{a as V,b as A}from"./chunk-VTHXE323.js";function j(t){return typeof t=="function"}function _(t,e,r,o){return j(t)?t(e,r,o):t}function tt(t){return[t.r,t.g,t.b,t.a]}var H=` /-,
`;function z(t){let e=t.length;for(;e--;)if(!H.includes(t.charAt(e)))return!1;return!0}function et(t,e){let r=[],o=0,a=-1;do if(a=t.indexOf("[",o),a>=o){if(a>o){let n=t.slice(o,a);r.push([n,null,z(n)])}if(o=a+1,a=t.indexOf("]",o),a>=o){if(a>o){let n=e[t.slice(o,a)];n&&r.push([null,n,!1])}o=a+1}}while(a!==-1);if(o<t.length){let n=t.slice(o);r.push([n,null,z(n)])}return r}function rt(t,e,r,o){let a="",n=null;for(let M of e){let[s,u,f]=M;if(s)f?n=s:(n&&(a+=n,n=null),a+=s);else{let y=u;r!=null&&(y=Q(u,r));let i=t.attributes[y];i&&(n&&(a+=n,n=null),a+=i)}}return W(a,o)}function W(t,e){switch(typeof t!="string"&&(t=String(t)),e){case"LowerCase":return t.toLowerCase();case"Allcaps":return t.toUpperCase();default:return t}}function nt(t,e,r,o,a,n,M=!0){let s=e/a,u=r/n,f=Math.ceil(s/2),y=Math.ceil(u/2);for(let i=0;i<n;i++)for(let l=0;l<a;l++){let I=4*(l+(M?n-i-1:i)*a),c=0,p=0,b=0,d=0,k=0,S=0,g=0,T=(i+.5)*u;for(let h=Math.floor(i*u);h<(i+1)*u;h++){let F=Math.abs(T-(h+.5))/y,q=(l+.5)*s,B=F*F;for(let P=Math.floor(l*s);P<(l+1)*s;P++){let m=Math.abs(q-(P+.5))/f,C=Math.sqrt(B+m*m);C>=-1&&C<=1&&(c=2*C*C*C-3*C*C+1,c>0&&(m=4*(P+h*e),g+=c*t[m+3],b+=c,t[m+3]<255&&(c=c*t[m+3]/250),d+=c*t[m],k+=c*t[m+1],S+=c*t[m+2],p+=c))}}o[I]=d/p,o[I+1]=k/p,o[I+2]=S/p,o[I+3]=g/b}}function J(t){return t?[t[0],t[1],t[2],t[3]/255]:[0,0,0,0]}function ot(t){return t.data?.symbol??null}function at(t){return t.type==="CIMVectorMarker"||t.type==="CIMPictureMarker"||t.type==="CIMBarChartMarker"||t.type==="CIMCharacterMarker"||t.type==="CIMPieChartMarker"||t.type==="CIMStackedBarChartMarker"}function st(t){return t.type==="CIMGradientStroke"||t.type==="CIMPictureStroke"||t.type==="CIMSolidStroke"}function it(t){return t!=null&&(t.type==="CIMGradientFill"||t.type==="CIMHatchFill"||t.type==="CIMPictureFill"||t.type==="CIMSolidFill"||t.type==="CIMWaterFill")}function U(t){return t!=null&&(t.type==="CIMMarkerPlacementAlongLineRandomSize"||t.type==="CIMMarkerPlacementAlongLineSameSize"||t.type==="CIMMarkerPlacementAlongLineVariableSize"||t.type==="CIMMarkerPlacementAtExtremities"||t.type==="CIMMarkerPlacementAtMeasuredUnits"||t.type==="CIMMarkerPlacementAtRatioPositions"||t.type==="CIMMarkerPlacementOnLine"||t.type==="CIMMarkerPlacementOnVertices")}var lt=(t,e=0)=>t==null||isNaN(t)?e:t,ct=(t,e)=>t??e,ut=(t,e)=>t??e,ft=t=>t.tintColor?J(t.tintColor):[255,255,255,1],Mt=t=>{if(!t)return!1;for(let e of t)switch(e.type){case"CIMGeometricEffectBuffer":case"CIMGeometricEffectOffset":case"CIMGeometricEffectDonut":return!0}return!1};function mt(){return import("./chunk-FOYQ56X5.js")}function yt(t){if(!t)return"normal";switch(t.toLowerCase()){case"italic":return"italic";case"oblique":return"oblique";default:return"normal"}}function Ct(t){if(!t)return"normal";switch(t.toLowerCase()){case"bold":return"bold";case"bolder":return"bolder";case"lighter":return"lighter";default:return"normal"}}function It(t){let e="normal",r="normal";if(t){let o=t.toLowerCase();o.includes("italic")?e="italic":o.includes("oblique")&&(e="oblique"),o.includes("bold")?r="bold":o.includes("light")&&(r="lighter")}return{style:e,weight:r}}function pt(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}function N(t){if(!t)return null;switch(t.type){case"CIMPolygonSymbol":if(t.symbolLayers)for(let e of t.symbolLayers){let r=N(e);if(r!=null)return r}break;case"CIMTextSymbol":return N(t.symbol);case"CIMSolidFill":return t.color}return null}function G(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":{let e=t.symbolLayers;if(e)for(let r of e){let o=G(r);if(o!=null)return o}break}case"CIMTextSymbol":return G(t.symbol);case"CIMSolidStroke":return t.color}}function v(t){if(t)switch(t.type){case"CIMPolygonSymbol":case"CIMLineSymbol":if(t.symbolLayers)for(let e of t.symbolLayers){let r=v(e);if(r!==void 0)return r}break;case"CIMTextSymbol":return v(t.symbol);case"CIMSolidStroke":case"CIMGradientStroke":case"CIMPictureStroke":return t.width}}function ht(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":case"Justify":return"center"}}function bt(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function dt(t){return(t?Object.keys(t):[]).map(e=>({name:e,alias:e,type:typeof t[e]=="string"?"esriFieldTypeString":"esriFieldTypeDouble"}))}var gt=t=>t.includes("data:image/svg+xml");function kt(t){if(!t)return null;switch(t.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function L(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function St(t,e,r,o,a,n,M=!0){let{infos:s}=n,u=1,f=0,y=0,i=0,l=1;for(let{absoluteAnchorPoint:p,offsetX:b,offsetY:d,rotation:k,size:S,frameHeight:g,rotateClockWise:T,scaleSymbolsProportionally:h}of s)l=p?1:u,y=O(b,d,f,l,y),i=E(b,d,f,l,i),g&&(h||M)&&(u*=S/g),f=R(k,T,f);let I=O(o,a,f,l,y),c=E(o,a,f,l,i);return{size:t*u,rotation:R(e,r,f),offsetX:I,offsetY:c}}function X(t){if(t==null)return!1;if(Array.isArray(t))return t.every(e=>X(e));switch(typeof t){case"string":return!!t;case"number":return!isNaN(t)}}function Y(t,e){if(e==="color"||e==="outlinecolor"||e==="backgroundcolor"||e==="borderlinecolor"||e==="tintcolor")return[...x[e]];let r=w[t];if(!r)throw new Error(`InternalError: default value for type ${t}.`);return r[e]}function $(t){return t.split(" ").map(e=>Number(e))}function K(t){return typeof t=="string"?$(t):t}function Pt(t){return t?.dashTemplate&&(t.dashTemplate=K(t.dashTemplate)),t}function D(t){if(t==null)return"Normal";switch(t.type){case"CIMTextSymbol":return t.textCase??"Normal";case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=t.symbolLayers;if(!e)return"Normal";for(let r of e)if(r.type==="CIMVectorMarker")return D(r)}break;case"CIMVectorMarker":{let e=t.markerGraphics;if(!e)return"Normal";for(let r of e)if(r.symbol)return D(r.symbol)}}return"Normal"}function wt(t){if(t)switch(t.type){case"CIMTextSymbol":return t.height;case"CIMPointSymbol":{let e=0;if(t.symbolLayers){for(let r of t.symbolLayers)if(r)switch(r.type){case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":{let o=r.size??w.CIMVectorMarker.size;o>e&&(e=o);break}}}return e}case"CIMLineSymbol":case"CIMPolygonSymbol":{let e=0;if(t.symbolLayers){for(let r of t.symbolLayers)if(r)switch(r.type){case"CIMSolidStroke":case"CIMPictureStroke":case"CIMGradientStroke":{let o=r.width;o!=null&&o>e&&(e=o);break}case"CIMCharacterMarker":case"CIMPictureMarker":case"CIMVectorMarker":case"CIMObjectMarker3D":case"CIMglTFMarker3D":if(r.markerPlacement&&U(r.markerPlacement)){let o=r.size??w.CIMVectorMarker.size;o>e&&(e=o)}break;case"CIMPictureFill":{let o=r.height;o!=null&&o>e&&(e=o)}}}return e}}}function Q(t,e){if(e!==null){let r=e.get(t);return r?r.name:t}return t}function Tt(t){return t.map(e=>A(V({},e),{propertyName:L(e.propertyName)}))}function Lt(t){let e={};for(let r in t){let o=t[r];e[L(r)]=o}return e}function E(t,e,r,o,a){let n=r*Math.PI/180;if(n){let M=Math.cos(n);return(Math.sin(n)*t+M*e)*o+a}return e*o+a}function O(t,e,r,o,a){let n=r*Math.PI/180;return n?(Math.cos(n)*t-Math.sin(n)*e)*o+a:t*o+a}function R(t,e,r){return e?r-t:r+t}function Ft(t,e,r){let o=r==="Color"||r==="TintColor"||r==="ToColor",a=r==="Rotation"||r==="Angle"||r==="ToRotation",n=e[L(r)];if(n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:a&&(n*=Math.PI/180)),n==null&&(n=Y(e.type,r.toLowerCase()),n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]]:a&&(n*=Math.PI/180))),e.primitiveName!=null){let M=t[e.primitiveName];if(M!=null){let s=M[r];s==null||(typeof s=="string"||typeof s=="number"||Array.isArray(s)?(n=s,n!=null&&(o?n=[n[0]/255,n[1]/255,n[2]/255,n[3]/255]:a&&(n*=Math.PI/180))):(n={valueExpressionInfo:s,defaultValue:n},n!=null&&(o?n={type:"Process",op:"ArcadeColor",value:n}:a&&(n={type:"Process",op:"Divide",left:n,right:180/Math.PI}))))}}if(n==null)throw new Error(`Failed to derive a value or an expression for "${r}".`);return n}function Vt(t,e){return Math.max(Math.min((t??e)/100,1),0)}export{_ as a,tt as b,et as c,rt as d,nt as e,J as f,ot as g,at as h,st as i,it as j,U as k,lt as l,ct as m,ut as n,ft as o,Mt as p,mt as q,yt as r,Ct as s,It as t,pt as u,N as v,G as w,v as x,ht as y,bt as z,dt as A,gt as B,kt as C,L as D,St as E,X as F,Y as G,K as H,Pt as I,D as J,wt as K,Q as L,Tt as M,Lt as N,Ft as O,Vt as P};
