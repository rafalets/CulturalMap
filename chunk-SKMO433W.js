import{a as J}from"./chunk-2FO7ARYZ.js";import{a as H}from"./chunk-TCGGI7DC.js";import{a as B}from"./chunk-ALWV3RJ2.js";import{a as G}from"./chunk-7C6Z24SS.js";import{C as F,a as _,c as E,d as C,e as p,m as M,t as I,u as f,v as l}from"./chunk-5WKDXHVH.js";import{a as z}from"./chunk-PTZYZULI.js";import{a as c}from"./chunk-NHSDW26F.js";import{b as Q,i as D}from"./chunk-VOFKUGRY.js";import{a as X}from"./chunk-OVHPPCBL.js";function ut(t,r,e){let a=f(t,r)/f(t,t);return M(e,t,a)}function v(t,r){return f(t,r)/_(t)}function mt(t,r){let e=f(t,r)/(_(t)*_(r));return-D(e)}function It(t,r,e){I(x,t),I(k,r);let a=f(x,k),n=D(a),i=l(x,x,k);return f(i,e)<0?2*Math.PI-n:n}var x=c(),k=c();var h=class t{constructor(r){this._create=r,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&X(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){let r=2*this._itemsPtr;this._items.length>r&&(this._items.length=r),this._itemsPtr=0}static createVec2f64(){return new t(J)}static createVec3f64(){return new t(c)}static createVec4f64(){return new t(z)}static createMat3f64(){return new t(G)}static createMat4f64(){return new t(B)}static createQuatf64(){return new t(H)}get test(){}};var Pt=h.createVec2f64(),N=h.createVec3f64(),K=h.createVec4f64(),Ot=h.createMat3f64(),At=h.createMat4f64(),Dt=h.createQuatf64();function Ut(t){let r=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],e=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],a=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(r,e,a))}function Lt(t,r){let e=Math.sqrt(r[0]*r[0]+r[4]*r[4]+r[8]*r[8]),a=Math.sqrt(r[1]*r[1]+r[5]*r[5]+r[9]*r[9]),n=Math.sqrt(r[2]*r[2]+r[6]*r[6]+r[10]*r[10]);return E(t,e,a,n),t}function W(t,r,e){Math.abs(t[0])>Math.abs(t[1])?E(r,0,1,0):E(r,1,0,0),l(e,t,r),l(r,e,t),I(e,e),I(r,r)}var Rt=c(),Vt=c(),qt=c(),wt=c(),bt=c();function Y(t=P){return[t[0],t[1],t[2],t[3]]}function Yt(t=P[0],r=P[1],e=P[2],a=P[3]){return Z(t,r,e,a,K.get())}function tt(t,r){return Z(r[0],r[1],r[2],r[3],t)}function Z(t,r,e,a,n=Y()){return n[0]=t,n[1]=r,n[2]=e,n[3]=a,n}function rt(t,r,e){let a=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],n=Math.abs(a-1)>1e-5&&a>1e-12?1/Math.sqrt(a):1;return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=-(e[0]*t[0]+e[1]*t[1]+e[2]*t[2]),e}function et(t,r,e,a=Y()){let n=e[0]-r[0],i=e[1]-r[1],o=e[2]-r[2],s=t[0]-r[0],O=t[1]-r[1],A=t[2]-r[2],S=i*A-o*O,q=o*s-n*A,w=n*O-i*s,b=S*S+q*q+w*w,j=Math.abs(b-1)>1e-5&&b>1e-12?1/Math.sqrt(b):1;return a[0]=S*j,a[1]=q*j,a[2]=w*j,a[3]=-(a[0]*t[0]+a[1]*t[1]+a[2]*t[2]),a}function $(t,r,e,a=0,n=Math.floor(e*(1/3)),i=Math.floor(e*(2/3))){if(e<3)return!1;r(d,a);let o=n,s=!1;for(;o<e-1&&!s;)r(T,o),o++,s=!F(d,T);if(!s)return!1;for(o=Math.max(o,i),s=!1;o<e&&!s;)r(g,o),o++,p(y,d,T),I(y,y),p(U,T,g),I(U,U),s=!F(d,g)&&!F(T,g)&&Math.abs(f(y,U))<at;return s?(et(d,T,g,t),!0):(a!==0||n!==1||i!==2)&&$(t,r,e,0,1,2)}function Zt(t,r,e=!0){let a=r.length/3;return $(t,(n,i)=>E(n,r[3*i+0],r[3*i+1],r[3*i+2]),e?a-1:a)}var at=.99619469809,d=c(),T=c(),g=c(),y=c(),U=c();function $t(t,r,e){return r!==t&&tt(t,r),t[3]=-f(t,e),t}function tr(t,r){return r[0]=-t[0],r[1]=-t[1],r[2]=-t[2],r[3]=-t[3],r}function rr(t,r,e,a){return l(g,r,t),rt(e,g,a)}function er(t,r,e,a){return R(V(t,r,p(N.get(),e,r),st,a))}function ar(t,r,e){return r!=null&&R(V(t,r.origin,r.direction,ot,e))}function nr(t,r,e){return R(V(t,r.origin,r.vector,m.NONE,e))}function sr(t,r,e){return R(V(t,r.origin,r.vector,m.CLAMP,e))}function or(t,r){return L(t,r)>=0}function ir(t,r){let e=f(t,r.ray.direction),a=-L(t,r.ray.origin);if(e>-1e-6&&e<1e-6)return a>0;let n=a/e;return e>0?n<r.c1&&(r.c1=n):n>r.c0&&(r.c0=n),r.c0<=r.c1}function cr(t,r,e){let a=M(N.get(),t,-t[3]),n=nt(t,p(N.get(),r,a),N.get());return C(e,n,a),e}function fr(t,r,e,a){let n=t,i=N.get(),o=N.get();W(n,i,o);let s=p(N.get(),e,r),O=v(i,s),A=v(o,s),S=v(n,s);return E(a,O,A,S)}function nt(t,r,e){let a=M(N.get(),t,f(t,r));return p(e,r,a),e}function ur(t,r){return Math.abs(L(t,r))}function L(t,r){return f(t,r)+t[3]}var u;function R(t){return t===u.INTERSECTS_INSIDE_OUT||t===u.INTERSECTS_OUTSIDE_IN}function V(t,r,e,a,n){let i=f(t,e),o=L(t,r);if(i===0)return o>=0?u.INSIDE:u.OUTSIDE;let s=-o/i;return a&m.CLAMP&&(s=Q(s,0,1)),!(a&m.INFINITE_MIN)&&s<0||!(a&m.INFINITE_MAX)&&s>1?o>=0?u.INSIDE:u.OUTSIDE:(C(n,r,M(n,e,s)),o>=0?u.INTERSECTS_INSIDE_OUT:u.INTERSECTS_OUTSIDE_IN)}(function(t){t[t.INTERSECTS_INSIDE_OUT=0]="INTERSECTS_INSIDE_OUT",t[t.INTERSECTS_OUTSIDE_IN=1]="INTERSECTS_OUTSIDE_IN",t[t.INSIDE=2]="INSIDE",t[t.OUTSIDE=3]="OUTSIDE"})(u||(u={}));var P=[0,0,1,0],m;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(m||(m={}));var st=m.INFINITE_MIN|m.INFINITE_MAX,ot=m.INFINITE_MAX;export{ut as a,v as b,mt as c,It as d,Pt as e,N as f,K as g,At as h,Dt as i,Ut as j,Lt as k,W as l,Y as m,Yt as n,tt as o,Z as p,rt as q,et as r,$ as s,Zt as t,$t as u,tr as v,rr as w,er as x,ar as y,nr as z,sr as A,or as B,ir as C,cr as D,fr as E,ur as F,L as G};
