import{b as T,d as x}from"./chunk-TKZJUAKL.js";import{b as l}from"./chunk-HM5RIVQC.js";import{c as _}from"./chunk-JKNCWG7E.js";import{F as I}from"./chunk-E57FTRWF.js";import{A as b,B as w}from"./chunk-U4J5SECU.js";import{u as h,x as A}from"./chunk-D2LVMNOU.js";import{t as g}from"./chunk-HHDFN2GK.js";import{F as c,H as y,I as d,J as p,x as m}from"./chunk-47GHT6OF.js";import{f as u}from"./chunk-VTHXE323.js";function R(t,e){B(t.typedBuffer,e.typedBuffer,t.typedBufferStride,e.typedBufferStride)}function B(t,e,n=2,o=n){let a=e.length/2,r=0,f=0;if(!c(e)||d(e)){for(let i=0;i<a;++i)t[r]=e[f],t[r+1]=e[f+1],r+=n,f+=o;return}let s=p(e);if(y(e))for(let i=0;i<a;++i)t[r]=Math.max(e[f]/s,-1),t[r+1]=Math.max(e[f+1]/s,-1),r+=n,f+=o;else for(let i=0;i<a;++i)t[r]=e[f]/s,t[r+1]=e[f+1]/s,r+=n,f+=o}function v(t,e,n,o){let a=t.typedBuffer,r=t.typedBufferStride,f=o?.count??t.count,s=(o?.dstIndex??0)*r;for(let i=0;i<f;++i)a[s]=e,a[s+1]=n,s+=r}var U=Object.freeze(Object.defineProperty({__proto__:null,fill:v,normalizeIntegerBuffer:B,normalizeIntegerBufferView:R},Symbol.toStringTag,{value:"Module"}));var S=class{constructor(e){this._streamDataRequester=e}loadJSON(e,n){return u(this,null,function*(){return this._load("json",e,n)})}loadBinary(e,n){return u(this,null,function*(){return b(e)?(h(n),w(e)):this._load("binary",e,n)})}loadImage(e,n){return u(this,null,function*(){return this._load("image",e,n)})}_load(e,n,o){return u(this,null,function*(){if(this._streamDataRequester==null)return(yield I(n,{responseType:q[e]})).data;let a=yield _(this._streamDataRequester.request(n,e,o));if(a.ok===!0)return a.value;throw A(a.error),new g("glt-loader-request-error",`Request for resource failed: ${a.error}`)})}},q={image:"image",binary:"array-buffer",json:"json","image+type":void 0};function $(t,e){switch(e){case l.TRIANGLES:return j(t);case l.TRIANGLE_STRIP:return D(t);case l.TRIANGLE_FAN:return N(t)}}function j(t){return typeof t=="number"?x(t):m(t)?new Uint16Array(t):t}function D(t){let e=typeof t=="number"?t:t.length;if(e<3)return[];let n=e-2,o=T(3*n);if(typeof t=="number"){let a=0;for(let r=0;r<n;r+=1)r%2==0?(o[a++]=r,o[a++]=r+1,o[a++]=r+2):(o[a++]=r+1,o[a++]=r,o[a++]=r+2)}else{let a=0;for(let r=0;r<n;r+=1)r%2==0?(o[a++]=t[r],o[a++]=t[r+1],o[a++]=t[r+2]):(o[a++]=t[r+1],o[a++]=t[r],o[a++]=t[r+2])}return o}function N(t){let e=typeof t=="number"?t:t.length;if(e<3)return new Uint16Array(0);let n=e-2,o=n<=65536?new Uint16Array(3*n):new Uint32Array(3*n);if(typeof t=="number"){let s=0;for(let i=0;i<n;++i)o[s++]=0,o[s++]=i+1,o[s++]=i+2;return o}let a=t[0],r=t[1],f=0;for(let s=0;s<n;++s){let i=t[s+2];o[f++]=a,o[f++]=r,o[f++]=i,r=i}return o}export{R as a,B as b,v as c,S as d,$ as e};
