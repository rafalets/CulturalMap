import{g as V}from"./chunk-WQQ6B254.js";import{a as G}from"./chunk-GK3RYCKG.js";import{G as k,H as z}from"./chunk-X7BNFUFQ.js";import{a as E}from"./chunk-LNVVFNTC.js";var Y=.45;function j(n,t=.5){switch(n.type){case"CIMPointSymbol":{let e=n.symbolLayers;if(!e||e.length!==1)return null;let o=e[0];return o.type!=="CIMVectorMarker"?null:j(o)}case"CIMVectorMarker":{let e=n.markerGraphics;if(!e||e.length!==1)return null;let o=e[0];if(!o)return null;let a=o.geometry;if(!a)return null;let i=o.symbol;return!i||i.type!=="CIMPolygonSymbol"&&i.type!=="CIMLineSymbol"||i.symbolLayers?.some(r=>!!r.effects)?null:{type:"sdf",geom:a,sdfPaddingRatio:t,asFill:i.type==="CIMPolygonSymbol"}}}}function q(n){return n?n.rings?n.rings:n.paths?n.paths:n.xmin!==void 0&&n.ymin!==void 0&&n.xmax!==void 0&&n.ymax!==void 0?[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]:null:null}function B(n){let t=1/0,e=-1/0,o=1/0,a=-1/0;for(let i of n)for(let r of i)r[0]<t&&(t=r[0]),r[0]>e&&(e=r[0]),r[1]<o&&(o=r[1]),r[1]>a&&(a=r[1]);return new V(t,o,e-t,a-o)}function X(n){let t=1/0,e=-1/0,o=1/0,a=-1/0;for(let i of n)for(let r of i)r[0]<t&&(t=r[0]),r[0]>e&&(e=r[0]),r[1]<o&&(o=r[1]),r[1]>a&&(a=r[1]);return[t,o,e,a]}function T(n){return n?n.rings?X(n.rings):n.paths?X(n.paths):E(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function W(n,t){let[e,o,a,i]=T(n),r=a-e,l=i-o,m=z,c=k,s=Math.floor(.5*(m*t-c)),f=(m-2*(s+c))/Math.max(r,l),y=Math.round(r*f),h=Math.round(l*f);return{pixelDimensions:[r,l],texelDimensions:[Math.round((y+2*s)/f),Math.round((h+2*s)/f)]}}function Z(n,t,e,o,a,i,r){let[l,m,c,s]=n;if(c<l||s<m)return{frameSizeRatio:0,anchorX:0,anchorY:0,widthRatio:1,sdfPaddingRatio:.5};let f=c-l,y=s-m,h=Math.max(f,y),u=.5;if(i!=null&&e!=null){!r&&t!=null&&(i*=(t.ymax-t.ymin)/e);let F=i/(i+h);F>Y&&F<1&&(u=Math.min(F+.1,.99))}let x=z,M=k,p=Math.floor(.5*(x*u-M)),g=(x-2*(p+M))/h,b=Math.round(f*g)+2*p,R=Math.round(y*g)+2*p,d=1;t&&(d=R*(1-u)/((t.ymax-t.ymin)*g));let P=0,S=0,w=1;o&&(a?t&&e&&t.ymax-t.ymin>0&&(w=(t.xmax-t.xmin)/(t.ymax-t.ymin),P=o.x/(e*w),S=o.y/e):(P=o.x,S=o.y)),t&&(P=.5*(t.xmax+t.xmin)+P*(t.xmax-t.xmin),S=.5*(t.ymax+t.ymin)+S*(t.ymax-t.ymin)),P-=l,S-=m,P*=g,S*=g,P+=p,S+=p;let C=P/b-.5,D=S/R-.5;return a&&e&&(C*=e*w,D*=e),{frameSizeRatio:d,anchorX:C,anchorY:D,widthRatio:w,sdfPaddingRatio:u}}function _(n){let t=q(n.geom),e=B(t),o=z,a=k,i=Math.floor(.5*(o*n.sdfPaddingRatio-a)),r=o-2*(i+a),l=r/Math.max(e.width,e.height),m=Math.round(e.width*l)+2*i,c=Math.round(e.height*l)+2*i,s=[];for(let y of t)if(y&&y.length>1){let h=[];for(let u of y){let[x,M]=u;x-=e.x,M-=e.y,x*=l,M*=l,x+=i-.5,M+=i-.5,n.asFill?h.push([x,M]):h.push([Math.round(x),Math.round(M)])}if(n.asFill){let u=h.length-1;h[0][0]===h[u][0]&&h[0][1]===h[u][1]||h.push(h[0])}s.push(h)}let f=U(s,m,c,i);return n.asFill&&H(s,m,c,i,f),{data:J(f,i),width:m,height:c,sdfPaddingRatio:n.sdfPaddingRatio,sdfDecodeCoeff:2*i/r}}function U(n,t,e,o){let a=t*e,i=new Array(a),r=o*o+1;for(let l=0;l<a;++l)i[l]=r;for(let l of n){let m=l.length;for(let c=1;c<m;++c){let s=l[c-1],f=l[c],y,h,u,x;s[0]<f[0]?(y=s[0],h=f[0]):(y=f[0],h=s[0]),s[1]<f[1]?(u=s[1],x=f[1]):(u=f[1],x=s[1]);let M=Math.floor(y)-o,p=Math.floor(h)+o,g=Math.floor(u)-o,b=Math.floor(x)+o;M<0&&(M=0),p>t&&(p=t),g<0&&(g=0),b>e&&(b=e);let R=f[0]-s[0],d=f[1]-s[1],P=R*R+d*d;for(let S=M;S<p;S++)for(let w=g;w<b;w++){let C=S+.5,D=w+.5,F,I,v=(C-s[0])*R+(D-s[1])*d;v<0?(F=s[0],I=s[1]):v>P?(F=f[0],I=f[1]):(v/=P,F=s[0]+v*R,I=s[1]+v*d);let A=(C-F)*(C-F)+(D-I)*(D-I),L=(e-w-1)*t+S;A<i[L]&&(i[L]=A)}}}for(let l=0;l<a;++l)i[l]=Math.sqrt(i[l]);return i}function H(n,t,e,o,a){for(let i of n){let r=i.length;for(let l=1;l<r;++l){let m=i[l-1],c=i[l],s,f,y,h;m[0]<c[0]?(s=m[0],f=c[0]):(s=c[0],f=m[0]),m[1]<c[1]?(y=m[1],h=c[1]):(y=c[1],h=m[1]);let u=Math.floor(s),x=Math.floor(f)+1,M=Math.floor(y),p=Math.floor(h)+1;u<o&&(u=o),x>t-o&&(x=t-o),M<o&&(M=o),p>e-o&&(p=e-o);for(let g=M;g<p;++g){if(m[1]>g==c[1]>g)continue;let b=g+.5,R=(e-g-1)*t;for(let d=u;d<x;++d)d+.5<(c[0]-m[0])*(b-m[1])/(c[1]-m[1])+m[0]&&(a[R+d]=-a[R+d]);for(let d=o;d<u;++d)a[R+d]=-a[R+d]}}}}function J(n,t){let e=2*t,o=n.length,a=new Uint8Array(4*o);for(let i=0;i<o;++i){let r=.5-n[i]/e;G(r,a,4*i)}return a}export{j as a,T as b,W as c,Z as d,_ as e};
