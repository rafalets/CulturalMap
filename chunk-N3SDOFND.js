import{a as b}from"./chunk-D2LVMNOU.js";import{s as l}from"./chunk-47GHT6OF.js";var o=class{constructor(e,s){this._observers=e,this._observer=s}remove(){l(this._observers,this._observer)}};var d=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return a;this._observers==null&&(this._observers=[]);let s=this._observers,r=!1,t=!1,v=s.length;for(let i=0;i<v;++i){let n=s[i];if(n.destroyed)t=!0;else if(n===e){r=!0;break}}return r||(s.push(e),t&&this._removeDestroyedObservers()),new o(s,e)}_removeDestroyedObservers(){let e=this._observers;if(!e||e.length===0)return;let s=e.length,r=0;for(let t=0;t<s;++t){for(;t+r<s&&e[t+r].destroyed;)++r;if(r>0){if(!(t+r<s))break;e[t]=e[t+r]}}e.length=s-r}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this._observers;if(e!=null){for(let s of e)s.onCommitted();this._observers=null}}},a=b();export{d as a};
