import{t as w}from"./chunk-HHDFN2GK.js";import{a as T,b as g,f as c}from"./chunk-VTHXE323.js";var x={remove:()=>{}};function i(e){return e?{remove(){e&&(e(),e=void 0)}}:x}function P(e){e.forEach(r=>r?.remove())}function W(e){P(e),e.length=0}function G(e){return i(()=>P(e))}function R(e){return i(()=>e()?.remove())}function U(e){return i(()=>e?.abort())}function z(e){return i(e!=null?()=>e.destroy():void 0)}function J(e,r){if(e==null)throw new Error(r??"value is None")}function K(e){return e?.destroy(),null}function Q(e){return e?.dispose(),null}function j(e){return e?.remove(),null}function X(e){return e?.abort(),null}function Y(e){return e?.release(),null}function Z(e,r,t){return e!=null&&r!=null?t!=null?t(e,r):e.equals(r):e===r}function _(e,r){let t;return e.some((n,a)=>(t=r(n,a),t!=null)),t??void 0}function L(e){return C(e)||S(e)}function C(e){return e!=null&&typeof e=="object"&&"on"in e&&typeof e.on=="function"}function S(e){return e!=null&&typeof e=="object"&&"addEventListener"in e&&typeof e.addEventListener=="function"}function I(e,r,t){if(!L(e))throw new TypeError("target is not a Evented or EventTarget object");return S(e)?$(e,r,t):e.on(r,t)}function $(e,r,t,n){if(Array.isArray(r)){let a=r.slice();for(let o of a)e.addEventListener(o,t,n);return i(()=>{for(let o of a)e.removeEventListener(o,t,n)})}return e.addEventListener(r,t,n),i(()=>e.removeEventListener(r,t,n))}function h(e,r,t){if(!L(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(r,t);let n=I(e,r,a=>{n.remove(),t.call(e,a)});return n}function q(e){return{setTimeout:(r,t)=>{let n=e.setTimeout(r,t);return i(()=>e.clearTimeout(n))}}}var k=q(globalThis);function f(e="Aborted"){return new w("AbortError",e)}function M(e,r="Aborted"){if(D(e))throw f(r)}function d(e){return e instanceof AbortSignal?e:e?.signal??void 0}function D(e){let r=d(e);return r!=null&&r.aborted}function fe(e){if(y(e))throw e}function me(e){if(!y(e))throw e}function m(e,r){let t=d(e);if(t!=null){if(!t.aborted)return h(t,"abort",()=>r());r()}}function de(e,r){let t=d(e);if(t!=null)return M(t),h(t,"abort",()=>r(f()))}function be(e,r){return d(r)==null?e:new Promise((t,n)=>{let a=m(r,()=>n(f())),o=()=>{a=j(a)};e.then(o,o),e.then(t,n)})}function y(e){return e?.name==="AbortError"}function pe(e){return c(this,null,function*(){try{return yield e}catch(r){if(!y(r))throw r;return}})}function F(e){return c(this,null,function*(){if(!e)return;if(typeof e.forEach!="function"){let t=Object.keys(e),n=t.map(s=>e[s]),a=yield F(n),o={};return t.map((s,u)=>o[s]=a[u]),o}let r=e;return Promise.allSettled(r).then(t=>Array.from(r,(n,a)=>{let o=t[a];return o.status==="fulfilled"?{promise:n,value:o.value}:{promise:n,error:o.reason}}))})}function ve(e){return c(this,null,function*(){return(yield Promise.allSettled(e)).filter(r=>r.status==="fulfilled").map(r=>r.value)})}function we(e){return c(this,null,function*(){return(yield Promise.allSettled(e)).filter(r=>r.status==="rejected").map(r=>r.reason)})}function N(e,r=void 0,t){let n=new AbortController;return m(t,()=>n.abort()),new Promise((a,o)=>{let s=setTimeout(()=>{s=0,a(r)},e);m(n,()=>{s&&(clearTimeout(s),o(f()))})})}function he(e,r,t,n){let a=t&&"abort"in t?t:null;n!=null||a||(n=t);let o=setTimeout(()=>{o=0,a?.abort()},r),s=()=>n||new w("promiseUtils:timeout","The wrapped promise did not resolve within "+r+" ms");return e.then(u=>{if(o===0)throw s();return clearTimeout(o),u},u=>{throw clearTimeout(o),o===0?s():u})}function ye(e,r){let t=new AbortController,n=setTimeout(()=>t.abort(),r);return m(e,()=>{t.abort(),clearTimeout(n)}),g(T({},e),{signal:t.signal})}function V(e){return e&&typeof e.then=="function"}function H(e){return V(e)?e:Promise.resolve(e)}function Ee(e,r=-1){let t,n,a,o,s=null,u=(...b)=>{if(t){n=b,o&&o.reject(f()),o=O();let l=o.promise;if(s){let v=s;s=null,v.abort()}return l}if(a=o||O(),o=null,r>0){let l=new AbortController;t=H(e(...b,l.signal));let v=t;N(r).then(()=>{t===v&&(o?l.abort():s=l)})}else t=1,t=H(e(...b));let E=()=>{let l=n;n=a=t=s=null,l!=null&&u(...l)},A=t,p=a;return A.then(E,E),A.then(p.resolve,p.reject),p.promise};return u}function O(){let e,r,t=new Promise((a,o)=>{e=a,r=o}),n=a=>{e(a)};return n.resolve=a=>e(a),n.reject=a=>r(a),n.timeout=(a,o)=>k.setTimeout(()=>n.reject(o),a),n.promise=t,n}function Ae(e){return c(this,null,function*(){yield Promise.resolve(),M(e)})}export{i as a,P as b,W as c,G as d,R as e,U as f,z as g,J as h,K as i,Q as j,j as k,X as l,Y as m,Z as n,_ as o,k as p,L as q,I as r,h as s,f as t,M as u,d as v,D as w,fe as x,me as y,m as z,de as A,be as B,y as C,pe as D,F as E,ve as F,we as G,N as H,he as I,ye as J,V as K,H as L,Ee as M,O as N,Ae as O};
