import{a as T,b as R,c as U}from"./chunk-K27GONOJ.js";import{a as F,b as $}from"./chunk-6KRFVLII.js";import{E as z,b as x,e as C,h as L,r as M,s as p,t as w,u as i,v as f,w as b,y as g}from"./chunk-JR22Z7I2.js";import{f as v}from"./chunk-3QNSJ5HY.js";import{c as I}from"./chunk-BGICKEJR.js";import{b as k}from"./chunk-ZHUXSQTN.js";import{b as P}from"./chunk-YLZWDFCJ.js";import{d as h}from"./chunk-TLMADEUL.js";import{a as S}from"./chunk-J5MXC6AL.js";import{b as d}from"./chunk-OLOKUDVI.js";import{l as D}from"./chunk-MDL4XPLR.js";import{b as u}from"./chunk-EKMHQEJY.js";import{t as m}from"./chunk-HHDFN2GK.js";var N=i.fromSimpleMarkerSymbol(T),q=p.fromSimpleLineSymbol(R),A=f.fromSimpleFillSymbol(U),B=new w({symbolLayers:new u([new C({material:{color:F},edges:new x({size:d(1),color:new S($)})})])}),E=new p({symbolLayers:new u([new L({material:{color:new S([0,0,0])},size:d(1)})])}),O=new f({symbolLayers:new u([new C({outline:{color:new S([0,0,0]),size:d(1)}})])});function mo(o){if(o==null)return null;switch(o.type){case"mesh":return B;case"point":case"multipoint":return N;case"polyline":return q;case"polygon":case"extent":return A}return null}var W="#useCIMFallbackSymbology()",a={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function j(o,l=a){if(!o)return{symbol:null};let{retainId:t=a.retainId,ignoreDrivers:r=a.ignoreDrivers,hasLabelingContext:n=a.hasLabelingContext,retainCIM:y=a.retainCIM,cimFallbackEnabled:s=a.cimFallbackEnabled}=l,e=null;if(g(o)||o instanceof b)e=o.clone();else if(o.type==="cim"){let c=o.data?.symbol?.type;switch(c){case"CIMPointSymbol":e=y?o.clone():i.fromCIMSymbol(o);break;case"CIMLineSymbol":s&&(e=E.clone(),l?.logWarning?.(W,"Unsupported CIM line symbology converted to fallback 3D line symbology"));break;case"CIMPolygonSymbol":s&&(e=O.clone(),l?.logWarning?.(W,"Unsupported CIM polygon symbology converted to fallback 3D polygon symbology"))}if(!e)return{error:new m("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${c||"unknown"}' is unsupported in 3D`,{symbol:o})}}else if(o instanceof h)e=p.fromSimpleLineSymbol(o);else if(o instanceof P)e=i.fromSimpleMarkerSymbol(o);else if(o instanceof I)e=i.fromPictureMarkerSymbol(o);else if(o instanceof k)e=l.geometryType&&l.geometryType==="mesh"?w.fromSimpleFillSymbol(o):f.fromSimpleFillSymbol(o);else{if(!(o instanceof v))return{error:new m("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${o.type||o.declaredClass}' is unsupported in 3D`,{symbol:o})};e=n?M.fromTextSymbol(o):i.fromTextSymbol(o)}return t&&e&&e.type!=="cim"&&(e.id=o.id),!r||e.type==="cim"||e instanceof b||e.symbolLayers.forEach(c=>c.ignoreDrivers=!0),{symbol:e}}function vo(o,l,t,r){let n=J(o,{},{context:r,isLabelSymbol:!1});n!=null&&(l[t]=n)}function Fo(o,l,t,r){let n=J(o,{},{context:r,isLabelSymbol:!0});n!=null&&(l[t]=n)}function V(o){return g(o)||o instanceof b}function G(o){return o?.type==="polygon-3d"||o?.type==="line-3d"}function J(o,l,t){if(o==null)return null;let{context:r,isLabelSymbol:n}=t,y=r?.origin,s=r?.messages;if(y==="web-scene"&&!V(o)){let e=j(o,{retainCIM:!0,hasLabelingContext:n});return e.symbol!=null?e.symbol.write(l,r):(s?.push(new m("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:o,context:r,error:e.error})),null)}return D(r?.layer)&&G(o)?(s?.push(new m("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported on layers of type '${r?.layer?.declaredClass}'.`,{symbol:o,context:r})),null):(y==="web-map"||y==="portal-item"&&!D(r?.layer))&&V(o)?(s?.push(new m("symbol:unsupported",`Symbols of type '${o.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:o,context:r})),null):o.write(l,r)}function $o(o,l){return z(o,null,l)}export{mo as a,a as b,j as c,vo as d,Fo as e,$o as f};
