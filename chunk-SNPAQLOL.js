import{I as a,K as s,u as i}from"./chunk-C7INQGWT.js";var l=class{constructor(r,e){this._owner=e,this._properties={},this._afterDispatchHandle=null;for(let t in r){let o=r[t],p=new i(o,void 0,void 0,2,2);this._properties[t]={pool:p,acquired:[]}}this._afterDispatchHandle=a(()=>this._release())}destroy(){this._afterDispatchHandle&&(this._afterDispatchHandle.remove(),this._afterDispatchHandle=null);for(let r in this._properties){let e=this._properties[r];for(let t of e.acquired)s(t)||e.pool.release(t);e.pool.destroy(),e.pool=null,e.acquired=null}this._properties=null,this._owner=null}get(r){let e=this._owner._get(r),t=this._properties[r],o=t.pool.acquire();for(t.acquired.push(o);o===e;)t.acquired.push(o),o=t.pool.acquire();return o}_release(){for(let r in this._properties){let e=this._properties[r],t=0;for(let o of e.acquired)s(o)?e.acquired[t++]=o:e.pool.release(o);e.acquired.length=t}}};export{l as a};
