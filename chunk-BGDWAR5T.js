import{c as P}from"./chunk-KCSRPDMA.js";import{j as L}from"./chunk-IB2IUO7T.js";import{j as E}from"./chunk-I4M2OT5W.js";import{d as M}from"./chunk-7ZYPJJID.js";import{g as _}from"./chunk-UAKHZRKN.js";import{a as m,b}from"./chunk-LB5YQINJ.js";import{a as x}from"./chunk-VACZNAP3.js";import{d as s}from"./chunk-C7INQGWT.js";import{H as n}from"./chunk-WMHJC7XF.js";import{H as g,h as w}from"./chunk-D2LVMNOU.js";import{a as o}from"./chunk-QGVBCWUY.js";import{f as y}from"./chunk-VTHXE323.js";function O(t){switch(t?.type){case"point":return t;case"extent":return t.center;case"polygon":return t.centroid;case"multipoint":case"polyline":return t.extent?.center;default:return null}}function C(t,e){return y(this,null,function*(){if(t.hasZ||e.type==="2d")return t;let i=e.map?.ground;if(!i?.layers.length)return t;let{geometry:r}=yield i.queryElevation(t,{cache:e.basemapTerrain?.elevationQueryCache});return r})}function G(t,e,i){return S(t.center,e,i)}function A(t,e,i){switch(t?.type){case"extent":return t;case"multipoint":case"polygon":case"polyline":return t.extent;case"point":return S(t,e,i);default:return null}}function S(t,e,i){let r=t.hasZ?t.z:void 0;if(e?.map)return(i!=null?P(e,i):e.extent).clone().centerAt(t).set({zmax:r,zmin:r});let{x:a,y:p,spatialReference:h}=t;return new E({xmin:a-.25,ymin:p-.25,xmax:a+.25,ymax:p+.25,spatialReference:h,zmin:r,zmax:r})}var l=class extends x.EventedAccessor{constructor(t){super(t),this.location=null,this.screenLocationEnabled=!1,this.view=null,this.addHandles([b(()=>{let e=this.screenLocationEnabled?this.view:null;return e?[e.size,e.type==="3d"?e.camera:e.viewpoint]:null},()=>this.notifyChange("screenLocation")),m(()=>this.screenLocation,(e,i)=>{e!=null&&i!=null&&this.emit("view-change")})])}destroy(){this.view=null}get screenLocation(){let{location:t,view:e,screenLocationEnabled:i}=this,r=e?.spatialReference,a=r?L(t,r).geometry:null;return i&&a&&e?.ready?e.toScreen(a):null}};o([s()],l.prototype,"location",void 0),o([s()],l.prototype,"screenLocation",null),o([s()],l.prototype,"screenLocationEnabled",void 0),o([s()],l.prototype,"view",void 0),l=o([n("esri.widgets.support.AnchorElementViewModel")],l);var T=l;var u=class extends T{constructor(t){super(t),this.visible=!1}};o([s()],u.prototype,"visible",void 0),u=o([n("esri.widgets.Spinner.SpinnerViewModel")],u);var d=u;var v="esri-spinner",f={base:v,spinnerStart:`${v}--start`,spinnerFinish:`${v}--finish`},c=class extends M{constructor(t,e){super(t,e),this._animationDelay=500,this._animationPromise=null,this.viewModel=new d}initialize(){this.addHandles(m(()=>this.visible,t=>this._visibleChange(t)))}destroy(){this._animationPromise=null}get location(){return this.viewModel.location}set location(t){this.viewModel.location=t}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}get visible(){return this.viewModel.visible}set visible(t){this.viewModel.visible=t}show(t){let{location:e,promise:i}=t??{};e&&(this.viewModel.location=e),this.visible=!0;let r=()=>this.hide();i&&i.catch(()=>{}).then(r)}hide(){this.visible=!1}render(){let{visible:t}=this,{screenLocation:e}=this.viewModel,i=!!e,r=t&&i,a=!t&&i,p={[f.spinnerStart]:r,[f.spinnerFinish]:a},h=this._getPositionStyles();return _("div",{class:this.classes(f.base,p),styles:h})}_visibleChange(t){if(t)return void(this.viewModel.screenLocationEnabled=!0);let e=g(this._animationDelay);this._animationPromise=e,e.catch(()=>{}).then(()=>{this._animationPromise===e&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){let{screenLocation:t,view:e}=this.viewModel;if(e==null||t==null)return{};let{padding:i}=e;return{left:t.x-i.left+"px",top:t.y-i.top+"px"}}};o([s()],c.prototype,"location",null),o([s()],c.prototype,"view",null),o([s({type:d})],c.prototype,"viewModel",void 0),o([s()],c.prototype,"visible",null),c=o([n("esri.widgets.Spinner")],c);var vt=c;var Lt=t=>{let e=class extends t{constructor(...i){super(...i),this.goToOverride=null,this.view=null}callGoTo(i){let{view:r}=this;return w(r),this.goToOverride?this.goToOverride(r,i):r.goTo(i.target,i.options)}};return o([s()],e.prototype,"goToOverride",void 0),o([s()],e.prototype,"view",void 0),e=o([n("esri.widgets.support.GoTo")],e),e};export{O as a,C as b,G as c,A as d,T as e,d as f,vt as g,Lt as h};
