import{a as I}from"./chunk-3SDSCSDJ.js";import{j as q}from"./chunk-I4M2OT5W.js";import{a as G,n as R}from"./chunk-NTVLK3P2.js";import{a as F}from"./chunk-WMQNRNIU.js";import{a as _}from"./chunk-EIPVFA6F.js";import{d as C}from"./chunk-C7INQGWT.js";import{H as k}from"./chunk-WMHJC7XF.js";import{a as P}from"./chunk-QGVBCWUY.js";import{b as B}from"./chunk-HHDFN2GK.js";import{a as E,b as O}from"./chunk-VTHXE323.js";function D(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function T(t){return t.points!==void 0}function W(t){return t.x!==void 0&&t.y!==void 0}function H(t){return t.paths!==void 0}function K(t){return t.rings!==void 0}function L(t){function e(r,i){return r==null?i:i==null?r:t(r,i)}return e}var M=L(Math.min),w=L(Math.max);function ft(t,e){return H(e)?Z(t,e.paths,!1,!1):K(e)?Z(t,e.rings,!1,!1):T(e)?b(t,e.points,!1,!1,!1,!1):D(e)?Q(t,e):(W(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.x,t[3]=e.y),t)}function xt(t){let e,r,i,s;for(t.reset(),e=i=1/0,r=s=-1/0;t.nextPath();){let o=et(t);e=Math.min(o[0],e),i=Math.min(o[1],i),r=Math.max(o[2],r),s=Math.max(o[3],s)}return I([e,i,r,s])}function et(t){let e,r,i,s;for(e=i=1/0,r=s=-1/0;t.nextPoint();)e=Math.min(t.x,e),i=Math.min(t.y,i),r=Math.max(t.x,r),s=Math.max(t.y,s);return I([e,i,r,s])}function yt(t,e){return H(e)?Z(t,e.paths,!0,!1):K(e)?Z(t,e.rings,!0,!1):T(e)?b(t,e.points,!0,!1,!0,!1):D(e)?Q(t,e,!0,!1,!0,!1):(W(e)&&(t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.x,t[4]=e.y,t[5]=e.z),t)}function Z(t,e,r,i){let s=r?3:2;if(!e.length||!e[0].length)return null;let o,m,p,f,[n,h]=e[0][0],[u,a]=e[0][0];for(let l=0;l<e.length;l++){let g=e[l];for(let x=0;x<g.length;x++){let c=g[x],[A,d]=c;if(n=M(n,A),h=M(h,d),u=w(u,A),a=w(a,d),r&&c.length>2){let v=c[2];o=M(o,v),m=w(m,v)}if(i&&c.length>s){let v=c[s];p=M(o,v),f=w(m,v)}}}return r?i?(t[0]=n,t[1]=h,t[2]=o,t[3]=p,t[4]=u,t[5]=a,t[6]=m,t[7]=f,t.length=8,t):(t[0]=n,t[1]=h,t[2]=o,t[3]=u,t[4]=a,t[5]=m,t.length=6,t):i?(t[0]=n,t[1]=h,t[2]=p,t[3]=u,t[4]=a,t[5]=f,t.length=6,t):(t[0]=n,t[1]=h,t[2]=u,t[3]=a,t.length=4,t)}function Q(t,e,r,i,s,o){let m=e.xmin,p=e.xmax,f=e.ymin,n=e.ymax,h=e.zmin,u=e.zmax,a=e.mmin,l=e.mmax;return s?(h=h||0,u=u||0,o?(a=a||0,l=l||0,t[0]=m,t[1]=f,t[2]=h,t[3]=a,t[4]=p,t[5]=n,t[6]=u,t[7]=l,t):(t[0]=m,t[1]=f,t[2]=h,t[3]=p,t[4]=n,t[5]=u,t)):o?(a=a||0,l=l||0,t[0]=m,t[1]=f,t[2]=a,t[3]=p,t[4]=n,t[5]=l,t):(t[0]=m,t[1]=f,t[2]=p,t[3]=n,t)}function b(t,e,r,i,s,o){let m=r?3:2,p=i&&o,f=r&&s;if(!e.length||!e[0].length)return null;let n,h,u,a,[l,g]=e[0],[x,c]=e[0];for(let A=0;A<e.length;A++){let d=e[A],[v,j]=d;if(l=M(l,v),g=M(g,j),x=w(x,v),c=w(c,j),f&&d.length>2){let z=d[2];n=M(n,z),h=w(h,z)}if(p&&d.length>m){let z=d[m];u=M(n,z),a=w(h,z)}}return s?(n=n||0,h=h||0,o?(u=u||0,a=a||0,t[0]=l,t[1]=g,t[2]=n,t[3]=u,t[4]=x,t[5]=c,t[6]=h,t[7]=a,t):(t[0]=l,t[1]=g,t[2]=n,t[3]=x,t[4]=c,t[5]=h,t)):o?(u=u||0,a=a||0,t[0]=l,t[1]=g,t[2]=u,t[3]=x,t[4]=c,t[5]=a,t):(t[0]=l,t[1]=g,t[2]=x,t[3]=c,t)}function rt(t){return t.xmin!==void 0&&t.ymin!==void 0&&t.xmax!==void 0&&t.ymax!==void 0}function it(t){return t.points!==void 0}function st(t){return t.x!==void 0&&t.y!==void 0}function ot(t){return t.paths!==void 0}function at(t){return t.rings!==void 0}var S=[];function U(t,e,r,i){return{xmin:t,ymin:e,xmax:r,ymax:i}}function V(t,e,r,i,s,o){return{xmin:t,ymin:e,zmin:r,xmax:i,ymax:s,zmax:o}}function $(t,e,r,i,s,o){return{xmin:t,ymin:e,mmin:r,xmax:i,ymax:s,mmax:o}}function tt(t,e,r,i,s,o,m,p){return{xmin:t,ymin:e,zmin:r,mmin:i,xmax:s,ymax:o,zmax:m,mmax:p}}function N(t,e=!1,r=!1){return e?r?tt(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]):V(t[0],t[1],t[2],t[3],t[4],t[5]):r?$(t[0],t[1],t[2],t[3],t[4],t[5]):U(t[0],t[1],t[2],t[3])}function vt(t){return t?rt(t)?t:st(t)?ht(t):at(t)?ut(t):ot(t)?J(t):it(t)?nt(t):null:null}function nt(t){let{hasZ:e,hasM:r,points:i}=t;return N(b(S,i,e??!1,r??!1),e,r)}function ht(t){let{x:e,y:r,z:i,m:s}=t,o=s!=null;return i!=null?o?tt(e,r,i,s,e,r,i,s):V(e,r,i,e,r,i):o?$(e,r,s,e,r,s):U(e,r,e,r)}function ut(t){let{hasZ:e,hasM:r,rings:i}=t,s=Z(S,i,e??!1,r??!1);return s?N(s,e,r):null}function J(t){let{hasZ:e,hasM:r,paths:i}=t,s=Z(S,i,e??!1,r??!1);return s?N(s,e,r):null}function X(t,e,r=!1){let{hasM:i,hasZ:s}=t;Array.isArray(e)?e.length!==4||i||s?e.length===3&&r&&!i?(s=!0,i=!1):e.length===3&&i&&s&&(i=!1,s=!1):(i=!0,s=!0):(s=!s&&e.hasZ&&(!i||e.hasM),i=!i&&e.hasM&&(!s||e.hasZ)),t.hasZ=s,t.hasM=i}var Y;function lt(t){return!Array.isArray(t[0])}function mt(t){return typeof t[0]?.[0]=="number"}function pt(t){if(!t)return;let{paths:e,hasM:r,hasZ:i,spatialReference:s}=t;switch(e??=[],mt(e)&&(e=[e]),e[0]?.[0]?.length){case 4:i??=!0,r??=!0;break;case 3:i??=r!==!0,r??=!i;break;default:i??=!1,r??=!1}return s??=F.WGS84,O(E({},t),{hasM:r,hasZ:i,paths:e,spatialReference:s})}var y=Y=class extends G{constructor(t){super(pt(t)),this.curvePaths=void 0,this.paths=[],this.type="polyline"}get cache(){return this.commitProperty("curvePaths"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("paths"),this.commitProperty("spatialReference"),{}}writeCurvePaths(t,e){e.curvePaths=B(t)}get extent(){let t=J(this),{spatialReference:e}=this;return t?new q(O(E({},t),{spatialReference:e})):null}writePaths(t,e){e.paths=B(this.paths)}addPath(t){if(!t)return;let e=this.paths,r=e.length;if(lt(t)){let i=[];for(let s=0,o=t.length;s<o;s++)i[s]=t[s].toArray();e[r]=i}else e[r]=t.slice();return this.notifyChange("paths"),this}clone(){let t=new Y;return t.spatialReference=this.spatialReference,t.paths=B(this.paths),t.curvePaths=B(this.curvePaths),t.hasZ=this.hasZ,t.hasM=this.hasM,t}getPoint(t,e){if(!this._validateInputs(t,e))return null;let r=this.paths[t][e],i=this.hasZ,s=this.hasM;return i&&!s?new R(r[0],r[1],r[2],void 0,this.spatialReference):s&&!i?new R(r[0],r[1],void 0,r[2],this.spatialReference):i&&s?new R(r[0],r[1],r[2],r[3],this.spatialReference):new R(r[0],r[1],this.spatialReference)}insertPoint(t,e,r){return this._validateInputs(t,e,!0)?(X(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t].splice(e,0,r),this.notifyChange("paths"),this):this}removePath(t){if(!this._validateInputs(t,null))return null;let e=this.paths.splice(t,1)[0],r=this.spatialReference,i=e.map(s=>new R(s,r));return this.notifyChange("paths"),i}removePoint(t,e){if(!this._validateInputs(t,e))return null;let r=new R(this.paths[t].splice(e,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(t,e,r){return this._validateInputs(t,e)?(X(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[t][e]=r,this.notifyChange("paths"),this):this}_validateInputs(t,e,r=!1){if(t==null||t<0||t>=this.paths.length)return!1;if(e!=null){let i=this.paths[t];if(r&&(e<0||e>i.length)||!r&&(e<0||e>=i.length))return!1}return!0}toJSON(t){return this.write({},t)}};P([C({readOnly:!0})],y.prototype,"cache",null),P([C({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],y.prototype,"curvePaths",void 0),P([_("curvePaths")],y.prototype,"writeCurvePaths",null),P([C({readOnly:!0})],y.prototype,"extent",null),P([C({type:[[[Number]]],json:{write:{isRequired:!0}}})],y.prototype,"paths",void 0),P([_("paths")],y.prototype,"writePaths",null),y=Y=P([k("esri.geometry.Polyline")],y);var Nt=y;y.prototype.toJSON.isDefaultToJSON=!0;export{X as a,ft as b,xt as c,et as d,yt as e,Z as f,vt as g,ut as h,Nt as i};
