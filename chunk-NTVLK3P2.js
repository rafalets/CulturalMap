import{a as f}from"./chunk-WMQNRNIU.js";import{a as N}from"./chunk-HD52PWPC.js";import{a as A}from"./chunk-EIPVFA6F.js";import{o as j,p as P,r as B,t as Y,v as L,y as b}from"./chunk-IG66NQHW.js";import{a as x}from"./chunk-ARRCN5K3.js";import{a as q}from"./chunk-ISSJ3A6Y.js";import{f as k}from"./chunk-7EG726PT.js";import{L as O,d as u}from"./chunk-C7INQGWT.js";import{H as z,f as X}from"./chunk-WMHJC7XF.js";import{a as l}from"./chunk-QGVBCWUY.js";import{b as w,r as v,t as Z}from"./chunk-HHDFN2GK.js";var y=class extends k{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=f.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof f)return e;if(e!=null){let r=new f;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};l([u()],y.prototype,"type",void 0),l([u({readOnly:!0})],y.prototype,"cache",null),l([u({readOnly:!0})],y.prototype,"extent",null),l([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"hasM",void 0),l([u({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],y.prototype,"hasZ",void 0),l([u({type:f,json:{write:!0},value:f.WGS84})],y.prototype,"spatialReference",void 0),l([N("spatialReference")],y.prototype,"readSpatialReference",null),y=l([z("esri.geometry.Geometry")],y);var I=y;function R(e){if(e&&typeof e=="object"&&"type"in e&&e.type==="mesh")throw new Z("Mesh geometries are not supported for this operation")}function fe(e){e.forEach(R)}var U=57.29577951308232,$=.017453292519943;function J(e){return e*U}function V(e){return e*$}function we(e){return e/x.radius}function be(e){return Math.PI/2-2*Math.atan(Math.exp(-e/x.radius))}function C(e){return e.wkid!=null||e.wkt!=null}var G=[0,0];function S(e,t,r,s,o){let i=e,n=o;if(n.spatialReference=r,"x"in i&&"x"in n)[n.x,n.y]=t(i.x,i.y,G,s);else if("xmin"in i&&"xmin"in n)[n.xmin,n.ymin]=t(i.xmin,i.ymin,G,s),[n.xmax,n.ymax]=t(i.xmax,i.ymax,G,s);else if("paths"in i&&"paths"in n||"rings"in i&&"rings"in n){let p="paths"in i?i.paths:i.rings,c=[],a;for(let m=0;m<p.length;m++){let g=p[m];a=[],c.push(a);for(let d=0;d<g.length;d++)a.push(t(g[d][0],g[d][1],[0,0],s)),g[d].length>2&&a[d].push(g[d][2]),g[d].length>3&&a[d].push(g[d][3])}"paths"in n?n.paths=c:n.rings=c}else if("points"in i&&"points"in n){let p=i.points,c=[];for(let a=0;a<p.length;a++)c[a]=t(p[a][0],p[a][1],[0,0],s),p[a].length>2&&c[a].push(p[a][2]),p[a].length>3&&c[a].push(p[a][3]);n.points=c}return o}function ee(e,t){let r=e&&(C(e)?e:e.spatialReference),s=t&&(C(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!s)&&(!!P(s,r)||b(s)&&L(r)||b(r)&&L(s))}function Re(e,t){if(e==null)return null;let r=e.spatialReference,s=t&&(C(t)?t:t.spatialReference);return ee(r,s)?P(r,s)?w(e):b(s)?S(e,M,f.WebMercator,!1,w(e)):L(s)?S(e,_,f.WGS84,!1,w(e)):null:null}function M(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);let s=V(t);return r[0]=V(e)*x.radius,r[1]=x.halfSemiMajorAxis*Math.log((1+Math.sin(s))/(1-Math.sin(s))),r}function _(e,t,r=[0,0],s=!1){if(e===j[0])r[0]=-180;else if(e===j[1])r[0]=180;else{let o=J(e/x.radius);r[0]=s?o:o-360*Math.floor((o+180)/360)}return r[1]=J(Math.PI/2-2*Math.atan(Math.exp(-t/x.radius))),r}function _e(e,t=!1,r=w(e)){return R(e),R(r),S(e,M,f.WebMercator,t,r)}function ve(e,t=!1,r=w(e)){return R(e),R(r),S(e,_,f.WGS84,t,r)}function D(e,t){let r=e.x-t.x,s=e.y-t.y,o=e.z!=null&&t.z!=null?e.z-t.z:0;return Math.sqrt(r*r+s*s+o*o)}function E(e){return H(e,K)?.[0]??null}function F(e){return H(e,K)?.[1]??null}function H({x:e,y:t,spatialReference:r},s=[0,0]){if(r){if(b(r))return _(e,t,s);if(Y(r))return s[0]=e,s[1]=t,s}return null}var K=[0,0];var W,T=[0,0];function Q(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}var h=W=class extends I{static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));let r=e._get("spatialReference");t._set("spatialReference",O.isFrozen(r)?r:r.clone())}constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}normalizeCtorArgs(e,t,r,s,o){let i;if(Array.isArray(e))i=e,o=t,e=i[0],t=i[1],r=i[2],s=i[3];else if(e&&typeof e=="object"){if(i=e,e=i.x!=null?i.x:i.longitude,t=i.y!=null?i.y:i.latitude,r=i.z,s=i.m,(o=i.spatialReference)&&o.declaredClass!=="esri.geometry.SpatialReference"&&(o=new f(o)),i.longitude!=null||i.latitude!=null){if(i.longitude==null)v.getLogger(this).warn(".longitude=","Latitude was defined without longitude");else if(i.latitude==null)v.getLogger(this).warn(".latitude=","Longitude was defined without latitude");else if(!i.declaredClass&&o?.isWebMercator){let p=M(i.longitude,i.latitude,T);e=p[0],t=p[1]}}}else Q(r)?(o=r,r=null):Q(s)&&(o=s,s=null);let n={x:e,y:t};return n.x==null&&n.y!=null?v.getLogger(this).warn(".y=","Y coordinate was defined without an X coordinate"):n.y==null&&n.x!=null&&v.getLogger(this).warn(".x=","X coordinate was defined without a Y coordinate"),o!=null&&(n.spatialReference=o),r!=null&&(n.z=r),s!=null&&(n.m=s),n}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){return F(this)}set latitude(e){let{spatialReference:t,x:r}=this;e!=null&&t&&(t.isWebMercator?this._set("y",M(r,e,T)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){return E(this)}set longitude(e){let{y:t,spatialReference:r}=this;e!=null&&r&&(r.isWebMercator?this._set("x",M(e,t,T)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){let e=new W;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return W.copy(e,this),this}equals(e){if(e==null)return!1;let{x:t,y:r,z:s,m:o,spatialReference:i}=this,{z:n,m:p}=e,{x:c,y:a,spatialReference:m}=e;if(!i.equals(m))if(i.isWebMercator&&m.isWGS84)[c,a]=M(c,a),m=i;else{if(!i.isWGS84||!m.isWebMercator)return!1;[c,a]=_(c,a),m=i}return t===c&&r===a&&s===n&&o===p&&i.wkid===m.wkid}offset(e,t,r){return this.x+=e,this.y+=t,r!=null&&(this.z=(this.z??0)+r),this}normalize(){if(!this.spatialReference)return this;let e=B(this.spatialReference);if(!e)return this;let t=this.x,[r,s]=e.valid,o=2*s,i;return t>s?(i=Math.ceil(Math.abs(t-s)/o),t-=i*o):t<r&&(i=Math.ceil(Math.abs(t-r)/o),t+=i*o),this._set("x",t),this}distance(e){return D(this,e)}toArray(){let e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};l([u({readOnly:!0})],h.prototype,"cache",null),l([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],h.prototype,"hasM",null),l([u({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],h.prototype,"hasZ",null),l([u({type:Number})],h.prototype,"latitude",null),l([u({type:Number})],h.prototype,"longitude",null),l([u({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),q(e=>isNaN(e)?e:X(e))],h.prototype,"x",void 0),l([A("x")],h.prototype,"writeX",null),l([N("x")],h.prototype,"readX",null),l([u({type:Number,json:{write:!0}})],h.prototype,"y",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],h.prototype,"z",void 0),l([u({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],h.prototype,"m",void 0),h=W=l([z("esri.geometry.Point")],h),h.prototype.toJSON.isDefaultToJSON=!0;var Ve=h;export{I as a,R as b,fe as c,we as d,be as e,ee as f,Re as g,M as h,_ as i,_e as j,ve as k,D as l,H as m,Ve as n};
