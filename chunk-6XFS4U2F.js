import{a as c,b as u,c as g,d as o}from"./chunk-7IPIJKWU.js";import{l as Z}from"./chunk-HHDFN2GK.js";var s=class{};function p(t){return t instanceof c?t===s.instance:t?.toString().toLowerCase()==="unknown"}function A(t){return p(t)?s.instance:t}s.instance=new u("Etc/UTC");var m;(function(t){t.TimeZoneNotRecognized="TimeZoneNotRecognized"})(m||(m={}));var N={[m.TimeZoneNotRecognized]:"Timezone identifier has not been recognized."},y=class t extends Error{constructor(e,n){super(Z(N[e],n)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};function a(t,e,n){return t<e?t-e:t>n?t-n:0}function d(t,e,n){return t<e?e:t>n?n:t}var D=class t{constructor(e){this._date=e,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(e=0,n=1,r=1,h=0,l=0,f=0,T=0,k){if(isNaN(e)||isNaN(n)||isNaN(r)||isNaN(h)||isNaN(l)||isNaN(f)||isNaN(T))return null;let S=o.local(e,n).daysInMonth,w=o.fromObject({day:d(r,1,S),year:e,month:d(n,1,12),hour:d(h,0,23),minute:d(l,0,59),second:d(f,0,59),millisecond:d(T,0,999)},{zone:i(k)});return w=w.plus({months:a(n,1,12),days:a(r,1,S),hours:a(h,0,23),minutes:a(l,0,59),seconds:a(f,0,59),milliseconds:a(T,0,999)}),new t(w)}static get systemTimeZoneCanonicalName(){return Intl.DateTimeFormat().resolvedOptions().timeZone??"system"}static arcadeDateAndZoneToArcadeDate(e,n){let r=i(n);return e.isUnknownTimeZone||r===s.instance?t.fromParts(e.year,e.monthJS+1,e.day,e.hour,e.minute,e.second,e.millisecond,r):new t(e._date.setZone(r))}static dateJSToArcadeDate(e){return new t(o.fromJSDate(e,{zone:"system"}))}static dateJSAndZoneToArcadeDate(e,n="system"){let r=i(n);return new t(o.fromJSDate(e,{zone:r}))}static unknownEpochToArcadeDate(e){return new t(o.fromMillis(e,{zone:s.instance}))}static unknownDateJSToArcadeDate(e){return new t(o.fromMillis(e.getTime(),{zone:s.instance}))}static epochToArcadeDate(e,n="system"){let r=i(n);return new t(o.fromMillis(e,{zone:r}))}static dateTimeToArcadeDate(e){return new t(e)}clone(){return new t(this._date)}changeTimeZone(e){let n=i(e);return t.dateTimeToArcadeDate(this._date.setZone(n))}static dateTimeAndZoneToArcadeDate(e,n){let r=i(n);return e.zone===s.instance||r===s.instance?t.fromParts(e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond,r):new t(e.setZone(r))}static nowToArcadeDate(e){let n=i(e);return new t(o.fromJSDate(new Date,{zone:n}))}static nowUTCToArcadeDate(){return new t(o.utc())}get isSystem(){return this.timeZone==="system"||this.timeZone===t.systemTimeZoneCanonicalName}equals(e){return this.isSystem&&e.isSystem?this.toNumber()===e.toNumber():this.isUnknownTimeZone===e.isUnknownTimeZone&&this._date.equals(e._date)}get isUnknownTimeZone(){return this._date.zone===s.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let e=this._date.weekday;return e>6&&(e=0),e}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if(this._date.zone.type==="system")return"system";let e=this.zone;return e.type==="fixed"?e.fixed===0?"UTC":e.formatOffset(0,"short"):e.name}stringify(){return JSON.stringify(this.toJSDate())}plus(e){return new t(this._date.plus(e))}diff(e,n="milliseconds"){return this._date.diff(e._date,n)[n]}toISODate(){return this._date.toISODate()}toISOString(e){return e?this._date.toISO({suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}):this._date.toISO({includeOffset:!this.isUnknownTimeZone})}toISOTime(e,n){return this._date.toISOTime({suppressMilliseconds:e,includeOffset:n&&!this.isUnknownTimeZone})}toFormat(e,n){return this.isUnknownTimeZone&&(e=e.replaceAll("Z","")),this._date.toFormat(e,n)}toJSDate(){return this._date.toJSDate()}toSQLValue(){return this._date.toFormat("yyyy-LL-dd HH:mm:ss")}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new t(this._date.toUTC())}toLocal(){return new t(this._date.toLocal())}toString(){return this.toISOString(!0)}static fromReaderAsTimeStampOffset(e){if(!e)return null;let n=o.fromISO(e,{setZone:!0});return new t(n)}};function i(t,e=!0){if(t instanceof c)return t;if(t.toLowerCase()==="system")return"system";if(t.toLowerCase()==="utc")return"UTC";if(t.toLowerCase()==="unknown")return s.instance;if(/^[+-]?[0-9]{1,2}([:][0-9]{2})?$/.test(t)){let r=g.parseSpecifier("UTC"+(t.startsWith("+")||t.startsWith("-")?"":"+")+t);if(r)return r}let n=u.create(t);if(!n.isValid){if(e)throw new y(m.TimeZoneNotRecognized);return null}return n}export{s as a,p as b,A as c,D as d,i as e};
