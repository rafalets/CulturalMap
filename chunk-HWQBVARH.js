import{d as y,e as x}from"./chunk-EVJH73OA.js";import{s as f,sb as R,t as Z,tb as E,v}from"./chunk-UNRRVLTB.js";import{b as m,tb as P}from"./chunk-JLMESEWM.js";import{a as M}from"./chunk-XPRVY6JT.js";import{h as V}from"./chunk-7N3ZKWML.js";import{i as w}from"./chunk-QDTU3MWT.js";import{j as C}from"./chunk-I4M2OT5W.js";import{n as g}from"./chunk-NTVLK3P2.js";import{a as p}from"./chunk-VTHXE323.js";var r="_gxVersion",d=2,G=1;function Q(t){return Array.isArray(t)?t[0].spatialReference:t.spatialReference}function W(t){switch(t.type){case"point":return Y(t);case"multipoint":return X(t);case"polyline":return I(t);case"polygon":return k(t);case"extent":return z(t);default:throw new Error(`Unsupported geometry type: ${t.type}`)}}function z(t){if(!t.getCacheValue(r)){let e=new Z;e.setCoords(t.xmin,t.ymin,t.xmax,t.ymax),t.hasM&&e.setInterval(d,0,t.mmin,t.mmax),t.hasZ&&e.setInterval(G,0,t.zmin,t.zmax),t.setCacheValue(r,e)}return t.getCacheValue(r)}function X(t){if(!t.getCacheValue(r)){let e=new v,n=new f,a=t.points,s=t.hasM,o=t.hasZ,i=o?3:2;for(let u=0,l=a.length;u<l;u++){let c=a[u];n.setXYCoords(c[0],c[1]),o&&n.setZ(c[2]??0),s&&n.setM(c[i]??NaN),e.add(n)}t.setCacheValue(r,e)}return t.getCacheValue(r)}function Y(t){if(!t.getCacheValue(r)){let e=new f;e.setXYCoords(t.x,t.y),t.hasM&&e.setM(t.m),t.hasZ&&e.setZ(t.z),t.setCacheValue(r,e)}return t.getCacheValue(r)}function k(t){if(!t.getCacheValue(r)){let{curveRings:e,hasM:n,hasZ:a,rings:s}=t,o=y({curveRings:e,hasM:n,hasZ:a,rings:s});t.setCacheValue(r,o)}return t.getCacheValue(r)}function I(t){if(!t.getCacheValue(r)){let{curvePaths:e,hasM:n,hasZ:a,paths:s}=t,o=y({curvePaths:e,hasM:n,hasZ:a,paths:s});t.setCacheValue(r,o)}return t.getCacheValue(r)}function tt(t){if(t.wkid)return R(t.wkid);let e=t.wkt2||t.wkt;return e?E(e):null}function et(t,e){if(t)switch(t.getGeometryType()){case m.enumPoint:return D(t,e);case m.enumEnvelope:return N(t,e);case m.enumMultiPoint:return S(t,e);case m.enumPolyline:return A(t,e);case m.enumPolygon:return q(t,e)}return null}function N(t,e){if(t.isEmpty())return null;let n=new C({xmin:t.getXMin(),ymin:t.getYMin(),xmax:t.getXMax(),ymax:t.getYMax(),spatialReference:e}),a=t.getDescription();if(a.hasM()){let s=t.queryInterval(d,0);n.mmin=s.vmin,n.mmax=s.vmax}if(a.hasZ()){let s=t.queryInterval(G,0);n.zmin=s.vmin,n.zmax=s.vmax}return n.setCacheValue(r,t),n}function S(t,e){if(t.isEmpty())return null;let n=t.getDescription(),a=n.hasM(),s=n.hasZ(),o=[],i=new f;for(let l=0,c=t.getPointCount();l<c;l++){t.getPointByVal(l,i);let h=[i.getX(),i.getY()];s&&h.push(i.getZ()),a&&h.push(i.getM()),o.push(h)}let u=new M({hasM:a,hasZ:s,points:o,spatialReference:e});return u.setCacheValue(r,t),u}function D(t,e){if(t instanceof P)return new g({x:t.x,y:t.y,spatialReference:e});if(t.isEmpty())return null;let n=new g({x:t.getX(),y:t.getY(),spatialReference:e}),a=t.getDescription();return a.hasM()&&(n.m=t.getM()),a.hasZ()&&(n.z=t.getZ()),n.setCacheValue(r,t),n}function q(t,e){if(t.isEmpty())return null;let n=V.fromJSON(p({spatialReference:e},x(t,null)));return n.setCacheValue(r,t),n}function A(t,e){if(t.isEmpty())return null;let n=w.fromJSON(p({spatialReference:e},x(t,null)));return n.setCacheValue(r,t),n}export{Q as a,W as b,z as c,X as d,Y as e,k as f,I as g,tt as h,et as i,N as j,S as k,D as l,q as m,A as n};
