import{a as v}from"./chunk-WNSGKHQ6.js";import{j as z}from"./chunk-I4M2OT5W.js";import{n as O}from"./chunk-NTVLK3P2.js";import{a as g}from"./chunk-HD52PWPC.js";import{a as T}from"./chunk-EIPVFA6F.js";import{f as _}from"./chunk-7EG726PT.js";import{d as c}from"./chunk-C7INQGWT.js";import{H as y}from"./chunk-WMHJC7XF.js";import{a as f}from"./chunk-QGVBCWUY.js";var d=class extends _{get affectsPixelSize(){return!1}forwardTransform(e){return e}inverseTransform(e){return e}};f([c()],d.prototype,"affectsPixelSize",null),f([c({json:{write:!0}})],d.prototype,"spatialReference",void 0),d=f([y("esri.layers.support.rasterTransforms.BaseRasterTransform")],d);var w=d;var R;function S(e,i,s){let{x:t,y:r}=i;if(s<2)return{x:e[0]+t*e[2]+r*e[4],y:e[1]+t*e[3]+r*e[5]};if(s===2){let l=t*t,P=r*r,Y=t*r;return{x:e[0]+t*e[2]+r*e[4]+l*e[6]+Y*e[8]+P*e[10],y:e[1]+t*e[3]+r*e[5]+l*e[7]+Y*e[9]+P*e[11]}}let o=t*t,p=r*r,u=t*r,n=o*t,h=o*r,x=t*p,a=r*p;return{x:e[0]+t*e[2]+r*e[4]+o*e[6]+u*e[8]+p*e[10]+n*e[12]+h*e[14]+x*e[16]+a*e[18],y:e[1]+t*e[3]+r*e[5]+o*e[7]+u*e[9]+p*e[11]+n*e[13]+h*e[15]+x*e[17]+a*e[19]}}function F(e,i,s){let{xmin:t,ymin:r,xmax:o,ymax:p,spatialReference:u}=i,n=[];if(s<2)n.push({x:t,y:p}),n.push({x:o,y:p}),n.push({x:t,y:r}),n.push({x:o,y:r});else{let a=10;for(let l=0;l<a;l++)n.push({x:t,y:r+(p-r)*l/(a-1)}),n.push({x:o,y:r+(p-r)*l/(a-1)});a=8;for(let l=1;l<=a;l++)n.push({x:t+(o-t)*l/a,y:r}),n.push({x:t+(o-t)*l/a,y:p})}n=n.map(a=>S(e,a,s));let h=n.map(a=>a.x),x=n.map(a=>a.y);return new z({xmin:Math.min.apply(null,h),xmax:Math.max.apply(null,h),ymin:Math.min.apply(null,x),ymax:Math.max.apply(null,x),spatialReference:u})}function I(e){let[i,s,t,r,o,p]=e,u=t*p-o*r,n=o*r-t*p;return[(o*s-i*p)/u,(t*s-i*r)/n,p/u,r/n,-o/u,-t/n]}var m=R=class extends w{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(e,i){let{coeffX:s,coeffY:t}=i;if(!s?.length||!t?.length||s.length!==t.length)return null;let r=[];for(let o=0;o<s.length;o++)r.push(s[o]),r.push(t[o]);return r}writeForwardCoefficients(e,i,s){let t=[],r=[];for(let o=0;o<e?.length;o++)o%2==0?t.push(e[o]):r.push(e[o]);i.coeffX=t,i.coeffY=r}get inverseCoefficients(){let e=this._get("inverseCoefficients"),i=this._get("forwardCoefficients");return!e&&i&&this.polynomialOrder<2&&(e=I(i)),e}set inverseCoefficients(e){this._set("inverseCoefficients",e)}readInverseCoefficients(e,i){let{inverseCoeffX:s,inverseCoeffY:t}=i;if(!s?.length||!t?.length||s.length!==t.length)return null;let r=[];for(let o=0;o<s.length;o++)r.push(s[o]),r.push(t[o]);return r}writeInverseCoefficients(e,i,s){let t=[],r=[];for(let o=0;o<e?.length;o++)o%2==0?t.push(e[o]):r.push(e[o]);i.inverseCoeffX=t,i.inverseCoeffY=r}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(e){if(e.type==="point"){let i=S(this.forwardCoefficients,e,this.polynomialOrder);return new O({x:i.x,y:i.y,spatialReference:e.spatialReference})}return F(this.forwardCoefficients,e,this.polynomialOrder)}inverseTransform(e){if(e.type==="point"){let i=S(this.inverseCoefficients,e,this.polynomialOrder);return new O({x:i.x,y:i.y,spatialReference:e.spatialReference})}return F(this.inverseCoefficients,e,this.polynomialOrder)}clone(){return new R({polynomialOrder:this.polynomialOrder,forwardCoefficients:this.forwardCoefficients?[...this.forwardCoefficients]:null,inverseCoefficients:this.inverseCoefficients?[...this.inverseCoefficients]:null})}};f([c({json:{write:!0}})],m.prototype,"polynomialOrder",void 0),f([c()],m.prototype,"forwardCoefficients",void 0),f([g("forwardCoefficients",["coeffX","coeffY"])],m.prototype,"readForwardCoefficients",null),f([T("forwardCoefficients")],m.prototype,"writeForwardCoefficients",null),f([c({json:{write:!0}})],m.prototype,"inverseCoefficients",null),f([g("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],m.prototype,"readInverseCoefficients",null),f([T("inverseCoefficients")],m.prototype,"writeInverseCoefficients",null),f([c()],m.prototype,"affectsPixelSize",null),f([v({PolynomialXform:"polynomial"})],m.prototype,"type",void 0),m=R=f([y("esri.layers.support.rasterTransforms.PolynomialTransform")],m);var ee=m;var X,C=X=class extends w{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(e){return(e=e.clone()).type==="point"?(e.x>180+this.tolerance&&(e.x-=360),e):(e.xmin>=180-this.tolerance?(e.xmax-=360,e.xmin-=360):e.xmax>180+this.tolerance&&(e.xmin=-180,e.xmax=180),e)}inverseTransform(e){return(e=e.clone()).type==="point"?(e.x<-this.tolerance&&(e.x+=360),e):(e.xmin<-this.tolerance&&(e.xmin+=360,e.xmax+=360),e)}clone(){return new X({tolerance:this.tolerance})}};f([v({GCSShiftXform:"gcs-shift"})],C.prototype,"type",void 0),f([c()],C.prototype,"tolerance",void 0),C=X=f([y("esri.layers.support.rasterTransforms.GCSShiftTransform")],C);var me=C;export{w as a,ee as b,me as c};
