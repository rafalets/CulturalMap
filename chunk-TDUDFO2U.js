import{f as v,g as Y,h as _,i as $,j as T}from"./chunk-TILBGQXL.js";import{a as V}from"./chunk-6AEGO2CB.js";import{a as B}from"./chunk-2U6QECGD.js";import{a as u}from"./chunk-EPMRM7KB.js";import{c as C}from"./chunk-4RDCETCH.js";import{A as G,B as z,C as H,D as y,J as E,M as A,O as X,P as k,U as f,V as M,W as Z,X as q,ga as L,p as x,u as D,z as P}from"./chunk-MARRSUOJ.js";import{a as o,b as s}from"./chunk-LWVUOW7N.js";import{a as W}from"./chunk-7EKEC7JO.js";import{f as p}from"./chunk-LNVVFNTC.js";import{c as K}from"./chunk-AZS4Q4RE.js";import{c as O}from"./chunk-X5AA4JDN.js";import{f as J}from"./chunk-J372WZPB.js";import{a as Q}from"./chunk-XPRVY6JT.js";import{h as R}from"./chunk-7N3ZKWML.js";import{i as j}from"./chunk-QDTU3MWT.js";import{j as b}from"./chunk-I4M2OT5W.js";import{a as w,n as F}from"./chunk-NTVLK3P2.js";import{f as h}from"./chunk-VTHXE323.js";function g(i){if(i==null)return i;switch(typeof i){case"string":case"number":return i;default:throw new s(null,o.InvalidParameter,null)}}function gn(i){i.mode==="async"&&(i.functions.disjoint=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]===null||n[1]===null||u("disjoint",[n[0].toJSON(),n[1].toJSON()])))},i.functions.intersects=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]!==null&&n[1]!==null&&u("intersects",[n[0].toJSON(),n[1].toJSON()])))},i.functions.touches=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]!==null&&n[1]!==null&&u("touches",[n[0].toJSON(),n[1].toJSON()])))},i.functions.crosses=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]!==null&&n[1]!==null&&u("crosses",[n[0].toJSON(),n[1].toJSON()])))},i.functions.within=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]!==null&&n[1]!==null&&u("within",[n[0].toJSON(),n[1].toJSON()])))},i.functions.contains=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]!==null&&n[1]!==null&&u("contains",[n[0].toJSON(),n[1].toJSON()])))},i.functions.overlaps=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(n=f(n),v(n,t,e),n[0]!==null&&n[1]!==null&&u("overlaps",[n[0].toJSON(),n[1].toJSON()])))},i.functions.equals=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>(y(n,2,2,t,e),n[0]===n[1]||(n[0]instanceof w&&n[1]instanceof w?u("equals",[n[0].toJSON(),n[1].toJSON()]):(G(n[0])&&G(n[1])||!!(H(n[0])&&H(n[1])||z(n[0])&&z(n[1])))&&n[0].equals(n[1]))))},i.functions.relate=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>{if(n=f(n),y(n,3,3,t,e),n[0]instanceof w&&n[1]instanceof w)return u("relate",[n[0].toJSON(),n[1].toJSON(),E(n[2])]);if(n[0]instanceof w&&n[1]===null||n[1]instanceof w&&n[0]===null||n[0]===null&&n[1]===null)return!1;throw new s(t,o.InvalidParameter,e)})},i.functions.intersection=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){return n=f(n),v(n,t,e),n[0]===null||n[1]===null?null:p(yield u("intersection",[n[0].toJSON(),n[1].toJSON()]))}))},i.functions.union=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if((n=f(n)).length===0)throw new s(t,o.WrongNumberOfParameters,e);let r=[];if(n.length===1)if(J(n[0])){for(let a of f(n[0]))if(a!==null){if(!(a instanceof w))throw new s(t,o.InvalidParameter,e);r.push(a.toJSON())}}else{if(!P(n[0])){if(n[0]instanceof w)return k(O(n[0]),t.spatialReference);if(n[0]===null)return null;throw new s(t,o.InvalidParameter,e)}for(let a of f(n[0].toArray()))if(a!==null){if(!(a instanceof w))throw new s(t,o.InvalidParameter,e);r.push(a.toJSON())}}else for(let a of n)if(a!==null){if(!(a instanceof w))throw new s(t,o.InvalidParameter,e);r.push(a.toJSON())}return r.length===0?null:p(yield u("union",[r]))}))},i.functions.difference=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){return n=f(n),v(n,t,e),n[0]===null?null:n[1]===null?O(n[0]):p(yield u("difference",[n[0].toJSON(),n[1].toJSON()]))}))},i.functions.symmetricdifference=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){return n=f(n),v(n,t,e),n[0]===null&&n[1]===null?null:n[0]===null?O(n[1]):n[1]===null?O(n[0]):p(yield u("symmetricDifference",[n[0].toJSON(),n[1].toJSON()]))}))},i.functions.clip=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,2,t,e),!(n[1]instanceof b)&&n[1]!==null)throw new s(t,o.InvalidParameter,e);if(n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);return n[1]===null?null:p(yield u("clip",[n[0].toJSON(),n[1].toJSON()]))}))},i.functions.cut=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,2,t,e),!(n[1]instanceof j)&&n[1]!==null)throw new s(t,o.InvalidParameter,e);if(n[0]===null)return[];if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);return n[1]===null?[O(n[0])]:(yield u("cut",[n[0].toJSON(),n[1].toJSON()])).map(r=>p(r))}))},i.functions.area=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(y(n,1,2,t,e),n=f(n),D(n[0])){let a=yield n[0].sumArea(g(n[1]),!1,t.abortSignal);if(t.abortSignal.aborted)throw new s(t,o.Cancelled,e);return a}let r=n[0];if((J(r)||P(r))&&(r=M(n[0],t.spatialReference)),r===null)return 0;if(!(r instanceof w))throw new s(t,o.InvalidParameter,e);return u("area",[r.toJSON(),g(n[1])])}))},i.functions.areageodetic=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(y(n,1,2,t,e),n=f(n),D(n[0])){let a=yield n[0].sumArea(g(n[1]),!0,t.abortSignal);if(t.abortSignal.aborted)throw new s(t,o.Cancelled,e);return a}let r=n[0];if((J(n[0])||P(n[0]))&&(r=M(n[0],t.spatialReference)),r===null)return 0;if(!(r instanceof w))throw new s(t,o.InvalidParameter,e);return u("geodeticArea",[r.toJSON(),g(n[1])])}))},i.functions.length=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(y(n,1,2,t,e),n=f(n),D(n[0])){let a=yield n[0].sumLength(g(n[1]),!1,t.abortSignal);if(t.abortSignal.aborted)throw new s(t,o.Cancelled,e);return a}let r=n[0];if((J(n[0])||P(n[0]))&&(r=Z(n[0],t.spatialReference)),r===null)return 0;if(!(r instanceof w))throw new s(t,o.InvalidParameter,e);return u("length",[r.toJSON(),g(n[1])])}))},i.functions.length3d=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(y(n,1,2,t,e),(n=f(n))[0]===null)return 0;let r=n[0];if((J(n[0])||P(n[0]))&&(r=Z(n[0],t.spatialReference)),r===null)return 0;if(!(r instanceof w))throw new s(t,o.InvalidParameter,e);if(r.hasZ===!0){let{convertFromSpatialReferenceUnit:a,toLengthUnit:m}=yield import("./chunk-JBBRVHHF.js"),d=Y(r);return a(r.spatialReference,m(n[1]),d)}return u("length",[r.toJSON(),g(n[1])])}))},i.functions.lengthgeodetic=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(y(n,1,2,t,e),n=f(n),D(n[0])){let a=yield n[0].sumLength(g(n[1]),!0,t.abortSignal);if(t.abortSignal.aborted)throw new s(t,o.Cancelled,e);return a}let r=n[0];if((J(n[0])||P(n[0]))&&(r=Z(n[0],t.spatialReference)),r===null)return 0;if(!(r instanceof w))throw new s(t,o.InvalidParameter,e);return u("geodeticLength",[r.toJSON(),g(n[1])])}))},i.functions.distance=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){n=f(n),y(n,2,3,t,e);let r=n[0];if((J(n[0])||P(n[0]))&&(r=q(n[0],t.spatialReference)),!(r instanceof w))throw new s(t,o.InvalidParameter,e);let a=n[1];if((J(n[1])||P(n[1]))&&(a=q(n[1],t.spatialReference)),!(a instanceof w))throw new s(t,o.InvalidParameter,e);return u("distance",[r.toJSON(),a.toJSON(),g(n[2])])}))},i.functions.distancegeodetic=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){n=f(n),y(n,2,3,t,e);let r=n[0];if(!(r instanceof F))throw new s(t,o.InvalidParameter,e);let a=n[1];if(!(a instanceof F))throw new s(t,o.InvalidParameter,e);let m=new j({paths:[],spatialReference:r.spatialReference});return m.addPath([r,a]),u("geodeticLength",[m.toJSON(),g(n[2])])}))},i.functions.densify=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,3,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);let r=A(n[1]);if(isNaN(r))throw new s(t,o.InvalidParameter,e);if(r<=0)throw new s(t,o.InvalidParameter,e);switch(n[0].type){case"polygon":case"polyline":case"extent":return p(yield u("densify",[n[0].toJSON(),r,g(n[2])]));default:return n[0]}}))},i.functions.densifygeodetic=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,3,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);let r=A(n[1]);if(isNaN(r))throw new s(t,o.InvalidParameter,e);if(r<=0)throw new s(t,o.InvalidParameter,e);switch(n[0].type){case"polygon":case"polyline":case"extent":return p(yield u("geodeticDensify",[n[0].toJSON(),r,g(n[2])]));default:return n[0]}}))},i.functions.generalize=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,4,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);let r=A(n[1]);if(isNaN(r))throw new s(t,o.InvalidParameter,e);let a=X(x(n[2],!0));return p(yield u("generalize",[n[0].toJSON(),r,g(n[3]),{removeDegenerateParts:a}]))}))},i.functions.buffer=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,3,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);let r=A(n[1]);if(isNaN(r))throw new s(t,o.InvalidParameter,e);return r===0?O(n[0]):p(yield u("buffer",[n[0].toJSON(),r,g(n[2])]))}))},i.functions.buffergeodetic=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,3,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);let r=A(n[1]);if(isNaN(r))throw new s(t,o.InvalidParameter,e);return r===0?O(n[0]):p(yield u("geodesicBuffer",[n[0].toJSON(),r,g(n[2])]))}))},i.functions.offset=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,6,t,e),n[0]===null)return null;if(!(n[0]instanceof R||n[0]instanceof j))throw new s(t,o.InvalidParameter,e);let r=A(n[1]);if(isNaN(r))throw new s(t,o.InvalidParameter,e);let a=E(n[3]??"round").toLowerCase(),m;switch(a){case"round":case"bevel":case"miter":case"square":m=a;break;default:m="round"}let d=A(x(n[4],10));if(isNaN(d))throw new s(t,o.InvalidParameter,e);let N=A(x(n[5],0));if(isNaN(N))throw new s(t,o.InvalidParameter,e);return p(yield u("offset",[n[0].toJSON(),r,g(n[2]),{joins:m,miterLimit:d,flattenError:N}]))}))},i.functions.rotate=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,3,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);let r=n[0]instanceof b?R.fromExtent(n[0]):n[0],a=A(n[1]);if(isNaN(a))throw new s(t,o.InvalidParameter,e);let m=x(n[2],null);if(m===null){let d=r.type==="point"?r:r.extent?.center;return p(yield u("rotate",[r.toJSON(),a,d?.x,d?.y]))}if(m instanceof F)return p(yield u("rotate",[r.toJSON(),a,m.x,m.y]));throw new s(t,o.InvalidParameter,e)}))},i.functions.centroid=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,1,2,t,e),n[0]===null)return null;let r=E(n[1]??"geometric").toLowerCase();if(r!=="geometric"&&r!=="labelpoint")throw new s(t,o.InvalidParameter,e);let a=n[0];if((J(n[0])||P(n[0]))&&(a=r==="geometric"?q(n[0],t.spatialReference):M(n[0],t.spatialReference),a===null))return null;if(!(a instanceof w))throw new s(t,o.InvalidParameter,e);return p(r==="geometric"?yield u("centroid",[a.toJSON()]):yield u("labelPoint",[a.toJSON()]))}))},i.functions.measuretocoordinate=function(t,e){return i.standardFunctionAsync(t,e,_)},i.functions.pointtocoordinate=function(t,e){return i.standardFunctionAsync(t,e,$)},i.functions.distancetocoordinate=function(t,e){return i.standardFunctionAsync(t,e,T)},i.functions.multiparttosinglepart=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,1,1,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);if(n[0]instanceof F)return[k(O(n[0]),t.spatialReference)];if(n[0]instanceof b)return[k(O(n[0]),t.spatialReference)];let r=p(yield u("simplify",[n[0].toJSON()]));if(r instanceof R){let a=[],m=[];for(let d=0;d<r.rings.length;d++)if(r.isClockwise(r.rings[d])){let N=p({rings:[r.rings[d]],hasZ:r.hasZ===!0,hasM:r.hasM===!0,spatialReference:r.spatialReference.toJSON()});a.push(N)}else m.push({ring:r.rings[d],pt:r.getPoint(d,0)});for(let d=0;d<m.length;d++)for(let N=0;N<a.length;N++)if(a[N].contains(m[d].pt)){a[N].addRing(m[d].ring);break}return a}if(r instanceof j){let a=[];for(let m=0;m<r.paths.length;m++){let d=p({paths:[r.paths[m]],hasZ:r.hasZ===!0,hasM:r.hasM===!0,spatialReference:r.spatialReference.toJSON()});a.push(d)}return a}if(n[0]instanceof Q){let a=[],m=k(O(n[0]),t.spatialReference);for(let d=0;d<m.points.length;d++)a.push(m.getPoint(d));return a}return null}))},i.functions.issimple=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>{if(n=f(n),y(n,1,1,t,e),n[0]===null)return!0;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);return u("isSimple",[n[0].toJSON()])})},i.functions.simplify=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,1,1,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);return p(yield u("simplify",[n[0].toJSON()]))}))},i.functions.convexhull=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,1,1,t,e),n[0]===null)return null;if(!(n[0]instanceof w))throw new s(t,o.InvalidParameter,e);return p(yield u("convexHull",[n[0].toJSON()]))}))},i.functions.getuser=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){y(n,0,2,t,e);let r=x(n[1],""),a=r===!0;if(r=r===!0||r===!1?"":E(r),n.length===0||n[0]instanceof B){let d;d=t.services?.portal?t.services.portal:K.getDefault(),n.length>0&&(d=V(n[0],d));let N=yield W(d,r,a);if(N){let I=JSON.parse(JSON.stringify(N));for(let S of["lastLogin","created","modified"])I[S]!==void 0&&I[S]!==null&&(I[S]=new Date(I[S]));return C.convertObjectToArcadeDictionary(I,L(t))}return null}let m=null;if(D(n[0])&&(m=n[0]),m){if(a=!1,r)return null;yield m.load();let d=yield m.getOwningSystemUrl();if(!d){if(!r){let S=yield m.getIdentityUser();return S?C.convertObjectToArcadeDictionary({username:S},L(t)):null}return null}let N;N=t.services?.portal?t.services.portal:K.getDefault(),N=V(new B(d),N);let I=yield W(N,r,a);if(I){let S=JSON.parse(JSON.stringify(I));for(let U of["lastLogin","created","modified"])S[U]!==void 0&&S[U]!==null&&(S[U]=new Date(S[U]));return C.convertObjectToArcadeDictionary(S,L(t))}return null}throw new s(t,o.InvalidParameter,e)}))},i.functions.nearestcoordinate=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,2,t,e),!(n[0]instanceof w||n[0]===null))throw new s(t,o.InvalidParameter,e);if(!(n[1]instanceof F||n[1]===null))throw new s(t,o.InvalidParameter,e);if(n[0]===null||n[1]===null)return null;let r=n[0]instanceof b?R.fromExtent(n[0]):n[0],a=yield u("getNearestCoordinate",[r.toJSON(),n[1].toJSON(),{calculateLeftRightSide:!0}]);return a===null?null:C.convertObjectToArcadeDictionary({coordinate:p(a.coordinate),distance:a.distance,sideOfLine:a.distance===0?"straddle":a.rightSide?"right":"left"},L(t),!1,!0)}))},i.functions.nearestvertex=function(t,e){return i.standardFunctionAsync(t,e,(l,c,n)=>h(this,null,function*(){if(n=f(n),y(n,2,2,t,e),!(n[0]instanceof w||n[0]===null))throw new s(t,o.InvalidParameter,e);if(!(n[1]instanceof F||n[1]===null))throw new s(t,o.InvalidParameter,e);if(n[0]===null||n[1]===null)return null;let r=n[0]instanceof b?R.fromExtent(n[0]):n[0],a=yield u("getNearestVertex",[r.toJSON(),n[1].toJSON()]);return a===null?null:C.convertObjectToArcadeDictionary({coordinate:p(a.coordinate),distance:a.distance,sideOfLine:a.distance===0?"straddle":a.rightSide?"right":"left"},L(t),!1,!0)}))})}export{gn as a};
