import{C as c,O as s}from"./chunk-D2LVMNOU.js";import{t as h}from"./chunk-HHDFN2GK.js";import{f as n}from"./chunk-VTHXE323.js";var f=class{constructor(i,l=0,e=i.lods[i.lods.length-1].level){this.tileInfo=i,this.minLOD=l,this.maxLOD=e,i.lodAt(l)||(this.minLOD=i.lods[0].level),i.lodAt(e)||(this.maxLOD=i.lods[i.lods.length-1].level)}get effectiveMinLOD(){return this.minLOD??this.tileInfo.lods[0].level}get effectiveMaxLOD(){return this.maxLOD??this.tileInfo.lods[this.tileInfo.lods.length-1].level}getAvailability(i,l,e){let t=this.tileInfo?.lodAt(i);return!t||i<this.minLOD||i>this.maxLOD?"unavailable":t.cols&&t.rows?e>=t.cols[0]&&e<=t.cols[1]&&l>=t.rows[0]&&l<=t.rows[1]?"unknown":"unavailable":"unknown"}fetchAvailability(i,l,e,t){return n(this,null,function*(){yield s(t);let a=this.getAvailability(i,l,e);if(a==="unavailable")throw new h("tile-map:tile-unavailable","Tile is not available",{level:i,row:l,col:e});return a})}fetchAvailabilityUpsample(i,l,e,t,a){return n(this,null,function*(){yield s(a),t.level=i,t.row=l,t.col=e;let r=this.tileInfo;return r.updateTileInfo(t),this.fetchAvailability(i,l,e,a).catch(o=>{if(c(o))throw o;if(r.upsampleTile(t))return this.fetchAvailabilityUpsample(t.level,t.row,t.col,t,a);throw o})})}};export{f as a};
