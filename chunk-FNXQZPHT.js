import{d as v}from"./chunk-D2LVMNOU.js";import{b as m,r as _}from"./chunk-HHDFN2GK.js";function b(e){return e.__accessor__??null}function H(e,t){return e?.metadata?.[t]!=null}function V(e,t,s){return s?h(e,t,{policy:s,path:""}):h(e,t,null)}function h(e,t,s){return t?Object.keys(t).reduce((n,a)=>{let r=a,c=null,T="merge";if(s&&(c=s.path?`${s.path}.${a}`:a,T=s.policy(c)),T==="replace"||T==="replace-arrays"&&Array.isArray(n[r]))return n[r]=t[r],n;if(n[r]===void 0)return n[r]=m(t[r]),n;let o=n[r],i=t[r];if(o===i)return n;if(Array.isArray(i)||Array.isArray(n))o=o?Array.isArray(o)?n[r]=o.slice():n[r]=[o]:n[r]=[],i&&(Array.isArray(i)||(i=[i]),i.forEach(p=>{o.includes(p)||o.push(p)}));else if(i&&typeof i=="object")if(s){let p=s.path;s.path=c,n[r]=h(o,i,s),s.path=p}else n[r]=h(o,i,null);else n.hasOwnProperty(a)&&!t.hasOwnProperty(a)||(n[r]=i);return n},e||{}):e}function E(e){return Array.isArray(e)?e:e.split(".")}function D(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function P(e){if(Array.isArray(e)){let t=[];for(let s of e)t.push(...D(s));return t}return D(e)}function $(e,t,s,n){let a=P(t);if(a.length!==1){let r=a.map(c=>n(e,c,s));return v(r)}return n(e,a[0],s)}var l;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(l||(l={}));var d=class{constructor(t){this.accessed=void 0,this._handles=void 0,this._observer=t}destroy(){this.accessed?.clear(),this.clear()}onAccessed(t){this._observer!=null&&t!==this._observer&&(this.accessed==null&&(this.accessed=new Set),this.accessed.add(t))}onTrackingEnd(){this._observer!=null&&(this.clear(),this.accessed!=null&&(this._handles==null&&(this._handles=[]),this.accessed.forEach(t=>{this._handles.push(t.observe(this._observer))}),this.accessed.clear()))}clear(){if(this._handles!=null){for(let t=0;t<this._handles.length;++t)this._handles[t].remove();this._handles.length=0}}};var A=new d,u=[],f=A;function O(e){f.onAccessed(e)}var g=!1,y=!1;function w(e,t,s){if(g)return k(e,t,s);let n=null;return I(e),n=t.call(s),N(),n}function Q(e,t){return w(A,e,t)}function k(e,t,s){let n=g;g=!0,I(e);let a=null;try{a=t.call(s)}catch(r){y&&_.getLogger("esri.core.accessorSupport.tracking").error(r)}return N(),g=n,a}function I(e){f=e,u.push(e)}function N(){let e=u.length;if(e>1){let t=u.pop();f=u[e-2],t.onTrackingEnd()}else if(e===1){let t=u.pop();f=A,t.onTrackingEnd()}else f=A}function z(e,t){if(t.flags&l.DepTrackingInitialized)return;t.flags|=l.DepTrackingInitialized;let s=y;y=!1,t.flags&l.AutoTracked?k(t.trackingTarget,t.metadata.get,e):C(e,t),y=s}var j=[];function C(e,t){t.flags&l.ExplicitlyTracking||(t.flags|=l.ExplicitlyTracking,k(t.trackingTarget,()=>{let s=t.metadata.dependsOn||j;for(let n of s)if(typeof n!="string"||n.includes(".")){let a=E(n);for(let r=0,c=e;r<a.length&&c!=null&&typeof c=="object";++r)c=x(c,a[r],r!==a.length-1)}else x(e,n,!1)}),t.flags&=~l.ExplicitlyTracking)}function x(e,t,s){let n=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){let r=parseInt(n,10);if(!isNaN(r))return Array.isArray(e)?e[r]:e.at(r)}let a=b(e);if(a){let r=a.propertiesByName.get(n);r&&(O(r),z(e,r))}return s?e[n]:void 0}export{b as a,H as b,V as c,E as d,$ as e,l as f,d as g,O as h,w as i,Q as j,z as k,C as l};
