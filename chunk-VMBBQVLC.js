import{j as E,k as h,z as v}from"./chunk-7FZF7T7C.js";import{f as b}from"./chunk-VTHXE323.js";var p="calciteInternalLabelClick",m="calciteInternalLabelConnected",f="calciteInternalLabelDisconnected",g="calcite-label",o=new WeakMap,r=new WeakMap,c=new WeakMap,d=new WeakMap,s=new Set,C=e=>{let{id:t}=e,n=t&&E(e,{selector:`${g}[for="${t}"]`});if(n)return n;let l=h(e,g);return!l||I(l,e)?null:l};function I(e,t){let n,l="custom-element-ancestor-check",i=a=>{a.stopImmediatePropagation();let u=a.composedPath();n=u.slice(u.indexOf(t),u.indexOf(e))};return e.addEventListener(l,i,{once:!0}),t.dispatchEvent(new CustomEvent(l,{composed:!0,bubbles:!0})),e.removeEventListener(l,i),n.filter(a=>a!==t&&a!==e).filter(a=>a.tagName?.includes("-")).length>0}function k(e){if(!e)return;let t=C(e.el);if(r.has(t)&&t===e.labelEl||!t&&s.has(e))return;let n=x.bind(e);if(t){e.labelEl=t;let l=o.get(t)||[];l.push(e),o.set(t,l.sort(w)),r.has(e.labelEl)||(r.set(e.labelEl,L),e.labelEl.addEventListener(p,L)),s.delete(e),document.removeEventListener(m,c.get(e)),d.set(e,n),document.addEventListener(f,n)}else s.has(e)||(n(),document.removeEventListener(f,d.get(e)))}function O(e){if(!e||(s.delete(e),document.removeEventListener(m,c.get(e)),document.removeEventListener(f,d.get(e)),c.delete(e),d.delete(e),!e.labelEl))return;let t=o.get(e.labelEl);t.length===1&&(e.labelEl.removeEventListener(p,r.get(e.labelEl)),r.delete(e.labelEl)),o.set(e.labelEl,t.filter(n=>n!==e).sort(w)),e.labelEl=null}function w(e,t){return v(e.el,t.el)?-1:1}function W(e){return e.label||e.labelEl?.textContent?.trim()||""}function L(e){let t=e.detail.sourceEvent.target,n=o.get(this),l=n.find(a=>a.el===t);if(n.includes(l))return;let i=n[0];i.disabled||i.onLabelClick(e)}function M(){s.has(this)&&k(this)}function x(){s.add(this);let e=c.get(this)||M.bind(this);c.set(this,e),document.addEventListener(m,e)}function D(e){return b(this,null,function*(){if(yield e.componentOnReady(),o.has(e))return;let t=e.ownerDocument?.getElementById(e.for);t&&requestAnimationFrame(()=>{for(let n of s)if(n.el===t){k(n);break}})})}export{m as a,f as b,k as c,O as d,W as e,D as f};
