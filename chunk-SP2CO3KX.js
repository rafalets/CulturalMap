function D(n){return n?{originPosition:n.originPosition==="upper-left"?"upperLeft":n.originPosition==="lower-left"?"lowerLeft":n.originPosition,scale:n.tolerance?[n.tolerance,n.tolerance,1,1]:[1,1,1,1],translate:n.extent!=null?[n.extent.xmin,n.extent.ymax,n.extent.zmin??0,n.extent.mmin??0]:[0,0,0,0]}:null}function T(n){return n.originPosition==="lowerLeft"&&n.scale.length===4&&n.translate.length===4}function x(n){if(T(n))return n;let{originPosition:r,scale:t,translate:s}=n,a=t[0]??1,o=t[1]??1;return{originPosition:"lowerLeft",scale:[a,r==="lowerLeft"?o:-o,t[2]??1,t[3]??1],translate:[s[0]??0,s[1]??0,s[2]??0,s[3]??0]}}function g({scale:n,translate:r},t){return Math.round((t-r[0])/n[0])}function z({scale:n,translate:r},t){return Math.round((t-r[1])/n[1])}function y({scale:n,translate:r},t){return Math.round(((t??0)-r[2])/n[2])}function q({scale:n,translate:r},t){return t?Math.round((t-r[3])/n[3]):0}function Y(n,r){return n&&r?X:n&&!r?C:!n&&r?L:E}var E=(n,r)=>{let t=[];if(!r.length)return null;let s=r[0],a=g(n,s[0]),o=z(n,s[1]);t.push([a,o]);for(let u=1;u<r.length;u++){let[i,l]=r[u],c=g(n,i),e=z(n,l);c===a&&e===o||t.push([c-a,e-o]),a=c,o=e}return t},C=(n,r)=>{let t=[];if(!r.length)return null;let s=r[0],a=g(n,s[0]),o=z(n,s[1]),u=y(n,s[2]);t.push([a,o,u]);for(let i=1;i<r.length;i++){let[l,c,e]=r[i],h=g(n,l),f=z(n,c),m=y(n,e);h===a&&f===o&&m===u||t.push([h-a,f-o,m]),a=h,o=f,u=m}return t},L=(n,r)=>{let t=[];if(!r.length)return null;let s=r[0],a=g(n,s[0]),o=z(n,s[1]),u=q(n,s[2]);t.push([a,o,u]);for(let i=1;i<r.length;i++){let[l,c,e]=r[i],h=g(n,l),f=z(n,c),m=q(n,e);h===a&&f===o&&m===u||t.push([h-a,f-o,m]),a=h,o=f,u=m}return t},X=(n,r)=>{let t=[];if(!r.length)return null;let s=r[0],a=g(n,s[0]),o=z(n,s[1]),u=y(n,s[2]),i=q(n,s[3]);t.push([a,o,u,i]);for(let l=1;l<r.length;l++){let[c,e,h,f]=r[l],m=g(n,c),M=z(n,e),P=y(n,h),N=q(n,f);m===a&&M===o&&P===u&&N===i||t.push([m-a,M-o,P,N]),a=m,o=M,u=P,i=N}return t};function B(n,r,t,s){let a=[],o=Y(t,s);for(let u=0;u<r.length;u++){let i=o(n,r[u]);i&&i.length>=3&&a.push(i)}return a.length?a:null}function b(n,r,t,s){let a=[],o=Y(t,s);for(let u=0;u<r.length;u++){let i=o(n,r[u]);i&&i.length>=2&&a.push(i)}return a.length?a:null}function d({scale:n,translate:r},t){return t*n[0]+r[0]}function Z({scale:n,translate:r},t){return t*n[1]+r[1]}function p({scale:n,translate:r},t){return(t??0)*n[2]+r[2]}function I({scale:n,translate:r},t){return t?t*n[3]+r[3]:0}function A(n,r){return n&&r?Q:n&&!r?V:!n&&r?_:F}var F=(n,r)=>{let t=new Array(r.length);if(!r.length)return t;let s=r[0],a=d(n,s[0]),o=Z(n,s[1]);t[0]=[a,o];let{scale:u,originPosition:i}=n,l=u[0],c=i==="lowerLeft"?u[1]:-u[1];for(let e=1;e<r.length;e++){let[h,f]=r[e];a+=l*h,o+=c*f,t[e]=[a,o]}return t},V=(n,r)=>{let t=new Array(r.length);if(!r.length)return t;let s=r[0],a=d(n,s[0]),o=Z(n,s[1]);t[0]=[a,o,p(n,s[2])];let{scale:u,originPosition:i}=n,l=u[0],c=i==="lowerLeft"?u[1]:-u[1];for(let e=1;e<r.length;e++){let[h,f,m]=r[e];a+=l*h,o+=c*f,t[e]=[a,o,p(n,m)]}return t},_=(n,r)=>{let t=new Array(r.length);if(!r.length)return t;let s=r[0],a=d(n,s[0]),o=Z(n,s[1]);t[0]=[a,o,I(n,s[2])];let{scale:u,originPosition:i}=n,l=u[0],c=i==="lowerLeft"?u[1]:-u[1];for(let e=1;e<r.length;e++){let[h,f,m]=r[e];a+=l*h,o+=c*f,t[e]=[a,o,I(n,m)]}return t},Q=(n,r)=>{let t=new Array(r.length);if(!r.length)return t;let s=r[0],a=d(n,s[0]),o=Z(n,s[1]);t[0]=[a,o,p(n,s[2]),I(n,s[3])];let{scale:u,originPosition:i}=n,l=u[0],c=i==="lowerLeft"?u[1]:-u[1];for(let e=1;e<r.length;e++){let[h,f,m,M]=r[e];a+=l*h,o+=c*f,t[e]=[a,o,p(n,m),I(n,M)]}return t};function w(n,r,t){let s=new Array(t.length);for(let a=0;a<t.length;a++)s[a]=r(n,t[a]);return s}function H(n,r,t){let s=x(n);return r.x=g(s,t.x),r.y=z(s,t.y),t.z!=null&&(r.z=y(s,t.z)),t.m!=null&&(r.m=q(s,t.m)),r}function R(n,r,t){let s=B(x(n),t.rings,t.hasZ,t.hasM);return s?(r.rings=s,r.hasZ=t.hasZ??!1,r.hasM=t.hasM??!1,r):null}function U(n,r,t){let s=b(x(n),t.paths,t.hasZ,t.hasM);return s?(r.paths=s,r.hasZ=t.hasZ??!1,r.hasM=t.hasM??!1,r):null}function J(n,r,t,s=t?.hasZ??!1,a=t?.hasM??!1){if(t!=null){let o=x(n);r.points=A(s,a)(o,t.points),r.hasZ=s,r.hasM=a}return r}function K(n,r,t,s=t?.z!=null,a=t?.m!=null){if(t==null)return r;let o=x(n);return r.x=d(o,t.x),r.y=Z(o,t.y),s&&(r.z=p(o,t.z)),a&&(r.m=I(o,t.m)),r}function W(n,r,t,s=t?.hasZ??!1,a=t?.hasM??!1){if(t!=null){let o=x(n);r.rings=w(o,A(s,a),t.rings),r.hasZ=s,r.hasM=a}return r}function $(n,r,t,s=t?.hasZ??!1,a=t?.hasM??!1){if(t!=null){let o=x(n);r.paths=w(o,A(s,a),t.paths),r.hasZ=s,r.hasM=a}return r}export{D as a,x as b,g as c,z as d,H as e,R as f,U as g,J as h,K as i,W as j,$ as k};
