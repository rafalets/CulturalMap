import{B as vt,k as ct,m as pt,n as mt,o as m,p as _,q as ft,r as ht,s as C}from"./chunk-BXUPDT4D.js";import{a as dt,b as gt}from"./chunk-B6OGPRTQ.js";import{a as lt}from"./chunk-GOLGIJPD.js";import{I as it}from"./chunk-XSALJEMC.js";import{a as et}from"./chunk-NRQSFK4P.js";import{a as Z}from"./chunk-HBZAOVHW.js";import{b as st}from"./chunk-BYX5KLGZ.js";import{a as F,e as D,f as R}from"./chunk-5IRLA4AM.js";import{a as ut}from"./chunk-AVLSWJCG.js";import{a as rt}from"./chunk-FKL22O54.js";import{n as nt}from"./chunk-IAM754TS.js";import{b as at}from"./chunk-Y4OUS3AZ.js";import{a as v,b as k,c as y,d as w,e as g,j as V,k as ot,l as P}from"./chunk-RXT2WPNA.js";import{a as tt}from"./chunk-VC7OIMIK.js";import{E as $,n as J,r as K}from"./chunk-SKMO433W.js";import{c as T,n as G,q as W}from"./chunk-5WKDXHVH.js";import{a as U}from"./chunk-NHSDW26F.js";import{m as N}from"./chunk-NTVLK3P2.js";import{oa as B}from"./chunk-IG66NQHW.js";import{a as j}from"./chunk-SLAWDKDA.js";import{L as Y,d as n}from"./chunk-C7INQGWT.js";import{H as d}from"./chunk-WMHJC7XF.js";import{d as X}from"./chunk-D2LVMNOU.js";import{a}from"./chunk-QGVBCWUY.js";import{a as u,b as q}from"./chunk-VTHXE323.js";var kt=class{draw(i,t){let o=wt(i),s=this.sortUniqueHints(o),p=[];for(let l of s)l instanceof rt&&p.push(this.visualizeIntersectionPoint(l,t)),l instanceof nt&&p.push(this.visualizeLine(l,t)),l instanceof st&&p.push(this.visualizeParallelSign(l,t)),l instanceof ut&&p.push(this.visualizeRightAngleQuad(l,t)),l instanceof lt&&p.push(this.visualizePoint(l,t));return X(p)}sortUniqueHints(i){return i}};function wt(e){let i=[];for(let t of e){let o=!0;for(let s of i)if(t.equals(s)){o=!1;break}o&&i.push(t)}return i}function yt(e,i=A()){return At(e,i)}function Ft(e,i=A()){return At(e,i,!1)}function At(e,i,t=e.hasZ){let o=vt(e.spatialReference),s=B(o);if(s==null)return null;let p=(L,h)=>!(h.length<2)&&(T(L,h[0],h[1],t&&h[2]||0),!0),l=0;for(let L of e.rings){let h=L.length;if(h<3)continue;let{positionsWorldCoords:f}=i;for(;f.length<h;)f.push(U());let E=Vt,z=T(Pt,0,0,0),Ut=1/h;for(let c=0;c<h;c++){if(!p(E,L[c])||!tt(E,e.spatialReference,f[c],o))return null;G(z,z,f[c],Ut)}let H=K(f[0],f[1],z,J());if(W(H)===0)continue;for(let c=0;c<h;c++)$(H,z,f[c],f[c]);let M=_t(f);for(let c=0;c<M.length;c+=3)l+=et(f[M[c]],f[M[c+1]],f[M[c+2]])}return y(l,s)}var Vt=U(),Pt=U();function A(){return{positionsWorldCoords:[]}}function _t(e){return Z(St(e),[],2)}function St(e){let i=new Float64Array(2*e.length);for(let t=0;t<e.length;++t){let o=e[t],s=2*t;i[s]=o[0],i[s+1]=o[1]}return i}function bt(e){let{spatialReference:i}=e;return gt(i,Tt,Dt,e)}function Tt(e){return y(Math.abs(at([e],"square-meters")[0]),"square-meters")}function Dt(e){try{return y(Math.abs(it(e,"square-meters")),"square-meters")}catch{return null}}function Rt(e,i,t=A()){if(i==="on-the-ground"){let o=bt(e);return o??Ft(e,t)}return yt(e,t)}function ue(e,i=A()){return Rt(e,"on-the-ground",i)}var r=class extends Y{constructor(e){super(e),this.actual=null,this.lockable=!0,this.id=j(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(e){this.lockable&&this._set("committed",e)}get dirty(){return this.inputValue!=null}get locked(){return this.lockable&&this.committed!=null}onInput(e){this.inputValue=e,this.invalid=!1}onCommit(e,i,t){this.lockable?this._onCommitLockable(e,t):this._onCommitNonLockable(t),this.invalid&&e==="commit-and-exit"||t.onCommit(i,e)}_onCommitLockable(e,i){let{inputValue:t,locked:o}=this;o&&S(t)?this.unlock():(e==="commit-and-exit"&&!o||t!=null)&&this._parseInputAndLock(i)}_onCommitNonLockable(e){let{inputValue:i}=this;S(i)?this.lockable?this.setActual(null):this.clearInputValue():i!=null&&this._parseInputAndSetActual(e)}applyValue(e){this.lockable?this.lock(e):this.setActual(e)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(e){this.actual=e,this.clearInputValue()}lock(e){this.lockable&&(this.committed=e??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(e){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(e))}getSuffix(e){let{suffix:i}=this;return typeof i=="function"?i(e):i}getFormattedValue(e){let{actual:i,committed:t,format:o}=this;return t!=null?o(t,e):i!=null?o(i,e):null}getRawDisplayValue(e){let{actual:i,committed:t,inputValue:o}=this;return o??(this.lockable&&t!=null?this.formatForInputMode(t,e):i!=null?this.formatForInputMode(i,e):null)}_parseInputAndSetActual(e){let{inputValue:i}=this;if(i==null||S(i))return this.setActual(null);let t=this.parse(i,e);t!=null?this.setActual(t):this.invalid=!0}_parseInputAndLock(e){let{inputValue:i,actual:t}=this;if(S(i))return this.unlock();if(i==null)return this.lock(t);let o=this.parse(i,e);o!=null?this.lock(o):this.invalid=!0}};function S(e){return e!=null&&e.trim()===""}a([n()],r.prototype,"actual",void 0),a([n()],r.prototype,"committed",null),a([n()],r.prototype,"dirty",null),a([n()],r.prototype,"format",void 0),a([n()],r.prototype,"formatForInputMode",void 0),a([n()],r.prototype,"lockable",void 0),a([n()],r.prototype,"locked",null),a([n()],r.prototype,"id",void 0),a([n()],r.prototype,"inputValue",void 0),a([n()],r.prototype,"name",void 0),a([n()],r.prototype,"parse",void 0),a([n()],r.prototype,"readOnly",void 0),a([n()],r.prototype,"suffix",void 0),a([n()],r.prototype,"title",void 0),a([n()],r.prototype,"visible",void 0),a([n()],r.prototype,"invalid",void 0),a([n()],r.prototype,"unlockOnVertexPlacement",void 0),r=a([d("esri.views.interactive.tooltip.fields.TooltipField")],r);var b=class extends r{constructor(e){super(e),this.showAsZ=!1}normalizeCtorArgs(e){let i=t=>t.inputUnitInfos.verticalLength.unit;return u({name:"elevation",actual:V,parse:m({createQuantity:(t,o)=>k(t,i(o))}),format:(t,o)=>o.formatters.verticalLength(t),formatForInputMode:(t,o)=>o.formatters.scalar(g(t,i(o))),suffix:t=>t.inputUnitInfos.verticalLength.abbreviation,title:t=>t.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1},e)}};a([n()],b.prototype,"showAsZ",void 0),b=a([d("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],b);var I=class extends r{constructor(e){super(e),this.precision=1}normalizeCtorArgs(e){let i=t=>t.inputUnitInfos.angle.unit;return u({name:"orientation",actual:null,parse:m({createQuantity:(t,o)=>w(t,i(o),"geographic"),sanitize:_}),format:t=>{let o=R(t);return ct(o,"geographic",this.precision)},formatForInputMode:(t,o)=>{let s=R(t);return o.formatters.scalar(s)},suffix:t=>t.inputUnitInfos.angle.abbreviation,title:t=>t.messages.sketch.orientation},e)}};a([n()],I.prototype,"precision",void 0),I=a([d("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],I);var x=class extends r{constructor(e){super(e),this.precision=null}normalizeCtorArgs(e){let i=t=>t.inputUnitInfos.length.unit;return u({name:"size",actual:null,parse:m({createQuantity:(t,o)=>k(t,i(o))}),format:(t,o)=>o.formatters.length(t),formatForInputMode:(t,o)=>o.formatters.scalar(g(t,i(o))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.size},e)}};a([n()],x.prototype,"precision",void 0),x=a([d("esri.views.interactive.tooltip.fields.TooltipFieldSize")],x);function mi(e){let i=o=>o.inputUnitInfos.angle.unit,t=o=>o.sketchOptions.values.effectiveDirectionMode;return new r(u({name:"direction",actual:P,parse:m({createQuantity:(o,s)=>w(o,i(s),"geographic"),sanitize:_}),format:(o,s)=>{let p=t(s),l=D(o,p);switch(p){case F.Absolute:return s.formatters.direction(l);case F.Relative:return s.formatters.directionRelative(l);case F.RelativeBilateral:return s.formatters.directionRelativeBilateral(l)}},formatForInputMode:(o,s)=>{let p=D(o,t(s));return s.formatters.scalar(g(p,i(s)))},suffix:o=>o.inputUnitInfos.angle.abbreviation,title:o=>{let s=t(o),{absolute:p,relative:l}=o.messages.sketch.direction;switch(s){case F.Absolute:return p;case F.Relative:case F.RelativeBilateral:return l}}},e))}function Q(e){let i=t=>t.inputUnitInfos.length.unit;return new r(u({name:"distance",actual:V,parse:m({createQuantity:(t,o)=>k(Math.max(t,0),i(o))}),format:(t,o)=>o.formatters.length(t),formatForInputMode:(t,o)=>o.formatters.scalar(g(t,i(o))),suffix:t=>t.inputUnitInfos.length.abbreviation,title:t=>t.messages.sketch.distance},e))}function fi(e){return Q(u({format:(i,t)=>t.formatters.totalLength(i),title:i=>i.messages.sketch.totalLength,readOnly:!0},e))}function hi(e){return Q(u({},e))}function di(e){let i=t=>t.inputUnitInfos.length.unit;return Q(q(u({},e),{parse:m({createQuantity:(t,o)=>k(t,i(o))}),format:(t,o)=>o.formatters.lengthRelative(t)}))}function It(e){return new b(e)}function gi(e){return new I(e)}function vi(e){return new x(e)}function ki(e){return O("scale",u({name:"scale",actual:null,parse:m({createQuantity:i=>v(Math.abs(i))})},e))}function yi(e){let i=t=>t.inputUnitInfos.area.unit;return new r(u({name:"area",actual:ot,parse:m({createQuantity:(t,o)=>y(t,i(o))}),format:(t,o)=>o.formatters.area(t),formatForInputMode:(t,o)=>o.formatters.scalar(g(t,i(o))),suffix:t=>t.inputUnitInfos.area.abbreviation,title:t=>t.messages.sketch.area,readOnly:!0},e))}function xt(e){return new r(u({name:"x",actual:P,parse:ft,format:(i,t)=>t.formatters.longitudeDecimalDegrees(i),formatForInputMode:i=>pt(i),suffix:i=>i.inputUnitInfos.angle.abbreviation,title:i=>i.messages.sketch.longitude},e))}function Lt(e){return new r(u({name:"y",actual:P,parse:ht,format:(i,t)=>t.formatters.latitudeDecimalDegrees(i),formatForInputMode:i=>mt(i),suffix:i=>i.inputUnitInfos.angle.abbreviation,title:i=>i.messages.sketch.latitude},e))}function zt(e){return O("x",u({name:"x"},e))}function Mt(e){return O("y",u({name:"y"},e))}function O(e,i){return new r(u({actual:v(0),parse:m({createQuantity:t=>v(t)}),format:(t,o)=>o.formatters.scalar(t),formatForInputMode:(t,o)=>o.formatters.scalar(t),title:t=>t.messages.sketch[e]},i))}var Si=e=>{let i=class extends e{constructor(){super(...arguments),this.longitude=xt(),this.latitude=Lt(),this.x=zt(),this.y=Mt(),this.elevation=It(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(t,o=t?.spatialReference){if(this.geographic=!!o&&dt(o),t==null)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){let s=N(t,Ct);this._setActualLonLat(C(s?.[0]),C(s?.[1]))}else this._setActualXY(v(t.x),v(t.y))}_setActualLonLat(t,o){this.longitude.actual=t,this.latitude.actual=o}_setActualXY(t,o){this.x.actual=t,this.y.actual=o}};return a([n()],i.prototype,"geographic",void 0),a([n()],i.prototype,"effectiveX",null),a([n()],i.prototype,"effectiveY",null),a([n()],i.prototype,"key",null),i=a([d("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],i),i},Ct=[0,0];export{kt as a,mi as b,fi as c,hi as d,di as e,gi as f,vi as g,ki as h,yi as i,Si as j,ue as k};
