import{a as D}from"./chunk-QEPZFICI.js";import{a as g,b}from"./chunk-B3VWT7I5.js";import"./chunk-XCZSU4MC.js";import{a as p,b as h,f as z}from"./chunk-VTHXE323.js";var y=new Date,R=y.toISOString(),S=365,w=S,J={groupDateRange:w,startDate:R},Z=(t,r,e)=>{let o=[],n=e.create(t);for(let l=0;l<=r;l++)n=e.increase(n),o.push(e.formatToIsoDateString(n));return o},x=(t,r,e,o)=>{let n=new Map,l=Z(r,e,o);return t.map(c=>{let{label:s}=c,a=b(s),u=l.map(m=>{let d=`${m}-${s}`,i=n.get(d);return i||(i=o.isoToTimeZone(m,s),n.set(d,i),i)});return h(p({},c),{continent:a,isRegularContinent:a!==g,dates:u})})},C=(t,r,e)=>t.length===r.length&&t.every((o,n)=>e.same(o,r[n])),O=(t,r=5)=>{let e=t.filter(({label:n})=>b(n)!==g);if(e.length===0)return[0];let o=e.map(n=>t.indexOf(n));return A(o,r)};function A(t,r=5){let e=t.length;if(e<=r)return t;let o=Math.min(e-2,r-2),n=(e-1)/(o+1);return[t[0],...Array.from({length:o},(l,c)=>t[Math.round((c+1)*n)]),t[e-1]]}function L(t){return z(this,null,function*(){let{groupDateRange:r,startDate:e,dateEngine:o}=p(p({},J),t),n=[];if(!o)throw new Error("dateEngine is required");let l=D.map(s=>({label:s})),c=x(l,e,r,o);for(let s of c){let{label:a,continent:u,dates:m}=s;if(s.visited)continue;s.visited=!0;let d={labelIdx:[],tzs:[{label:a}]};for(let i of c.filter(f=>!f.visited)){let{label:f,continent:I,isRegularContinent:M,dates:T}=i;if((u===I||!M)&&C(m,T,o)){let v={label:f};d.tzs.push(v),i.visited=!0}}n.push(d)}return n.map(s=>(s.tzs=s.tzs.sort((a,u)=>a.label.localeCompare(u.label)),{labelTzIdx:O(s.tzs,7),tzs:s.tzs.map(a=>a.label)})).sort((s,a)=>a.tzs.length-s.tzs.length)})}export{L as groupByOffset};
