import{f as u,g as m,h as l,i as f,j as k,k as n}from"./chunk-7Y6S2GNA.js";import{a as c}from"./chunk-J5MXC6AL.js";import{a as I,b}from"./chunk-VTHXE323.js";function S(e,o,a,s){if(e)if(e.type!=="CIMTextSymbol"){if(a&&e.effects)for(let t of e.effects)p(t,o);if(e.symbolLayers)for(let t of e.symbolLayers){switch(t.type){case"CIMPictureMarker":case"CIMVectorMarker":d(t,o,s);break;case"CIMPictureStroke":case"CIMSolidStroke":case"CIMGradientStroke":!s?.preserveOutlineWidth&&t.width&&(t.width*=o);break;case"CIMPictureFill":t.height&&(t.height*=o),t.offsetX&&(t.offsetX*=o),t.offsetY&&(t.offsetY*=o);break;case"CIMHatchFill":S(t.lineSymbol,o,!0,b(I({},s),{preserveOutlineWidth:!1})),t.offsetX&&(t.offsetX*=o),t.offsetY&&(t.offsetY*=o),t.separation&&(t.separation*=o)}if(t.effects)for(let r of t.effects)p(r,o)}}else e.height!=null&&(e.height*=o)}function d(e,o,a){if(e&&(e.markerPlacement&&P(e.markerPlacement,o),e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o),e.anchorPoint&&e.anchorPointUnits==="Absolute"&&(e.anchorPoint={x:e.anchorPoint.x*o,y:e.anchorPoint.y*o}),e.size=e.size!=null?e.size*o:0,e.type==="CIMVectorMarker"&&e.markerGraphics))for(let s of e.markerGraphics)e.scaleSymbolsProportionally||S(s.symbol,o,!0,a)}function P(e,o){switch(n(e)&&e.offset&&(e.offset*=o),e.type){case"CIMMarkerPlacementAlongLineRandomSize":case"CIMMarkerPlacementAlongLineSameSize":if(e.customEndingOffset&&(e.customEndingOffset*=o),e.offsetAlongLine&&(e.offsetAlongLine*=o),e.placementTemplate&&e.placementTemplate.length){let a=e.placementTemplate.map(s=>s*o);e.placementTemplate=a}break;case"CIMMarkerPlacementAlongLineVariableSize":if(e.maxRandomOffset&&(e.maxRandomOffset*=o),e.placementTemplate&&e.placementTemplate.length){let a=e.placementTemplate.map(s=>s*o);e.placementTemplate=a}break;case"CIMMarkerPlacementOnLine":e.startPointOffset&&(e.startPointOffset*=o);break;case"CIMMarkerPlacementAtExtremities":e.offsetAlongLine&&(e.offsetAlongLine*=o);break;case"CIMMarkerPlacementAtMeasuredUnits":case"CIMMarkerPlacementOnVertices":break;case"CIMMarkerPlacementAtRatioPositions":e.beginPosition&&(e.beginPosition*=o),e.endPosition&&(e.endPosition*=o);break;case"CIMMarkerPlacementPolygonCenter":e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o);break;case"CIMMarkerPlacementInsidePolygon":e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o),e.stepX&&(e.stepX*=o),e.stepY&&(e.stepY*=o)}}function p(e,o){switch(e.type){case"CIMGeometricEffectArrow":case"CIMGeometricEffectDonut":e.width&&(e.width*=o);break;case"CIMGeometricEffectBuffer":e.size&&(e.size*=o);break;case"CIMGeometricEffectCut":e.beginCut&&(e.beginCut*=o),e.endCut&&(e.endCut*=o),e.middleCut&&(e.middleCut*=o);break;case"CIMGeometricEffectDashes":if(e.customEndingOffset&&(e.customEndingOffset*=o),e.offsetAlongLine&&(e.offsetAlongLine*=o),e.dashTemplate&&e.dashTemplate.length){let a=e.dashTemplate.map(s=>s*o);e.dashTemplate=a}break;case"CIMGeometricEffectExtension":case"CIMGeometricEffectJog":case"CIMGeometricEffectRadial":e.length&&(e.length*=o);break;case"CIMGeometricEffectMove":e.offsetX&&(e.offsetX*=o),e.offsetY&&(e.offsetY*=o);break;case"CIMGeometricEffectOffset":case"CIMGeometricEffectOffsetTangent":e.offset&&(e.offset*=o);break;case"CIMGeometricEffectRegularPolygon":e.radius&&(e.radius*=o);break;case"CIMGeometricEffectTaperedPolygon":e.fromWidth&&(e.fromWidth*=o),e.length&&(e.length*=o),e.toWidth&&(e.toWidth*=o);break;case"CIMGeometricEffectWave":e.amplitude&&(e.amplitude*=o),e.period&&(e.period*=o)}}function T(e){let o=[];return M(m(e),o),o.length?new c(u(o[0])):null}function M(e,o){if(!e)return;let a;a=e.type==="CIMTextSymbol"?e.symbol:e;let s=e.type==="CIMPolygonSymbol";if(a?.symbolLayers){for(let t of a.symbolLayers)if(!(t.colorLocked||s&&(f(t)||l(t)&&t.markerPlacement&&n(t.markerPlacement))))switch(t.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":t.tintColor&&h(o,t.tintColor);break;case"CIMVectorMarker":t.markerGraphics?.forEach(r=>{M(r.symbol,o)});break;case"CIMSolidStroke":case"CIMSolidFill":h(o,t.color);break;case"CIMHatchFill":M(t.lineSymbol,o)}}}function h(e,o){for(let a of e)if(a.join(".")===o.join("."))return;e.push(o)}function E(e,o,a){o instanceof c||(o=new c(o));let s=m(e);s&&C(s,o,a)}function C(e,o,a){if(!e)return;let s;s=e.type==="CIMTextSymbol"?e.symbol:e;let t=s?.type==="CIMPolygonSymbol";if(s?.symbolLayers)for(let r of s.symbolLayers){if(r.colorLocked)continue;if(t){if(a){let{layersToColor:i}=a;if((f(r)||l(r)&&r.markerPlacement&&n(r.markerPlacement))&&i==="fill"||k(r)&&i==="outline")continue}else if(f(r)||l(r)&&r.markerPlacement&&n(r.markerPlacement))continue}let y=o.toArray();switch(r.type){case"CIMPictureMarker":case"CIMPictureStroke":case"CIMPictureFill":r.tintColor=y;break;case"CIMVectorMarker":r.markerGraphics?.forEach(i=>{C(i.symbol,o,a)});break;case"CIMSolidStroke":case"CIMSolidFill":r.color=y;break;case"CIMHatchFill":C(r.lineSymbol,o,a)}}}export{S as a,T as b,E as c};
