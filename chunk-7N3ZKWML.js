import{b as A,f as Z,i as W}from"./chunk-E62WHYYG.js";import{a as b,h as X}from"./chunk-QDTU3MWT.js";import{c as J,g as D,j as L}from"./chunk-I4M2OT5W.js";import{a as j,g as q,n as P}from"./chunk-NTVLK3P2.js";import{a as G}from"./chunk-WMQNRNIU.js";import{a as E}from"./chunk-EIPVFA6F.js";import{d as R}from"./chunk-C7INQGWT.js";import{H as k}from"./chunk-WMHJC7XF.js";import{a as x}from"./chunk-QGVBCWUY.js";import{b as w}from"./chunk-HHDFN2GK.js";import{i as V}from"./chunk-47GHT6OF.js";import{a as T,b as z}from"./chunk-VTHXE323.js";function cn(n){let r=[];for(n.reset();n.nextPath();){let e=[];for(;n.nextPoint();)e.push([n.x,n.y]);r.push(e)}return n.reset(),r}function B(n){let r=[];for(;n.nextPoint();)r.push([n.x,n.y]);return n.seekPathStart(),r}function mn(n){return n?n.hasZ?[n.xmax-n.xmin/2,n.ymax-n.ymin/2,n.zmax-n.zmin/2]:[n.xmax-n.xmin/2,n.ymax-n.ymin/2]:null}function H(n){return n?en(n.rings,n.hasZ??!1):null}function en(n,r){if(!n?.length)return null;let e=[],i=[],t=r?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let o=0,s=n.length;o<s;o++){let l=K(n[o],r,t);l&&i.push(l)}if(i.sort((o,s)=>{let l=o[2]-s[2];return l===0&&r&&(l=o[4]-s[4]),l}),i.length&&(e[0]=i[0][0],e[1]=i[0][1],r&&(e[2]=i[0][3]),(e[0]<t[0]||e[0]>t[1]||e[1]<t[2]||e[1]>t[3]||r&&(e[2]<t[4]||e[2]>t[5]))&&(e.length=0)),!e.length){let o=n[0]&&n[0].length?rn(n[0],r):null;if(!o)return null;e[0]=o[0],e[1]=o[1],r&&o.length>2&&(e[2]=o[2])}return e}function K(n,r,e){let i=0,t=0,o=0,s=0,l=0,u=n.length?n[0][0]:0,h=n.length?n[0][1]:0,c=n.length&&r?n[0][2]:0;for(let f=0;f<n.length;f++){let g=n[f],y=n[(f+1)%n.length],[p,I,N]=g,d=p-u,_=I-h,[U,$,nn]=y,v=U-u,M=$-h,S=d*M-v*_;if(s+=S,i+=(d+v)*S,t+=(_+M)*S,r&&g.length>2&&y.length>2){let O=N-c,F=nn-c,Y=d*F-v*O;o+=(O+F)*Y,l+=Y}p<e[0]&&(e[0]=p),p>e[1]&&(e[1]=p),I<e[2]&&(e[2]=I),I>e[3]&&(e[3]=I),r&&(N<e[4]&&(e[4]=N),N>e[5]&&(e[5]=N))}if(s>0&&(s*=-1),l>0&&(l*=-1),!s)return null;s*=.5,l*=.5;let a=[i/(6*s)+u,t/(6*s)+h,s];return r&&(e[4]===e[5]||l===0?(a[3]=(e[4]+e[5])/2,a[4]=0):(a[3]=o/(6*l)+c,a[4]=l)),a}function yn(n,r){let e=0,i=0,t=0;n.nextPoint();let o=n.pathSize?n.x:0,s=n.pathSize?n.y:0;for(let l=0;l<n.pathSize;l++){n.seekInPath(l);let u=[n.x,n.y];n.seekInPath((l+1)%n.pathSize);let h=[n.x,n.y],[c,a]=u,f=c-o,g=a-s,[y,p]=h,I=y-o,N=p-s,d=f*N-I*g;t+=d,e+=(f+I)*d,i+=(g+N)*d,c<r[0]&&(r[0]=c),c>r[1]&&(r[1]=c),a<r[2]&&(r[2]=a),a>r[3]&&(r[3]=a)}return t>0&&(t*=-1),t?(t*=.5,[e/(6*t)+o,i/(6*t)+s,t]):null}function rn(n,r){let e=r?[0,0,0]:[0,0],i=r?[0,0,0]:[0,0],t=0,o=0,s=0,l=0;for(let u=0,h=n.length;u<h-1;u++){let c=n[u],a=n[u+1];if(c&&a){e[0]=c[0],e[1]=c[1],i[0]=a[0],i[1]=a[1],r&&c.length>2&&a.length>2&&(e[2]=c[2],i[2]=a[2]);let f=A(e,i);if(f){t+=f;let g=Z(c,a);o+=f*g[0],s+=f*g[1],r&&g.length>2&&(l+=f*g[2])}}}return t>0?r?[o/t,s/t,l/t]:[o/t,s/t]:n.length?n[0]:null}function tn(n){let{hasZ:r,totalSize:e}=n;if(e===0)return null;let i=[],t=[],o=r?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];for(n.reset();n.nextPath();){let s=K(B(n),n.hasZ,o);s&&t.push(s)}if(t.sort((s,l)=>{let u=s[2]-l[2];return u===0&&r&&(u=s[4]-l[4]),u}),t.length&&(i[0]=t[0][0],i[1]=t[0][1],r&&(i[2]=t[0][3]),(i[0]<o[0]||i[0]>o[1]||i[1]<o[2]||i[1]>o[3]||r&&(i[2]<o[4]||i[2]>o[5]))&&(i.length=0)),!i.length){n.reset(),n.nextPath();let s=n.pathSize?sn(n):null;if(!s)return null;i[0]=s[0],i[1]=s[1],r&&s.length>2&&(i[2]=s[2])}return i}function sn(n){let{hasZ:r}=n,e=r?[0,0,0]:[0,0],i=r?[0,0,0]:[0,0],t=0,o=0,s=0,l=0;if(n.nextPoint()){let u=n.x,h=n.y,c=n.z;for(;n.nextPoint();){let a=n.x,f=n.y,g=n.z;e[0]=u,e[1]=h,i[0]=a,i[1]=f,r&&(e[2]=c,i[2]=g);let y=A(e,i);if(y){t+=y;let p=Z(e,i);o+=y*p[0],s+=y*p[1],r&&p.length>2&&(l+=y*p[2])}u=a,h=f,c=g}}return t>0?r?[o/t,s/t,l/t]:[o/t,s/t]:n.pathSize?(n.seekPathStart(),n.nextPoint(),[n.x,n.y]):null}var on=1e-6;function xn(n){let r=0;for(n.reset();n.nextPath();)r+=n.getCurrentRingArea();if(r<on){let t=tn(n);return t?[t[0],t[1]]:null}let e=[0,0];if(n.reset(),!n.nextPath()||!n.nextPoint())return null;let i=[n.x,n.y];for(n.reset();n.nextPath();)an(e,i,n);return e[0]*=1/r,e[1]*=1/r,e[0]+=i[0],e[1]+=i[1],e}var ln=1/3;function an(n,r,e){if(!e||e.pathSize<3)return null;e.nextPoint();let i=e.x,t=e.y;e.nextPoint();let o,s=e.x-i,l=e.y-t,u=0,h=0;for(;e.nextPoint();)u=e.x-i,h=e.y-t,o=.5*ln*(u*l-h*s),n[0]+=o*(s+u),n[1]+=o*(l+h),s=u,l=h;let c=e.getCurrentRingArea(),a=[i,t];return a[0]-=r[0],a[1]-=r[1],a[0]*=c,a[1]*=c,n[0]+=a[0],n[1]+=a[1],n}var C;function Q(n){return!Array.isArray(n[0])}function un(n){return typeof n[0]?.[0]=="number"}function hn(n){if(!n)return;let{rings:r,hasM:e,hasZ:i,spatialReference:t}=n;switch(r??=[],un(r)&&(r=[r]),r[0]?.[0]?.length){case 4:i??=!0,e??=!0;break;case 3:i??=e!==!0,e??=!i;break;default:i??=!1,e??=!1}return t??=G.WGS84,z(T({},n),{hasM:e,hasZ:i,rings:r,spatialReference:t})}var m=C=class extends j{static fromExtent(n){let r=n.clone().normalize(),{spatialReference:e}=n,i=!1,t=!1;for(let s of r)s.hasZ&&(i=!0),s.hasM&&(t=!0);let o={rings:r.map(s=>{let l=[[s.xmin,s.ymin],[s.xmin,s.ymax],[s.xmax,s.ymax],[s.xmax,s.ymin],[s.xmin,s.ymin]];if(i&&s.hasZ){let u=s.zmin+.5*(s.zmax-s.zmin);for(let h=0;h<l.length;h++)l[h].push(u)}if(t&&s.hasM){let u=s.mmin+.5*(s.mmax-s.mmin);for(let h=0;h<l.length;h++)l[h].push(u)}return l}),spatialReference:e};return i&&(o.hasZ=!0),t&&(o.hasM=!0),new C(o)}constructor(n){super(hn(n)),this.curveRings=void 0,this.rings=[],this.type="polygon"}get cache(){return this.commitProperty("curveRings"),this.commitProperty("hasM"),this.commitProperty("hasZ"),this.commitProperty("rings"),this.commitProperty("spatialReference"),{}}get centroid(){let n=H(this);if(!n||isNaN(n[0])||isNaN(n[1])||this.hasZ&&isNaN(n[2]))return null;let r=new P;return r.x=n[0],r.y=n[1],r.spatialReference=this.spatialReference,this.hasZ&&(r.z=n[2]),r}writeCurveRings(n,r){r.curveRings=w(n)}get extent(){let n=X(this),{spatialReference:r}=this;return n?new L(z(T({},n),{spatialReference:r})):null}get isSelfIntersecting(){return D(this.rings)}writeRings(n,r){r.rings=w(this.rings)}addRing(n){if(!n)return;let r=this.rings,e=r.length;if(Q(n)){let i=[];for(let t=0,o=n.length;t<o;t++)i[t]=n[t].toArray();r[e]=i}else r[e]=n.slice();return this.notifyChange("rings"),this}clone(){let n=new C;return n.spatialReference=this.spatialReference,n.rings=w(this.rings),n.curveRings=w(this.curveRings),n.hasZ=this.hasZ,n.hasM=this.hasM,n}equals(n){if(this===n)return!0;if(n==null)return!1;let r=this.spatialReference,e=n.spatialReference;if(r!=null!=(e!=null)||r!=null&&e!=null&&!r.equals(e)||this.rings.length!==n.rings.length)return!1;let i=([t,o,s,l],[u,h,c,a])=>t===u&&o===h&&(s==null&&c==null||s===c)&&(l==null&&a==null||l===a);for(let t=0;t<this.rings.length;t++){let o=this.rings[t],s=n.rings[t];if(!V(o,s,i))return!1}return!0}contains(n){if(!n)return!1;let r=q(n,this.spatialReference);return J(this,r??n)}isClockwise(n){let r=Q(n)?n.map(e=>this.hasZ?this.hasM?[e.x,e.y,e.z,e.m]:[e.x,e.y,e.z]:[e.x,e.y]):n;return W(r)}getPoint(n,r){if(!this._validateInputs(n,r))return null;let e=this.rings[n][r],i=this.hasZ,t=this.hasM;return i&&!t?new P(e[0],e[1],e[2],void 0,this.spatialReference):t&&!i?new P(e[0],e[1],void 0,e[2],this.spatialReference):i&&t?new P(e[0],e[1],e[2],e[3],this.spatialReference):new P(e[0],e[1],this.spatialReference)}insertPoint(n,r,e){return this._validateInputs(n,r,!0)?(b(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[n].splice(r,0,e),this.notifyChange("rings"),this):this}removePoint(n,r){if(!this._validateInputs(n,r))return null;let e=new P(this.rings[n].splice(r,1)[0],this.spatialReference);return this.notifyChange("rings"),e}removeRing(n){if(!this._validateInputs(n,null))return null;let r=this.rings.splice(n,1)[0],e=this.spatialReference,i=r.map(t=>new P(t,e));return this.notifyChange("rings"),i}setPoint(n,r,e){return this._validateInputs(n,r)?(b(this,e),Array.isArray(e)||(e=e.toArray()),this.rings[n][r]=e,this.notifyChange("rings"),this):this}_validateInputs(n,r,e=!1){if(n==null||n<0||n>=this.rings.length)return!1;if(r!=null){let i=this.rings[n];if(e&&(r<0||r>i.length)||!e&&(r<0||r>=i.length))return!1}return!0}toJSON(n){return this.write({},n)}};x([R({readOnly:!0})],m.prototype,"cache",null),x([R({readOnly:!0})],m.prototype,"centroid",null),x([R({json:{write:!0,origins:{"portal-item":{write:!1},"web-map":{write:!1},"web-scene":{write:!1}}}})],m.prototype,"curveRings",void 0),x([E("curveRings")],m.prototype,"writeCurveRings",null),x([R({readOnly:!0})],m.prototype,"extent",null),x([R({readOnly:!0})],m.prototype,"isSelfIntersecting",null),x([R({type:[[[Number]]],json:{write:{isRequired:!0}}})],m.prototype,"rings",void 0),x([E("rings")],m.prototype,"writeRings",null),m=C=x([k("esri.geometry.Polygon")],m);var Vn=m;m.prototype.toJSON.isDefaultToJSON=!0;export{cn as a,B as b,mn as c,H as d,en as e,yn as f,xn as g,Vn as h};
