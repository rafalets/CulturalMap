import{a as F}from"./chunk-4E4FE2IX.js";import{b as G}from"./chunk-5SSISWTF.js";import{a as Y}from"./chunk-VTHXE323.js";function O(t,e){return t?e?4:3:e?3:2}function S(t,e,o,s){if(!e?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);let r=t.coords,i=[],I=o?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:l,coords:c}=e,f=O(o,s),d=0;for(let n of l){let u=A(I,c,d,n,o,s);u&&i.push(u),d+=n*f}if(i.sort((n,u)=>{let a=n[2]-u[2];return a===0&&o&&(a=n[4]-u[4]),a}),i.length){let n=6*i[0][2];r[0]=i[0][0]/n,r[1]=i[0][1]/n,o&&(n=6*i[0][4],r[2]=n!==0?i[0][3]/n:0),(r[0]<I[0]||r[0]>I[1]||r[1]<I[2]||r[1]>I[3]||o&&(r[2]<I[4]||r[2]>I[5]))&&(r.length=0)}if(!r.length){let n=e.lengths[0]?M(c,0,l[0],o,s):null;if(!n)return null;r[0]=n[0],r[1]=n[1],o&&n.length>2&&(r[2]=n[2])}return t}function A(t,e,o,s,r,i){let I=O(r,i),l=o,c=o+I,f=0,d=0,n=0,u=0,a=0;for(let y=0,p=s-1;y<p;y++,l+=I,c+=I){let h=e[l],N=e[l+1],g=e[l+2],m=e[c],T=e[c+1],V=e[c+2],E=h*T-m*N;u+=E,f+=(h+m)*E,d+=(N+T)*E,r&&(E=h*V-m*g,n+=(g+V)*E,a+=E),h<t[0]&&(t[0]=h),h>t[1]&&(t[1]=h),N<t[2]&&(t[2]=N),N>t[3]&&(t[3]=N),r&&(g<t[4]&&(t[4]=g),g>t[5]&&(t[5]=g))}if(u>0&&(u*=-1),a>0&&(a*=-1),!u)return null;let b=[f,d,.5*u];return r&&(b[3]=n,b[4]=.5*a),b}function M(t,e,o,s,r){let i=O(s,r),I=e,l=e+i,c=0,f=0,d=0,n=0;for(let u=0,a=o-1;u<a;u++,I+=i,l+=i){let b=t[I],y=t[I+1],p=t[I+2],h=t[l],N=t[l+1],g=t[l+2],m=s?C(b,y,p,h,N,g):w(b,y,h,N);if(m)if(c+=m,s){let T=j(b,y,p,h,N,g);f+=m*T[0],d+=m*T[1],n+=m*T[2]}else{let T=P(b,y,h,N);f+=m*T[0],d+=m*T[1]}}return c>0?s?[f/c,d/c,n/c]:[f/c,d/c]:o>0?s?[t[e],t[e+1],t[e+2]]:[t[e],t[e+1]]:null}function w(t,e,o,s){let r=o-t,i=s-e;return Math.sqrt(r*r+i*i)}function C(t,e,o,s,r,i){let I=s-t,l=r-e,c=i-o;return Math.sqrt(I*I+l*l+c*c)}function P(t,e,o,s){return[t+.5*(o-t),e+.5*(s-e)]}function j(t,e,o,s,r,i){return[t+.5*(s-t),e+.5*(r-e),o+.5*(i-o)]}var _=class t{constructor(e=null,o={},s,r,i=0){this.geometry=e,this.attributes=o,this.centroid=s,this.objectId=r,this.displayId=i}static fromJSON(e){let o=e.geometry?F.fromJSON(e.geometry):null,s=e.centroid?F.fromJSON(e.centroid):null,r=e.objectId;return new t(o,e.attributes,s,r)}weakClone(){let e=new t(this.geometry,this.attributes,this.centroid,this.objectId);return e.displayId=this.displayId,e}clone(){let e=this.geometry?.clone(),o=new t(e,Y({},this.attributes),this.centroid?.clone(),this.objectId);return o.displayId=this.displayId,o}ensureCentroid(e){return this.centroid??=S(new F,this.geometry,e.hasZ,e.hasM),this.centroid}get usedMemory(){return 128+G(this.attributes)+(this.geometry?.usedMemory??0)}};function k(t){return!!t.geometry?.coords?.length}export{S as a,_ as b,k as c};
