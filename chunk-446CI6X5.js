import{f as p,g as h}from"./chunk-BBB7KLHV.js";import{F as m}from"./chunk-E57FTRWF.js";import{u}from"./chunk-D2LVMNOU.js";import{i as f}from"./chunk-47GHT6OF.js";import{f as o}from"./chunk-VTHXE323.js";var i=class{constructor(e,s,t){this.assetName=e,this.assetMimeType=s,this.parts=t}equals(e){return this===e||this.assetName===e.assetName&&this.assetMimeType===e.assetMimeType&&f(this.parts,e.parts,(s,t)=>s.equals(t))}isOnService(e){return this.parts.every(s=>s.isOnService(e))}makeHash(){let e="";for(let s of this.parts)e+=s.partHash;return e}toBlob(e){return o(this,null,function*(){let{parts:s}=this;if(s.length===1)return s[0].toBlob(e);let t=yield Promise.all(s.map(n=>n.toBlob(e)));return u(e),new Blob(t)})}},y=class{constructor(e,s){this.partUrl=e,this.partHash=s}equals(e){return this===e||this.partUrl===e.partUrl&&this.partHash===e.partHash}isOnService(e){return this.partUrl.startsWith(`${e.path}/assets/`)}toBlob(e){return o(this,null,function*(){let{data:s}=yield m(this.partUrl,{responseType:"blob"});return u(e),s})}};function q(r){return O(r?.source)}function g(r){return Array.isArray(r)?r.every(e=>e instanceof i):!1}var A=/^(model\/gltf\+json)|(model\/gltf-binary)$/,v=/\.(gltf|glb)/i;function O(r){return r?Array.isArray(r)?r.some(S):S(r):!1}function S(r){if(r instanceof File){let{type:e,name:s}=r;return A.test(e)||v.test(s)}return A.test(r.assetMimeType)||v.test(r.assetName)}function x(r,e){if(!r)return!1;let{source:s}=r;return T(s,e)}function B(r,e){if(r===e)return!0;let{source:s}=r,{source:t}=e;if(s===t)return!0;if(g(s)&&g(t)){if(s.length!==t.length)return!1;let n=(a,l)=>a.assetName<l.assetName?-1:a.assetName>l.assetName?1:0,c=[...s].sort(n),N=[...t].sort(n);for(let a=0;a<c.length;++a)if(!c[a].equals(N[a]))return!1;return!0}return!1}function T(r,e){if(Array.isArray(r)){let s=r;return s.length>0&&s.every(t=>b(t,e))}return b(r,e)}function b(r,e){return r instanceof i&&r.isOnService(e)}function H(r,e){return r instanceof File?p(r,e):h(r.assetMimeType,r.assetName,e)}function U(r){return Array.isArray(r)?r:[r]}function w(r){return!!r.original}export{i as a,y as b,q as c,x as d,B as e,H as f,U as g,w as h};
