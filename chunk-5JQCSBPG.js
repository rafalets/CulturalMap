import{a as y}from"./chunk-LGMF4IPK.js";import{a as g,b as h,c as v}from"./chunk-R6GE4XRP.js";import{F as l}from"./chunk-E57FTRWF.js";import"./chunk-U4J5SECU.js";import{f}from"./chunk-7EG726PT.js";import{d as a}from"./chunk-C7INQGWT.js";import{H as d}from"./chunk-WMHJC7XF.js";import"./chunk-NJEWDTYF.js";import"./chunk-N3SDOFND.js";import"./chunk-OVHPPCBL.js";import"./chunk-FNXQZPHT.js";import"./chunk-3TQOUBNU.js";import"./chunk-D2LVMNOU.js";import"./chunk-SNFOAZZQ.js";import{a as t}from"./chunk-QGVBCWUY.js";import{t as p}from"./chunk-HHDFN2GK.js";import"./chunk-47GHT6OF.js";import{a as i,b as n,f as w}from"./chunk-VTHXE323.js";var o=class extends f{constructor(r){super(r),this.moment=null,this.success=!1}};t([a({type:Date,json:{type:Number,write:{writer:(r,s)=>{s.moment=r?r.getTime():null}}}})],o.prototype,"moment",void 0),t([a({type:Boolean,json:{write:!0}})],o.prototype,"success",void 0),o=t([d("esri.rest.versionManagement.gdbVersion.support.PostResult")],o);var S=o;var m=new Map;function T(r,s,e,V){return w(this,null,function*(){if(m.has(r)||(yield y(m,r)),(m.get(r)?.serverVersion??0)<=11.1)throw new p("post:enterprise-version","versioning API requires ArcGIS Enterprise version 11.2 or higher");if(!s)throw new p("post:missing-guid","guid for version is missing");let c=h(r),u=e.toJSON();e.rows&&(u.rows=JSON.stringify(e.rows));let j=g(c.query,n(i({query:v(n(i({},u),{f:"json"}))},V),{method:"post"}));s.startsWith("{")&&(s=s.slice(1,-1));let N=`${c.path}/versions/${s}/post`,{data:O}=yield l(N,j);return S.fromJSON(O)})}export{T as post,m as serverVersionCacheMap};
