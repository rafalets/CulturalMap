import{A as U,J as he,N as V,O as H,Q as Y,R as ge,S as F,U as X,b as le,c as B,e as ce,f as q,h as O,i as ue,j as z,k as de,m as me,n as pe,q as G,r as T,s as D,t as k,u as Q,v as N,w as fe,x as m,y as j,z as J}from"./chunk-U4J5SECU.js";import{c as ae}from"./chunk-WMHJC7XF.js";import{C as ie,t as R,w as x,z as ne}from"./chunk-D2LVMNOU.js";import{b as oe,k as w,t as I}from"./chunk-HHDFN2GK.js";import{a as h}from"./chunk-47GHT6OF.js";import{a as b,f as g}from"./chunk-VTHXE323.js";var Me="20250318",$e="878eb8750809e56d2a9ea9f1475c9e4e58226dad";Symbol.dispose??=Symbol("Symbol.dispose"),Symbol.asyncDispose??=Symbol("Symbol.asyncDispose");var Ke="4.32",d,We=Ke;We="4.32.9";function hr(r){d=r}function gr(r){let e=d?.findCredential(r);return e?.token?ge(r,"token",e.token):r}h("host-webworker")||globalThis.$arcgis||Object.defineProperty(globalThis,"$arcgis",{configurable:!1,enumerable:!0,writable:!1,value:{}}),h("host-webworker");function ye(r,e){let t=e?.url?.path;if(r&&t&&(r=k(r,t,{preserveProtocolRelative:!0}),e.portalItem&&e.readResourcePaths)){let s=Q(r,e.portalItem.itemUrl);s!=null&&ze.test(s)&&e.readResourcePaths.push(e.portalItem.resourceFromPath(s).path)}return(r=Z(r,e?.portal))&&_.test(r)?be(r):r}function we(r,e,t=A.YES){if((r=r&&_.test(r)?Se(r):r)==null)return r;!j(r)&&e?.blockedRelativeUrls&&e.blockedRelativeUrls.push(r);let s=k(r);if(e){let o=e.verifyItemRelativeUrls?.rootPath||e.url?.path;if(o){let a=Z(o,e.portal),i=Z(s,e.portal);s=Q(i,a,a),s!=null&&s!==i&&s!==r&&e.verifyItemRelativeUrls&&e.verifyItemRelativeUrls.writtenUrls.push(s)}}return s=ve(s,e?.portal),j(s)&&(s=N(s)),e?.resources&&e?.portalItem&&!j(s)&&!U(s)&&t===A.YES&&e.resources.toKeep.push({resource:e.portalItem.resourceFromPath(s),compress:!1}),s}function Be(r,e,t){return ye(r,t)}function ee(r,e,t,s){let o=we(r,s);o!==void 0&&(e[t]=o)}var _=/\/items\/([^/]+)\/resources\/(.*)/,ze=/^\.\/resources\//;function Ge(r){return(r?.match(_)??null)?.[1]??null}function Qe(r){let e=r?.match(_)??null;if(e==null)return null;let t=e[2],s=t.lastIndexOf("/");if(s===-1){let{path:i,extension:n}=X(t);return{prefix:null,filename:i,extension:n}}let{path:o,extension:a}=X(t.slice(s+1));return{prefix:t.slice(0,s),filename:o,extension:a}}function ve(r,e){return e&&!e.isPortal&&e.urlKey&&e.customBaseUrl?H(r,`${e.urlKey}.${e.customBaseUrl}`,e.portalHostname):r}function Z(r,e){if(!e||e.isPortal||!e.urlKey||!e.customBaseUrl)return r;let t=`${e.urlKey}.${e.customBaseUrl}`,s=q();return T(s,`${s.scheme}://${t}`)?H(r,e.portalHostname,t):H(r,t,e.portalHostname)}function be(r){if(!r)return r||null;let e=r;return e&&d&&!d.findCredential(e)&&(e=B(e),e=e.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),e=e.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),e=e.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),e}function Se(r){if(!r)return r||null;let e=r;return e=e.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),e=e.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),e=e.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),e&&d&&!d.findCredential(e)&&(e=B(e)),e}var A;(function(r){r[r.YES=0]="YES",r[r.NO=1]="NO"})(A||(A={}));var qr=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return A},ensureMainOnlineDomain:ve,fromCDNUrl:Se,fromJSON:ye,itemIdFromResourceUrl:Ge,prefixAndFilenameFromResourceUrl:Qe,read:Be,toCDNUrl:be,toJSON:we,write:ee},Symbol.toStringTag,{value:"Module"}));var qe={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",knowledgegraphserver:"KnowledgeGraphServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer",videoserver:"VideoServer"},Oe=Object.values(qe),Te=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${Oe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Je=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^/\\n]+)\\/(${Oe.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),Ve=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function xr(r){return Te.test(r)}function Ce(r){if(r==null)return null;let e=O(r),t=e?.path.match(Te)||e?.path.match(Je);if(!t)return null;let[,s,o,a,i]=t,n=o.indexOf("/");return{title:xe(n!==-1?o.slice(n+1):o),serverType:qe[a.toLowerCase()],sublayer:i!=null&&i!==""?parseInt(i,10):null,url:{path:s}}}function Ye(r){let e=O(r).path.match(Ve);return e?{serviceUrl:e[1],sublayerId:Number(e[2])}:null}function xe(r){return(r=r.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+r.slice(1)}function kr(r,e){let t=[];if(r){let s=Ce(r);s!=null&&s.title&&t.push(s.title)}if(e){let s=xe(e);t.push(s)}if(t.length===2){if(t[0].toLowerCase().includes(t[1].toLowerCase()))return t[0];if(t[1].toLowerCase().includes(t[0].toLowerCase()))return t[1]}return t.join(" - ")}function re(r){let e=m(r,!0);return!!e&&(e=e.toLowerCase(),e.endsWith(".arcgis.com")&&(e.startsWith("services")||e.startsWith("tiles")||e.startsWith("features")))}function Ur(r,e){return r&&V(Y(r,e))}function Ar(r){let{url:e}=r;if(!e)return{url:e};e=Y(e,r.logger);let t=O(e),s=Ce(t.path),o;if(s!=null)s.sublayer!=null&&r.layer.layerId==null&&(o=s.sublayer),e=s.url.path;else if(r.nonStandardUrlAllowed){let a=Ye(t.path);a!=null&&(e=a.serviceUrl,o=a.sublayerId)}return{url:V(e),layerId:o}}function Er(r,e,t,s,o){ee(e,s,"url",o),s.url&&r.layerId!=null&&(s.url=fe(s.url,t,r.layerId.toString()))}function Lr(r){if(!r)return!1;let e=r.toLowerCase(),t=e.includes("/services/"),s=e.includes("/mapserver/wmsserver"),o=e.includes("/imageserver/wmsserver"),a=e.includes("/wmsserver");return t&&(s||o||a)}function Pr(r){if(!r)return!1;let e=new ce(k(r)),t=e.authority?.toLowerCase();return t==="server.arcgisonline.com"||t==="services.arcgisonline.com"}var Xe=new Set(["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"]);function Ze(r){let e=m(r,!0);return!!e&&e.endsWith(".arcgis.com")&&!Xe.has(e)&&!r.endsWith("/sharing/rest/generateToken")}function ke(r,e){return!(!e&&!w.apiKey||!Ze(r))}function Ae(r,e,t=!1,s){return new Promise((o,a)=>{if(x(s))return void a(Ue());let i=()=>{l(),a(new Error(`Unable to load ${e}`))},n=()=>{let p=r;l(),o(p)},c=()=>{if(!r)return;let p=r;l(),p.src="",a(Ue())},l=()=>{h("esri-image-decode")||(r.removeEventListener("error",i),r.removeEventListener("load",n)),i=null,n=null,r=null,s?.removeEventListener("abort",c),c=null,t&&URL.revokeObjectURL(e)};s?.addEventListener("abort",c),h("esri-image-decode")?r.decode().then(n,i):(r.addEventListener("error",i),r.addEventListener("load",n))})}function Ue(){try{return new DOMException("Aborted","AbortError")}catch{let r=new Error;return r.name="AbortError",r}}var Ee="Timeout exceeded";function Le(){return new Error(Ee)}function Mr(r){return typeof r=="object"&&!!r&&"message"in r&&r.message===Ee}function Pe(r){w.request.crossOriginNoCorsDomains||(w.request.crossOriginNoCorsDomains={});let e=w.request.crossOriginNoCorsDomains;for(let t of r)t=t.toLowerCase(),/^https?:\/\//.test(t)?e[m(t)??""]=0:(e[m("http://"+t)??""]=0,e[m("https://"+t)??""]=0)}function Ie(r){let e=w.request.crossOriginNoCorsDomains;if(e){let t=m(r);if(t)return t=t.toLowerCase(),!T(t,q())&&e[t]<Date.now()-36e5}return!1}function Re(r){return g(this,null,function*(){let e=O(r);r=e.path,e.query?.f==="json"&&(r+="?f=json");try{yield fetch(r,{mode:"no-cors",credentials:"include"})}catch{}let t=w.request.crossOriginNoCorsDomains,s=m(r);t&&s&&(t[s.toLowerCase()]=Date.now())})}function S(r,e){return g(this,null,function*(){r instanceof URL&&(r=r.toString()),e?.query instanceof URLSearchParams&&(e.query=ue(e.query.toString().replaceAll("+"," ")));let t=U(r),s=J(r);s||t||(r=N(r));let o={url:r,requestOptions:b({},e)},a=f=>({data:f,getAllHeaders:C,getHeader:C,httpStatus:200,requestOptions:o.requestOptions,url:o.url}),i=G(r,y.internalInterceptors);if(i){let f=yield Ne(i,o);if(f!=null)return a(f)}let n=G(r);if(n){let f=yield Ne(n,o);if(f!=null)return a(f);n.after||n.error||(n=null)}if(r=o.url,(e=o.requestOptions).responseType==="image"&&(h("host-webworker")||h("host-node")))throw v("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),o);if(e.method==="head"){if(e.body)throw v("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),o);if(t||s)throw v("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),o)}if(yield or(),M)return M.execute(r,e);let c=new AbortController,l=ne(e,()=>c.abort()),p={controller:c,credential:void 0,credentialToken:void 0,fetchOptions:void 0,hasToken:!1,interceptor:n,params:o,redoRequest:!1,useIdentity:y.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},E=e.useRequestQueue?cr(p):se(p),u=yield E.finally(()=>l?.remove());return n?.after?.(u),u})}var M,y=w.request,Fe="FormData"in globalThis,er=new Set([499,498,403,401]),rr=new Set(["COM_0056","COM_0057","SB_0008"]),tr=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],C=()=>null,$=Symbol();function sr(r){let e=m(r);e&&!S._corsServers.includes(e)&&S._corsServers.push(e)}function De(r){let e=m(r);return!e||e.endsWith(".arcgis.com")||S._corsServers.includes(e)||D(e)}function v(r,e,t,s){let o="Error",a={url:t.url,requestOptions:t.requestOptions,getAllHeaders:C,getHeader:C,ssl:!1};if(e instanceof I)return e.details?(e.details=oe(e.details),e.details.url=t.url,e.details.requestOptions=t.requestOptions):e.details=a,e;if(e){let i=s&&(()=>Array.from(s.headers)),n=s&&(p=>s.headers.get(p)),c=s?.status,l=e.message;l&&(o=l),i&&n&&(a.getAllHeaders=i,a.getHeader=n),a.httpStatus=(e.httpCode!=null?e.httpCode:e.code)||c||0,a.subCode=e.subcode,a.messageCode=e.messageCode,typeof e.details=="string"?a.messages=[e.details]:a.messages=e.details,a.raw=$ in e?e[$]:e}return ie(e)?R():new I(r,o,a)}function or(){return g(this,null,function*(){h("host-webworker")&&!M&&(M=yield import("./chunk-Y3WKK74D.js"))})}function te(){return g(this,null,function*(){d||(yield import("./chunk-GEYV256V.js"))})}function ar(r){return g(this,null,function*(){let e=r.params.url,t=r.params.requestOptions,s=r.controller.signal,o=t.body,a=null,i=null;if(Fe&&"HTMLFormElement"in globalThis&&(o instanceof FormData?a=o:o instanceof HTMLFormElement&&(a=new FormData(o))),typeof o=="string"&&(i=o),r.fetchOptions={cache:t.cacheBust?"no-cache":"default",credentials:"same-origin",headers:t.headers||{},method:t.method==="head"?"HEAD":"GET",mode:"cors",priority:y.priority,redirect:"follow",signal:s},(a||i)&&(r.fetchOptions.body=a||i),t.authMode==="anonymous"&&(r.useIdentity=!1),r.hasToken=!!(/token=/i.test(e)||t.query?.token||a?.get("token")),!r.hasToken&&ke(e)&&(t.query||(t.query={}),t.query.token=w.apiKey,r.hasToken=!0),r.useIdentity&&!r.hasToken&&!r.credentialToken&&!_e(e)&&!x(s)){let n;t.authMode==="immediate"?(yield te(),n=yield d.getCredential(e,{signal:s}),r.credential=n):t.authMode==="no-prompt"?(yield te(),n=yield d.getCredential(e,{prompt:!1,signal:s}).catch(()=>{}),r.credential=n):d&&(n=d.findCredential(e)),n&&(r.credentialToken=n.token,r.useSSL=!!n.ssl)}})}function _e(r){return tr.some(e=>e.test(r))}function nr(r){return g(this,null,function*(){let e=r.params.url,t=r.params.requestOptions,s=r.fetchOptions??{},o=J(e)||U(e),a=t.responseType||"json",i=o?0:t.timeout!=null?t.timeout:y.timeout,n=!1;if(!o){r.useSSL&&(e=he(e));let u=b({},t.query);r.credentialToken&&(u.token=r.credentialToken);let f=z(u);h("esri-url-encodes-apostrophe")&&(f=f.replaceAll("'","%27"));let K=e.length+1+f.length,W;n=t.method==="delete"||t.method==="post"||t.method==="put"||!!t.body||K>y.maxUrlLength;let L=t.useProxy||!!pe(e);if(L){let P=de(e);W=P.path,!n&&W.length+1+K>y.maxUrlLength&&(n=!0),P.query&&(u=b(b({},P.query),u))}if(s.method==="HEAD"&&(n||L)){if(n)throw K>y.maxUrlLength?v("request:invalid-parameters",new Error("URL exceeds maximum length"),r.params):v("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),r.params);if(L)throw v("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),r.params)}n?(s.method=t.method==="delete"?"DELETE":t.method==="put"?"PUT":"POST",t.body?e=F(e,u):(s.body=z(u),s.headers||(s.headers={}),s.headers["Content-Type"]="application/x-www-form-urlencoded")):e=F(e,u),L&&(r.useProxy=!0,e=`${W}?${e}`),u.token&&Fe&&s.body instanceof FormData&&!le(e)&&s.body.set("token",u.token),t.hasOwnProperty("withCredentials")?r.withCredentials=t.withCredentials:T(e,q())||(D(e)||d&&d.findServerInfo(e)?.webTierAuth)&&(r.withCredentials=!0),r.withCredentials&&(s.credentials="include",Ie(e)&&(yield Re(n?F(e,u):e)))}let c,l,p=0,E=!1;i>0&&(p=setTimeout(()=>{E=!0,r.controller.abort()},i));try{if(t.responseType==="native-request-init")l=s,l.url=e,t.signal?l.signal=t.signal:delete l.signal;else if(t.responseType!=="image"||s.cache!=="default"||s.method!=="GET"||n||ir(t.headers)||!o&&!r.useProxy&&y.proxyUrl&&!De(e)){if(S._beforeFetch&&(yield S._beforeFetch(e,s)),c=yield fetch(e,s),S._afterFetch&&(yield S._afterFetch(c)),r.useProxy||sr(e),t.responseType==="native")l=c;else if(s.method!=="HEAD")if(c.ok){switch(a){case"array-buffer":l=yield c.arrayBuffer();break;case"blob":case"image":l=yield c.blob();break;default:l=yield c.text()}if(p&&(clearTimeout(p),p=0),a==="json"||a==="xml"||a==="document")if(l)switch(a){case"json":l=JSON.parse(l);break;case"xml":l=je(l,"application/xml");break;case"document":l=je(l,"text/html")}else l=null;if(l){if(a==="array-buffer"||a==="blob"){let u=c.headers.get("Content-Type");if(u&&/application\/json|text\/plain/i.test(u)&&l[a==="blob"?"size":"byteLength"]<=750)try{let f=yield new Response(l).json();f.error&&(l=f)}catch{}}a==="image"&&l instanceof Blob&&(l=yield He(URL.createObjectURL(l),r,!0))}}else{l=yield c.text();try{l=JSON.parse(l)}catch{}}}else l=yield He(e,r)}catch(u){if(u.name==="AbortError")throw E?Le():R("Request canceled");if(!(!c&&u instanceof TypeError&&y.proxyUrl)||t.body||t.method==="delete"||t.method==="head"||t.method==="post"||t.method==="put"||r.useProxy||De(e))throw u;r.redoRequest=!0,me({proxyUrl:y.proxyUrl,urlPrefix:m(e)??""})}finally{p&&clearTimeout(p)}return[c,l]})}function Ne(r,e){return g(this,null,function*(){if(r.responseData!=null)return r.responseData;if(r.headers&&(e.requestOptions.headers=b(b({},e.requestOptions.headers),r.headers)),r.query&&(e.requestOptions.query=b(b({},e.requestOptions.query),r.query)),r.before){let t,s;try{s=yield r.before(e)}catch(o){t=v("request:interceptor",o,e)}if((s instanceof Error||s instanceof I)&&(t=v("request:interceptor",s,e)),t)throw r.error&&r.error(t),t;return s}})}function ir(r){if(r){for(let e of Object.getOwnPropertyNames(r))if(r[e])return!0}return!1}function je(r,e){let t;try{t=new DOMParser().parseFromString(r,e)}catch{}if(!t||t.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return t}S._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"],S._beforeFetch=void 0,S._afterFetch=void 0;var lr=new Map;function cr(r){return g(this,null,function*(){let e=dr(r.params.url);if(!e)return se(r);let{QueueProcessor:t}=yield import("./chunk-QTTCV5EV.js");return ae(lr,e.origin,()=>{let o=e.isHosted?h("request-queue-concurrency-hosted"):h("request-queue-concurrency-non-hosted");return new t({concurrency:o,process:a=>{if(x(a.params.requestOptions))throw v("",R("Request canceled"),a.params);return se(a)}})}).push(r)})}function se(r){return g(this,null,function*(){let e,t;yield ar(r);try{do[e,t]=yield nr(r);while(!(yield ur(r,e,t)))}catch(a){let i=v("request:server",a,r.params,e);throw i.details.ssl=r.useSSL,r.interceptor?.error&&r.interceptor.error(i),i}let s=r.params.url;if(t&&/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)){if(!r.hasToken&&!r.credentialToken&&t.user?.username&&!D(s)){let a=m(s,!0);a&&y.trustedServers.push(a)}Array.isArray(t.authorizedCrossOriginNoCorsDomains)&&Pe(t.authorizedCrossOriginNoCorsDomains)}let o=r.credential;if(o&&d){let i=d.findServerInfo(o.server)?.owningSystemUrl;if(i){i=i.replace(/\/?$/,"/sharing");let n=d.findCredential(i,o.userId);n&&d._getIdenticalSvcIdx(i,n)===-1&&n.resources.unshift(i)}}return{data:t,getAllHeaders:e?()=>Array.from(e.headers):C,getHeader:e?a=>e.headers.get(a):C,httpStatus:e?.status??200,requestOptions:r.params.requestOptions,ssl:r.useSSL,url:r.params.url}})}function ur(r,e,t){return g(this,null,function*(){if(r.redoRequest)return r.redoRequest=!1,!1;let s=r.params.requestOptions;if(!e||s.responseType==="native"||s.responseType==="native-request-init")return!0;let o,a;if(t&&(t.error&&typeof t.error=="object"?o=t.error:t.status==="error"&&Array.isArray(t.messages)&&(o=b({},t),o[$]=t,o.details=t.messages)),!o&&!e.ok)throw o=new Error(`Unable to load ${e.url} status: ${e.status}`),o[$]=t,o;let i,n=null;o&&(a=Number(o.code),n=o.hasOwnProperty("subcode")?Number(o.subcode):null,i=o.messageCode,i=i?.toUpperCase());let c=s.authMode;if(a===403&&(n===4||o.message?.toLowerCase().includes("ssl")&&!o.message.toLowerCase().includes("permission"))){if(!r.useSSL)return r.useSSL=!0,!1}else if(!r.hasToken&&r.useIdentity&&(c!=="no-prompt"||a===498)&&a!==void 0&&er.has(a)&&!_e(r.params.url)&&(a!==403||(!i||!rr.has(i))&&(n==null||n===2&&r.credentialToken))){yield te();try{let l=yield d.getCredential(r.params.url,{error:v("request:server",o,r.params),prompt:c!=="no-prompt",signal:r.controller.signal,token:r.credentialToken});return r.credential=l,r.credentialToken=l.token,r.useSSL=r.useSSL||l.ssl,!1}catch(l){if(c==="no-prompt")return r.credential=void 0,r.credentialToken=void 0,!1;o=l}}if(o)throw o;return!0})}function He(r,e,t=!1){let s=e.controller.signal,o=new Image;return e.withCredentials?o.crossOrigin="use-credentials":o.crossOrigin="anonymous",o.alt="",o.fetchPriority=y.priority,o.src=r,Ae(o,r,t,s)}function dr(r){let e,t;return typeof r=="string"?(e=m(r,!0),t=re(r)):(e=r.origin,t=re(r.toString())),e==null?null:{origin:e,isHosted:t}}export{Me as a,$e as b,Ke as c,d,We as e,hr as f,gr as g,ye as h,we as i,Be as j,ee as k,Ge as l,Qe as m,ve as n,be as o,A as p,qr as q,xr as r,Ce as s,Ye as t,xe as u,kr as v,re as w,Ur as x,Ar as y,Er as z,Lr as A,Pr as B,ke as C,Ae as D,Mr as E,S as F};
