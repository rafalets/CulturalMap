import{a as c}from"./chunk-BYX5KLGZ.js";import{b as s}from"./chunk-EKMHQEJY.js";import{L as f,d as t}from"./chunk-C7INQGWT.js";import{H as d}from"./chunk-WMHJC7XF.js";import{a as e}from"./chunk-QGVBCWUY.js";import{r as m}from"./chunk-HHDFN2GK.js";import{j as v}from"./chunk-47GHT6OF.js";var a=class extends f{constructor(o){super(o),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new s}};e([t({constructOnly:!0})],a.prototype,"layer",void 0),e([t()],a.prototype,"enabled",void 0),e([t()],a.prototype,"updating",void 0),e([t()],a.prototype,"availability",void 0),e([t()],a.prototype,"sublayerSources",void 0),a=e([d("esri.views.interactive.snapping.FeatureSnappingLayerSource")],a);var y=a;var r=class extends f{constructor(o){super(o),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.gridEnabled=!1,this.attributeRulesEnabled=!1,this.featureSources=new s,this.distance=c.distance,this.touchSensitivityMultiplier=c.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveGridEnabled(){return this.effectiveEnabled&&this.gridEnabled}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){let o=this.featureSources;o.some(h)&&m.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");let b=o.filter(w),n=this._get("_effectiveFeatureSources")?.filter(h)??new s;for(let i of b){let p=n.find(l=>l.layer===i.layer.parent);if(p)p.sublayerSources.includes(i)||p.sublayerSources.add(i);else if(i.layer.parent){let l=new y({layer:i.layer.parent});l.sublayerSources.add(i),n.add(l)}}for(let i of n){let p=i.sublayerSources.filter(l=>!b.includes(l));i.sublayerSources.removeMany(p)}n.removeMany(n.filter(i=>i.sublayerSources.length===0));let g=o.filter(O),u=this._get("_effectiveFeatureSources")??new s,{added:S,removed:E}=v(u.toArray(),[...g,...n]);return u.removeMany(E),u.addMany(S),u}};e([t()],r.prototype,"enabled",void 0),e([t()],r.prototype,"enabledToggled",void 0),e([t()],r.prototype,"forceDisabled",void 0),e([t()],r.prototype,"selfEnabled",void 0),e([t()],r.prototype,"featureEnabled",void 0),e([t()],r.prototype,"gridEnabled",void 0),e([t()],r.prototype,"attributeRulesEnabled",void 0),e([t({type:s.ofType(y)})],r.prototype,"featureSources",void 0),e([t()],r.prototype,"distance",void 0),e([t()],r.prototype,"touchSensitivityMultiplier",void 0),e([t({readOnly:!0})],r.prototype,"effectiveEnabled",null),e([t({readOnly:!0})],r.prototype,"effectiveGridEnabled",null),e([t({readOnly:!0})],r.prototype,"effectiveSelfEnabled",null),e([t({readOnly:!0})],r.prototype,"effectiveFeatureEnabled",null),e([t({readOnly:!0})],r.prototype,"_effectiveFeatureSources",null),r=e([d("esri.views.interactive.snapping.SnappingOptions")],r);var N=r;function h(o){return o.layer.type==="subtype-group"}function O(o){return o.layer.type!=="subtype-group"}function w(o){return o.layer.type==="subtype-sublayer"}export{y as a,N as b};
