import{a as te}from"./chunk-S5WFBHUR.js";import{a as Z,b as J,c as K,d as N,e as Q,f as ee,g as I,i as le}from"./chunk-EY7OVTAY.js";import{a as Y}from"./chunk-YO56ZRXD.js";import{a as G,c as q,k as F,l as U,m as X,n as E}from"./chunk-IPGHBSHO.js";import{b as j}from"./chunk-IJBTA53P.js";import{g as u}from"./chunk-UAKHZRKN.js";import{e as x,g as W}from"./chunk-HAHX77IL.js";import{a as T,b as _,f as z}from"./chunk-VTHXE323.js";var re="esri-relationship-ramp",H=`${re}--diamond`,C=`${re}--square`,de="http://www.w3.org/2000/svg",f={diamondContainer:`${H}__container`,diamondLeftCol:`${H}__left-column`,diamondRightCol:`${H}__right-column`,diamondMidCol:`${H}__middle-column`,diamondMidColLabel:`${H}__middle-column--label`,diamondMidColRamp:`${H}__middle-column--ramp`,squareTable:`${C}__table`,squareTableRow:`${C}__table-row`,squareTableCell:`${C}__table-cell`,squareTableLabel:`${C}__table-label`,squareTableLabelLeftBottom:`${C}__table-label--left-bottom`,squareTableLabelRightBottom:`${C}__table-label--right-bottom`,squareTableLabelLeftTop:`${C}__table-label--left-top`,squareTableLabelRightTop:`${C}__table-label--right-top`};function he(l,e,t={}){let{focus:i,labels:a}=l,o=!!i,r=ye(l,e,t),c={justifyContent:"center"},b=W(),h=t.key??e;return o?u("div",{class:f.diamondContainer,key:`${h}-container`,styles:c},u("div",{class:f.diamondLeftCol},b?a.right:a.left),u("div",{class:f.diamondMidCol},u("div",{class:f.diamondMidColLabel},a.top),r,u("div",{class:f.diamondMidColLabel},a.bottom)),u("div",{class:f.diamondRightCol},b?a.left:a.right)):u("div",{class:f.squareTable,key:`${h}-container`},u("div",{class:f.squareTableRow},u("div",{class:x(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightBottom)},b?a.top:a.left),u("div",{class:f.squareTableCell}),u("div",{class:x(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftBottom)},b?a.left:a.top)),u("div",{class:f.squareTableRow},u("div",{class:f.squareTableCell}),r,u("div",{class:f.squareTableCell})),u("div",{class:f.squareTableRow},u("div",{class:x(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightTop)},b?a.right:a.bottom),u("div",{class:f.squareTableCell}),u("div",{class:x(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftTop)},b?a.bottom:a.right)))}function ae(l,e,t){let i=`${t}_arrowStart`,a=`${t}_arrowEnd`,o=l==="left",r={markerStart:null,markerEnd:null};switch(e){case"HL":o?r.markerStart=`url(#${a})`:r.markerEnd=`url(#${i})`;break;case"LL":r.markerStart=`url(#${a})`;break;case"LH":o?r.markerEnd=`url(#${i})`:r.markerStart=`url(#${a})`;break;default:r.markerEnd=`url(#${i})`}return r}function ye(l,e,t={}){let{focus:i,numClasses:a,colors:o,rotation:r}=l,{opacity:c,effectList:b,ariaLabel:h}=t,m=t.size??60,p=!!i,n=Math.sqrt(m**2+m**2)+(p?0:5),y=[],s=[],g=[],w=(m||75)/a;for(let $=0;$<a;$++){let me=$*w;for(let V=0;V<a;V++){let pe=V*w,B=J(o[$][V]),be=K(null),P={type:"rect",x:pe,y:me,width:w,height:w},D=N(B);D&&y.push(D);let O=Z(P,B.fill,be,null);O&&s.push(O),g.push(Q(P))}}let k=15,L=15,d=10,S=null;p||(S="margin: -15px -15px -18px -15px");let v=ae("left",i,e),R=ae("right",i,e),A=ee(g),ce=I(A,n,n,0,!1,r,!1),ue=I(A,n,n,0,!1,p?-45:null,!1),fe={filter:E(b)??void 0,opacity:c==null?"":`${c}`};return u("div",{class:p?f.diamondMidColRamp:f.squareTableCell,styles:fe},u("svg",{"aria-label":h,focusable:!1,height:n,role:"image",style:S,width:n,xmlns:de},u("defs",null,u("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},u("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),u("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},u("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),u("g",{transform:ce},s),u("g",{transform:ue},u("line",{fill:"none","marker-end":v.markerEnd,"marker-start":v.markerStart,stroke:"#555555","stroke-width":"1",x1:-10,x2:-10,y1:m-k,y2:k}),u("line",{fill:"none","marker-end":R.markerEnd,"marker-start":R.markerStart,stroke:"#555555","stroke-width":"1",x1:L,x2:m-L,y1:m+d,y2:m+d}))))}var oe={HH:315,HL:45,LL:135,LH:225},ge={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Le(l){if(!l)return;let{type:e}=l;if(e.includes("3d"))return te(l.symbolLayers.at(0));if(e==="simple-line"){let t=q(l);return t&&t.color}if(l.type==="simple-marker"&&(l.style==="x"||l.style==="cross")){let t=q(l);return t&&t.color}return G(l)}function we(l,e){let t=e.HH.label,i=e.LL.label,a=e.HL.label,o=e.LH.label;switch(l){case"HH":default:return{top:t,bottom:i,left:a,right:o};case"HL":return{top:a,bottom:o,left:i,right:t};case"LL":return{top:i,bottom:t,left:o,right:a};case"LH":return{top:o,bottom:a,left:t,right:i}}}function ke(l){let{focus:e,infos:t,numClasses:i}=l,a=ge[i],o={};t.forEach(c=>{o[c.value]={label:c.label,fill:Le(c.symbol)}});let r=[];for(let c=0;c<i;c++){let b=[];for(let h=0;h<i;h++){let m=o[a[c][h]];b.push(m.fill)}r.push(b)}return{type:"relationship-ramp",numClasses:i,focus:e,colors:r,labels:we(e,o),rotation:Se(e)}}function Se(l){let e=oe[l];return l&&e==null&&(e=oe.HH),e||0}var M=null,ie=[255,255,255];function se(l,e){return Math.floor(Math.random()*(e-l+1)+l)}function Qe(l,e,t){let{backgroundColor:i,outline:a,dotSize:o}=l,r=t?.swatchSize||Y.size,c=.8,b=Math.round(r*r/Math.max(o,.5)**2*c),h=window.devicePixelRatio,m=document.createElement("canvas"),p=r*h;m.width=p,m.height=p,m.style.width=m.width/h+"px",m.style.height=m.height/h+"px";let n=m.getContext("2d");if(i&&(n.fillStyle=i.toCss(!0),n.fillRect(0,0,p,p),n.fill()),n.fillStyle=e?.toCss(!0)??"",M&&M.length/2===b)for(let s=0;s<2*b;s+=2){let g=M[s],w=M[s+1];n.fillRect(g,w,o*h,o*h),n.fill()}else{M=[];for(let s=0;s<2*b;s+=2){let g=se(0,p),w=se(0,p);M.push(g,w),n.fillRect(g,w,o*h,o*h),n.fill()}}a&&(a.color&&(n.strokeStyle=a.color.toCss(!0)),n.lineWidth=a.width,n.strokeRect(0,0,p,p));let y=new Image(r,r);return y.src=m.toDataURL(),y.ariaLabel=t?.ariaLabel??null,y.alt=t?.ariaLabel??"",y}function el(l,e={}){let t=e.radius||40,i=2*Math.PI*t,a=l.length,o=i/a,r=[],c=q(e.outline);c?.width!=null&&(c.width*=2),(c||e.backgroundColor)&&r.push({shape:{type:"circle",cx:t,cy:t,r:t},fill:e.backgroundColor,stroke:c,offset:[0,0]});let b=e.values,h=b&&b.length===a&&b.reduce((s,g)=>s+g,0)===100,m=[0];for(let s=0;s<a;s++){let g=null;h&&(g=b[s]*i/100,m.push(g+m[s])),r.push({shape:{type:"circle",cx:t,cy:t,r:t/2},fill:[0,0,0,0],stroke:{width:t,dashArray:`${(g??o)/2} ${i}`,dashoffset:"-"+(h?m[s]/2:s*(o/2)),color:l[s]},offset:[0,0]})}let p=null,n=2*t+(c?.width||0),y=e.holePercentage;if(y){c&&r.push({shape:{type:"circle",cx:t,cy:t,r:t*y},fill:null,stroke:c,offset:[0,0]});let s=n/2;p=[[{shape:{type:"circle",cx:s,cy:s,r:s},fill:ie,stroke:c?_(T({},c),{color:ie}):null,offset:[0,0]},{shape:{type:"circle",cx:s,cy:s,r:t*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return le([r],[n,n],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:p,rotations:[-90],ariaLabel:e.ariaLabel})}function ll(l,e={}){let a=e.align==="horizontal",o=a?75:24,r=a?24:75,c=e.width??o,b=e.height??r,h=e.gradient??!0,m=window.devicePixelRatio,p=c*m,n=b*m,y=document.createElement("canvas");y.width=p,y.height=n,y.ariaLabel=e.ariaLabel??null,y.style.width=`${c}px`,y.style.height=`${b}px`;let s=y.getContext("2d"),g=a?p:0,w=a?0:n;if(h){let L=s.createLinearGradient(0,0,g,w),d=l.length,S=d===1?0:1/(d-1);l.forEach((v,R)=>L.addColorStop(R*S,v.toString())),s.fillStyle=L,s.fillRect(0,0,p,n)}else{let L=a?p/l.length:p,d=a?n:n/l.length,S=0,v=0;for(let R of l)s.fillStyle=R.toString(),s.fillRect(S,v,L,d),S=a?S+L:0,v=a?0:v+d}let k=document.createElement("div");return k.style.width=`${c}px`,k.style.height=`${b}px`,ve(k,e?.effectList),k.appendChild(y),k}function ve(l,e){if(!e)return;l.style.filter=E(e);let t=e.effects;if(t){for(let i of t)if(i?.type==="drop-shadow"){i.offsetX<0?l.style.marginLeft=`${Math.abs(i.offsetX)}px`:l.style.marginRight=`${i.offsetX}px`;break}}}function Ce(l,e){return z(this,null,function*(){switch(l.type){case"web-style":{let{previewWebStyleSymbol:t}=yield import("./chunk-QPOYCFZE.js");return t(l,Ce,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{let{previewSymbol3D:t}=yield import("./chunk-H6L3WDVZ.js");return t(l,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{let{previewSymbol2D:t}=yield import("./chunk-BMBAHY5C.js");return t(l,e)}case"cim":{let{previewCIMSymbol:t}=yield import("./chunk-U4B5KZCO.js");return t(l,e)}default:return}})}function ne(l){return l&&"opacity"in l?l.opacity*ne(l.parent):1}function tl(l,e){return z(this,null,function*(){if(!l)return;let t=l.sourceLayer,i=(e!=null&&e.useSourceLayer?t:l.layer)??t,a=e?.ignoreOpacity?1:ne(i);if(l.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){let d=l.symbol.type==="web-style"?yield l.symbol.fetchSymbol(_(T({},e),{acceptedFormats:["web","cim"],cache:e!=null?e.webStyleCache:null})):l.symbol.clone();return F(d,null,a),d}let o=e?.renderer??Re(i),r=o&&"getSymbolAsync"in o?yield o.getSymbolAsync(l,e):null;if(!r)return;if(r=r.type==="web-style"?yield r.fetchSymbol(_(T({},e),{cache:e!=null?e.webStyleCache:null})):r.clone(),!o||!("visualVariables"in o)||!o.visualVariables?.length)return F(r,null,a),r;if("arcadeRequiredForVisualVariables"in o&&o.arcadeRequiredForVisualVariables&&e?.arcade==null){let d=T({},e);d.arcade=yield j(),e=d}let{getColor:c,getOpacity:b,getAllSizes:h,getRotationAngle:m}=yield import("./chunk-P2RJV47D.js"),p=[],n=[],y=[],s=[];for(let d of o.visualVariables)switch(d.type){case"color":p.push(d);break;case"opacity":n.push(d);break;case"rotation":s.push(d);break;case"size":d.target||y.push(d)}let g=!!p.length&&p[p.length-1],w=g?c(g,l,e):null,k=!!n.length&&n[n.length-1],L=k?b(k,l,e):null;if(a!=null&&(L=L!=null?L*a:a),e?.ignoreOpacity&&(L=1),F(r,w,L),y.length&&e?.ignoreSizeVariables!==!0){let d=h(y,l,e);yield U(r,d)}if(e?.ignoreRotationVariables!==!0)for(let d of s)X(r,m(d,l,e),d.axis);return r})}function Re(l){if(l)return"renderer"in l?l.renderer:void 0}export{he as a,ke as b,Se as c,Qe as d,el as e,ll as f,Ce as g,tl as h};
