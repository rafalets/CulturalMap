function bs(i){switch(i){case 1:return"Unknown error";case 2:return"Corrupted geometry";case 3:return"Empty geometry";case 4:return"Math singularity";case 5:return"Buffer is too small";case 6:return"Invalid shape type";case 7:return"Projection out of supported range";case 8:return"Non simple geometry";case 9:return"Cannot calculate geodesic";case 10:return"Notation conversion";case 11:return"Missing grid file";case 12:return"Invalid call";case 13:return"Internal error";case 14:return"Not implemented";case 15:return"IO error";case 16:return"Invalid 3D";case 17:return"An ambiguous geography edge with antipodal points";case 18:return"Geocentric coordinates require ellipsoidal height";case 19:return"Geography cannot be projected into a gnomonic plane or a result of an operation cannot fit into a gnomonic plane";case 20:return"Geometry is too large to be exported in to a given format";case 22:return"Operation is canceled by the user";case 21:return"The operation, such as projection or geodetic computation, cannot be performed without pe-wasm loaded";default:return"unknown error"}}function p(i,t){try{if(!i)throw new Error(t)}catch(s){throw s}}var L=class extends Error{constructor(t,s){super(s),this.m_AdditionalMessage=s,this.m_ErrorType=t,this.name="GeometryError"}what(){return bs(this.m_ErrorType)}additionalMessage(){return this.m_AdditionalMessage?this.m_AdditionalMessage:""}code(){return this.m_ErrorType}},lt=class extends L{constructor(t){super(2,t),this.name="CorruptedGeometryError"}},ct=class extends L{constructor(t){super(3,t),this.name="EmptyGeometryError"}},mt=class extends L{constructor(t){super(4,t),this.name="MathSingularityError"}},yt=class extends L{constructor(t){super(21,t),this.name="ProjectionEngineNotLoadedError"}},xt=class extends L{constructor(t){super(8,t),this.name="NonSimpleGeometryError"}},V;(function(i){i[i.enumUnknown=0]="enumUnknown",i[i.enumPoint=513]="enumPoint",i[i.enumLine=5122]="enumLine",i[i.enumBezier=5123]="enumBezier",i[i.enumEllipticArc=5124]="enumEllipticArc",i[i.enumEnvelope=3077]="enumEnvelope",i[i.enumMultiPoint=8710]="enumMultiPoint",i[i.enumPolyline=25607]="enumPolyline",i[i.enumPolygon=27656]="enumPolygon",i[i.enumMultipatch=40969]="enumMultipatch",i[i.enumGeometryCollection=3594]="enumGeometryCollection",i[i.enumRationalBezier2=5134]="enumRationalBezier2",i[i.enumBezier2=5135]="enumBezier2",i[i.enumRationalBezier23d=5392]="enumRationalBezier23d",i[i.enumGreatArc3d=5393]="enumGreatArc3d"})(V||(V={}));var vs=[0,0,1,1,1,2,0,1,2,3,-1,-1,-1,-1,1,1];function di(i){return vs[15&i]}function bi(i){return!!(512&i)}function vi(i){return!!(1024&i)}function wi(i){return!!(2048&i)}function Ut(i){return!!(4096&i)}function ws(i){return!!(8192&i)}function Ns(i){return!!(16384&i)}function ps(i){return!!(32768&i)}function Ni(i){let t=i.getGeometryType();return ws(t)?i.getPointCount():i.isEmpty()?0:t===V.enumEnvelope?4:t===V.enumPoint?1:Ut(t)?2:void Ms("missing type")}function Qt(i){let t=i.getGeometryType();if(Ns(t))return i.hasNonLinearSegments();if(t===V.enumGeometryCollection){let s=i;for(let e=0,n=s.getGeometryCount();e<n;e++)if(Qt(s.getGeometry(e)))return!0;return!1}return!!Ut(t)&&t!==V.enumLine}function pi(i){throw new yt(i)}function Mi(i){throw new lt(i)}function G(i){throw new Error(i)}function et(i){throw new mt(i)}function _i(){G("Geometry type is not supported for 3D operations.")}function Ci(i){throw new L(12,i)}function gi(i){throw new ct(i)}function W(i){throw new L(14,i)}function Vt(i){throw new Error(i)}function Ms(i){throw new L(13,i)}function Ti(i){throw new Error(i)}function Ri(i){throw new xt(i)}function _s(){W("Operation does not support curves.")}function Ei(i){i&&Qt(i)&&_s()}function Ii(i){i&&ps(i.getGeometryType())&&W("Unsupported geometry type.")}function Cs(i){i===V.enumGeometryCollection&&G("Geometry_collection instances are not supported in this operation")}function Ai(i){Cs(i.getGeometryType())}function Di(i){G(`bad wkid: ${i}`)}function Pi(i){let t="bad wkt: ";t+=i,t+="...",G(t)}function qi(i,t){i||G(t)}var tt=class i{constructor(t){this.sum=t,this.compensation=0}assign(t){return this.compensation=t.compensation,this.sum=t.sum,this}reset(){this.sum=this.compensation=0}resetToStart(t){this.sum=t,this.compensation=0}normalize(){let t=[Number.NaN];this.sum=H(this.sum,this.compensation,t),this.compensation=t[0]}add(t){let s=this.sum+t,e;if(Math.abs(this.sum)>=Math.abs(t)){let n=this.sum-s+t;e=this.compensation+n}else{let n=t-s+this.sum;e=this.compensation+n}this.sum=s,this.compensation=e}sub(t){this.add(-t)}addProduct(t,s){let e=[0],n=ht(t,s,e);this.add(n),this.add(e[0])}mul(t){let s=new i(0);s.addProduct(this.sum,t),s.addProduct(this.compensation,t),this.assign(s)}getResult(){return this.sum+this.compensation}pe(t){return this.add(t),this}me(t){return this.add(-t),this}},gs=0x00000000ffffffffn,Ts=0x0000ffffn,Rs=0x000000ffn,Es=0x0fn,Is=0xffff0000n,As=0xff00n,Ds=0xf0n,Ps=[5,1,2,1,3,1,2,1,4,1,2,1,3,1,2,1],qs=[-1,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3];function wt(i){let t=0;return i&Ts||(t+=16,i>>=16n),i&Rs||(t+=8,i>>=8n),i&Es||(t+=4,i>>=4n),t+Ps[Number(BigInt.asUintN(4,i))]}function zs(i){let t=0;return i&Is&&(t+=16,i>>=16n),i&As&&(t+=8,i>>=8n),i&Ds&&(t+=4,i>>=4n),t+qs[Number(BigInt.asUintN(4,i))]+1}function Wt(i){let t=0;return i&gs||(t=32,i>>=32n),t+wt(BigInt.asUintN(32,i))}function Zs(i){let t=0;return 0xffffffff00000000n&i&&(t=32,i>>=32n),t+zs(i)}var rt=class i{constructor(t,s){if(this.m_EnvelopeType=1,t!==void 0){if(t instanceof i)return this.vmin=t.vmin,void(this.vmax=t.vmax);this.vmin=t,this.vmax=s,this.normalize()}else this.setEmpty()}static construct(t,s){return new i(t,s)}static constructEmpty(){return new i}setCoords(t,s){this.vmin=t,this.vmax=s,this.normalize()}setCoordsFromEnvelope(t){this.vmin=t.vmin,this.vmax=t.vmax}setEmpty(){this.vmin=Number.NaN,this.vmax=Number.NaN}getCenter(){return .5*(this.vmin+this.vmax)}equalsRange(t,s){return is(this.vmin,t)&&is(this.vmax,s)}equals(t,s){return!(!this.isEmpty()||!t.isEmpty())||(s!==void 0?Math.abs(this.vmin-t.vmin)<=s&&Math.abs(this.vmax-t.vmax)<=s:this.vmin===t.vmin&&this.vmax===t.vmax)}width(){return this.vmax-this.vmin}isEmpty(){return Number.isNaN(this.vmin)||Number.isNaN(this.vmax)}isZero(){return this.vmin===this.vmax}setInfinite(){this.vmin=Number.NEGATIVE_INFINITY,this.vmax=Number.POSITIVE_INFINITY}move(t){this.isEmpty()||(this.vmin+=t,this.vmax+=t)}contains(t){return t.vmin>=this.vmin&&t.vmax<=this.vmax}containsCoordinate(t){return t>=this.vmin&&t<=this.vmax}containsRightExclusive(t){return t>=this.vmin&&t<this.vmax}containsExclusiveCoordinate(t){return t>this.vmin&&t<this.vmax}containsExclusive(t){return t.vmin>this.vmin&&t.vmax<this.vmax}isIntersecting(t){return this.vmin<=t.vmin?this.vmax>=t.vmin:t.vmax>=this.vmin}mergeCoordinate(t){if(this.isEmpty())return this.vmin=t,void(this.vmax=t);this.mergeNeCoordinate(t)}merge(t){if(t.isEmpty())return;let s=t.vmin,e=t.vmax;this.mergeCoordinate(s),this.mergeCoordinate(e)}mergeNe(t){let s=t.vmin,e=t.vmax;this.mergeNeCoordinate(s),this.mergeNeCoordinate(e)}mergeNeCoordinate(t){t<this.vmin?this.vmin=t:t>this.vmax&&(this.vmax=t)}intersect(t){this.isEmpty()||t.isEmpty()?this.setEmpty():(this.vmin<t.vmin&&(this.vmin=t.vmin),this.vmax>t.vmax&&(this.vmax=t.vmax),this.vmin>this.vmax&&this.setEmpty())}inflate(t){this.isEmpty()||(this.vmin-=t,this.vmax+=t,this.vmax<this.vmin&&this.setEmpty())}normalize(){this.vmin<=this.vmax||(this.vmin>this.vmax?this.vmax=$(this.vmin,this.vmin=this.vmax):this.setEmpty())}isValid(){return this.isEmpty()||this.vmin<=this.vmax}snapClip(t){return ds(t,this.vmin,this.vmax)}calculateToleranceFromEnvelope(){return this.isEmpty()?es():(Math.abs(this.vmin)+Math.abs(this.vmax)+1)*es()}static unit(){return Ss}normalizeNoNAN(){this.vmin>this.vmax&&(this.vmax=$(this.vmin,this.vmin=this.vmax))}setCoordsNoNAN(t,s){this.vmin=t,this.vmax=s,this.normalizeNoNAN()}clone(){return new i(this.vmin,this.vmax)}},Ss=new rt(0,1),D=class i{static getNAN(){return new i(Number.NaN)}constructor(t,s){this.m_value=t??0,this.m_eps=s??0}[Symbol.toPrimitive](t){return this}clone(){return new i(this.m_value,this.m_eps)}assign(t){return this.m_value=t.m_value,this.m_eps=t.m_eps,this}scaleError(t){this.m_eps*=t}setError(t){this.m_eps=t}set(t,s){return this.m_value=t,this.m_eps=s??0,this}setWithEps(t,s){return s===void 0&&(s=1),this.m_value=t,this.m_eps=i.ulp(t)*s,this}setE(t){return this.m_value=t.m_value,this.m_eps=t.m_eps,this}precise(){return new i(this.m_value)}value(){return this.m_value}toDouble(){return this.m_value}eps(){return this.m_eps}resetError(){return this.m_eps=0,this}absThis(){return this.m_value=Math.abs(this.m_value),this}add(t){return this.clone().addThis(t)}addE(t){return this.clone().addThisE(t)}addThisE(t){let s=this.m_value+t.m_value,e=this.m_eps+t.m_eps+i.ulp(s);return this.m_value=s,this.m_eps=e,this}addThis(t){let s=this.m_value+t,e=this.m_eps+i.ulp(s);return this.m_value=s,this.m_eps=e,this}subE(t){return this.clone().subThisE(t)}sub(t){return this.clone().subThis(t)}subThisE(t){let s=this.m_value-t.m_value,e=this.m_eps+t.m_eps+i.ulp(s);return this.m_value=s,this.m_eps=e,this}subThis(t){let s=this.m_value-t,e=this.m_eps+i.ulp(s);return this.m_value=s,this.m_eps=e,this}setAddE(t,s){return this.m_value=t.m_value+s.m_value,this.m_eps=t.m_eps+s.m_eps+i.ulp(this.m_value),this}setAdd(t,s){return this.m_value=t+s,this.m_eps=i.ulp(this.m_value),this}setAddEN(t,s){return this.m_value=t.m_value+s,this.m_eps=t.m_eps+i.ulp(this.m_value),this}setAddNE(t,s){return this.m_value=t+s.m_value,this.m_eps=s.m_eps+i.ulp(this.m_value),this}setSubE(t,s){return this.m_value=t.m_value-s.m_value,this.m_eps=t.m_eps+s.m_eps+i.ulp(this.m_value),this}setSub(t,s){return this.m_value=t-s,this.m_eps=i.ulp(this.m_value),this}setSubEN(t,s){return this.m_value=t.m_value-s,this.m_eps=t.m_eps+i.ulp(this.m_value),this}setSubNE(t,s){return this.m_value=t-s.m_value,this.m_eps=s.m_eps+i.ulp(this.m_value),this}mulThisE(t){let s=this.m_value*t.m_value;return this.m_eps=this.m_eps*Math.abs(t.m_value)+t.m_eps*Math.abs(this.m_value)+this.m_eps*t.m_eps+i.ulp(s),this.m_value=s,this}mulThis(t){let s=this.m_value*t;return this.m_eps=this.m_eps*Math.abs(t)+i.ulp(s),this.m_value=s,this}mul(t){return this.clone().mulThis(t)}mulE(t){return this.clone().mulThisE(t)}setMulE(t,s){let e=t.m_value*s.m_value;return this.m_eps=t.m_eps*Math.abs(s.m_value)+s.m_eps*Math.abs(t.m_value)+t.m_eps*s.m_eps+i.ulp(e),this.m_value=e,this}setMul(t,s){return this.m_value=t*s,this.m_eps=i.ulp(this.m_value),this}setMulEN(t,s){return this.setE(t),this.mulThis(s)}setMulNE(t,s){return this.setE(s),this.mulThis(t)}mulThisByPower2(t){return this.m_value*=t,this.m_eps*=Math.abs(t),this}static st_mulByPower2(t,s){return new i(t.m_value,t.m_eps).mulThisByPower2(s)}divE(t){return this.clone().divThisE(t)}divThisE(t){let s=Math.abs(t.m_value),e=this.m_value/t.m_value,n=(this.m_eps+Math.abs(e)*t.m_eps)/s;if(t.m_eps>.01*s){let r=t.m_eps/s;n*=1+(1+r)*r}return this.m_value=e,this.m_eps=n+i.ulp(e),this}divThis(t){let s=Math.abs(t);return this.m_value/=t,this.m_eps=this.m_eps/s+i.ulp(this.m_value),this}setDivE(t,s){return this.setE(t),this.divThisE(s)}setDiv(t,s){return this.m_value=t/s,this.m_eps=i.ulp(this.m_value),this}setDivEN(t,s){return this.setE(t),this.divThis(s)}setDivNE(t,s){return this.set(t),this.divThisE(s)}divThisByPower2(t){return this.m_value/=t,this.m_eps/=Math.abs(t),this}invThis(){return this.setE(ot.clone().divThisE(this)),this}sqrt(){return this.clone().sqrtThis()}sqrtThis(){let t,s;return this.m_value>=0?(t=Math.sqrt(this.m_value),s=this.m_value>10*this.m_eps?.5*this.m_eps/t:this.m_value>this.m_eps?t-Math.sqrt(this.m_value-this.m_eps):Math.max(t,Math.sqrt(this.m_value+this.m_eps)-t),s+=i.ulp(t)):this.m_value<-this.m_eps?(t=Number.NaN,s=Number.NaN):(t=0,s=Math.sqrt(this.m_eps)),this.m_value=t,this.m_eps=s,this}sqr(){return this.clone().sqrThis()}sqrThis(){let t=this.m_value*this.m_value;return this.m_eps=2*this.m_eps*Math.abs(this.m_value)+this.m_eps*this.m_eps+i.ulp(t),this.m_value=t,this}setSin(t){let s=Math.sin(t.m_value),e=Math.cos(t.m_value);this.m_value=s;let n=Math.abs(s),r=Math.abs(t.value());return this.m_eps=(Math.abs(e)+.5*n*t.m_eps)*t.m_eps+i.ulp(n+r),this}static ulp(t){let s=st(t),e=((0x7ff0000000000000n&s)>>52n)-1075n;return e>-1023n?(s=e+0x3ffn<<52n,Ks(s)):t===0?0:Number.MIN_VALUE}setCos(t){let s=Math.sin(t.m_value),e=Math.cos(t.m_value);this.m_value=e;let n=Math.abs(e),r=Math.abs(t.value());return this.m_eps=(Math.abs(s)+.5*n*t.m_eps)*t.m_eps+i.ulp(n+r),this}static st_cosAndSin(t,s,e){let n=Math.sin(t.m_value),r=Math.cos(t.m_value);e.m_value=n,s.m_value=r;let o=Math.abs(n),h=Math.abs(r),a=Math.abs(t.value());e.m_eps=(Math.abs(r)+.5*o*t.m_eps)*t.m_eps+i.ulp(o+a),s.m_eps=(Math.abs(n)+.5*h*t.m_eps)*t.m_eps+i.ulp(h+a)}negate(){return this.clone().negateThis()}negateThis(){return this.m_value=-this.m_value,this}setAbs(){return this.m_value=Math.abs(this.m_value),this}isInInterval(t){return rt.construct(this.m_value-this.m_eps,this.m_value+this.m_eps).isIntersecting(t)}eq(t){return Math.abs(this.m_value-t.m_value)<=this.m_eps+t.m_eps}ne(t){return!this.eq(t)}gt(t){return this.m_value-t.m_value>this.m_eps+t.m_eps}lt(t){return t.m_value-this.m_value>this.m_eps+t.m_eps}ge(t){return!this.lt(t)}le(t){return!this.gt(t)}tolEQ(t,s){return Math.abs(this.m_value-t.m_value)<=s||this.eq(t)}tolNE(t,s){return!this.tolEQ(t,s)}tolGT(t,s){return this.m_value-t.m_value>s&&this.gt(t)}tolLT(t,s){return t.m_value-this.m_value>s&&this.lt(t)}tolGE(t,s){return!this.tolLT(t,s)}tolLE(t,s){return!this.tolGT(t,s)}isZero(){return Math.abs(this.m_value)<=this.m_eps}isFuzzyZero(){return this.isZero()&&this.m_eps!==0}tolIsZero(t){return Math.abs(this.m_value)<=Math.max(this.m_eps,t)}setPi(){this.setE(Fs)}setEuler(){this.set(2.718281828459045,Mt())}static size(){return 1}};function q(i,t){let s=at(i),e=at(t),n=53-Wt(s),r=53-Wt(e);return(n>=0?n:0)+(r>=0?r:0)<=52}function nt(i,t){let s=i+t;return s-i===t&&s-t===i}function F(i,t){let s=i-t;return i-s===t&&t+s===i}function Mt(){return X()}D.dimensions=1;var Fs=new D(Math.PI,.5*Mt()),Si=new D(0,0),ot=new D(1,0),Fi=new D(4,0);function ki(i,t,s){return i.addE(t.subE(i).mulE(s))}function Bi(i,t,s){return t.subE(t.subE(i).mulE(ot.subE(s)))}function ks(i){return Math.atanh(i)}function Li(i){let t;if(i===0)t=1;else if(Math.abs(i)>.01)t=ks(i)/i;else{let s,e=-36.841361487904734;t=0;let n=i*i;for(let r=2*Math.trunc(e/Math.log(n)+2.5)-1;r>1;r-=2)s=1/r,t=(t+s)*n;t+=1}return t}function Nt(i){let t=Math.PI*Math.PI/6,s;if(i===1)s=t;else if(i>1)s=t;else if(i===0)s=i;else if(i<0){let e=1+(i=Math.abs(i)),n=Math.log(e);s=n*n/-2-Nt(i/e)}else if(i>.5){let e=1-i,n=Math.log(i)*Math.log(e);s=t-Nt(e)-n}else{s=0;let e=1+Math.trunc(-16*Math.log(10)/Math.log(i)+1.5),n=e;for(let r=e;r>0;r--,n-=1)s*=i,s+=1/(n*n);s*=i}return s}function Gi(i,t){let s=t*i;if(Math.abs(t)<.1){let e=0;for(let n=60;n>=1;n--)e*=s,e+=1/n/n;return e*=i,e}return Nt(s)/t}function Oi(i,t){return i<t?Ht(i,t):Ht(t,i)}function Ui(i,t){let s=Math.abs(i);return t>=0?s:-s}function Qi(i){return Math.round(i)}function Bs(i,t,s,e,n){n[0]=t[0]+(s[0]-t[0])*e,n[1]=t[1]+(s[1]-t[1])*e,i===3&&(n[2]=t[2]+(s[2]-t[2])*e)}function Ls(i,t,s,e,n){n[0]=s[0]-(s[0]-t[0])*(1-e),n[1]=s[1]-(s[1]-t[1])*(1-e),i===3&&(n[2]=s[2]-(s[2]-t[2])*(1-e))}function Vi(i,t,s,e,n){e<=.5?Bs(i,t,s,e,n):Ls(i,t,s,e,n)}function Wi(i,t,s,e,n){n[0]=t[0].addE(s[0].subE(t[0]).mulE(e)),n[1]=t[1].addE(s[1].subE(t[1]).mulE(e))}function ji(i,t,s,e,n){n[0]=s[0].subE(s[0].subE(t[0]).mulE(ot.subE(e))),n[1]=s[1].subE(s[1].subE(t[1]).mulE(ot.subE(e)))}function pt(i,t,s){let e;return e=s<=.5?i+(t-i)*s:t-(t-i)*(1-s),e}function Yi(i,t,s){return i+(t-i)*s}function Xi(i,t,s){return t-(t-i)*(1-s)}function jt(i,t,s,e){s<=.5?(e.x=i.x+(t.x-i.x)*s,e.y=i.y+(t.y-i.y)*s):(e.x=t.x-(t.x-i.x)*(1-s),e.y=t.y-(t.y-i.y)*(1-s))}function $i(i,t,s,e){s<=.5?(e.x=i.x+(t.x-i.x)*s,e.y=i.y+(t.y-i.y)*s,e.z=i.z+(t.z-i.z)*s):(e.x=t.x-(t.x-i.x)*(1-s),e.y=t.y-(t.y-i.y)*(1-s),e.z=t.z-(t.z-i.z)*(1-s))}function U(i){return i*i}function Ji(i){return i*i*i}function Ki(i){return 1/Math.sqrt(i)}function Hi(i){return i<0?-1:i>0?1:0}function te(i,t,s,e){let n=[0],r=[0],o=[0];return H(ht(i,s,n),ht(t,e,r),o)+(n[0]+r[0]+o[0])}var Yt=[0],Gs=[0];function se(i,t,s){return Os(ht(i,t,Yt),s,Yt[0],Gs)}var ft=[0],dt=[0],bt=[0],vt=[0];function ht(i,t,s){let e=i*t;return Xt(i,ft,dt),Xt(t,bt,vt),s[0]=dt[0]*vt[0]-(e-ft[0]*bt[0]-dt[0]*bt[0]-ft[0]*vt[0]),e}function Xt(i,t,s){let e=134217729*i;t[0]=e-(e-i),s[0]=i-t[0]}var $t=[0],Jt=[0];function Os(i,t,s,e){let n=H(i,t,$t),r=H(n,s,Jt);return H(r,$t[0]+Jt[0],e)}function H(i,t,s){let e=i+t;return Math.abs(i)>Math.abs(t)?s[0]=i-e+t:s[0]=t-e+i,e}function ie(i,t){return i%t}function os(i){let t=1-i;if(t===0)return 1;let s;if(t<=.01){let e=t,n=Math.log(e);s=1+e*(.4431471805599453-.25*n+e*(.05680519270997949-.09375*n+e*(.02183137044373718-.05859375*n+e*(.011544521417308362-.042724609375*n+e*(.00714200031339596-.0336456298828125*n+e*(.004854743337164948-.027757644653320312*n+e*(.003514687963781376-.023627042770385742*n)))))))}else{if(i<.016){let e=i;return O()*(1-e*(.25+e*(.046875+e*(.01953125+e*(.01068115234375+e*(.0067291259765625+e*(.004626274108886719+e*(.0033752918243408203+e*.0025710230693221092))))))))}s=hs(0,t,1)-i*as(0,t,1)/3}return ds(s,1,O())}function Us(i,t,s=Number.NaN){if(p(t>=0&&t<=1),t===0)return i;let e=1,n=i;if(n<0&&(n=-n,e=-1),t===1){let m=Math.round(n/ns()),l=n-m*ns();return e*(2*m+Math.sin(l))}let r=O(),o=Math.floor(n/r);1&o?n=(o+1)*r-n:n-=o*r;let h=Math.sin(n),a=Number.isNaN(s)?os(t):s,u;if(h===1)u=a+Math.sqrt(1-t)*(n-r);else{let m=n*n;if(.01424*Math.pow(m,4)<=2*X())u=n*(1+m*t*(-1/6+m*((4-3*t)/120-(16+(45*t-60)*t)/5040*m)));else if(t<=.01){let l=Math.sin(2*n),y=Math.sin(4*n),N=Math.sin(6*n),b=Math.sin(8*n),f=Math.sin(10*n);u=n+t*((2*-n+l)/8+t*((-3*n+2*l-.25*y)/64+t*((-20*n+15*l-3*y+N/3)/1024+t*(5*(-140*n+112*l-28*y+16/3*N-.5*b)/65536+7*t*((-63*n+52.5*l-15*y+3.75*N-.625*b+.05*f)/65536+t*(-693*n+594*l-185.625*y+1.375*N-12.375*b+1.8*f-.125*Math.sin(12*n))/1048576)))))}else{let l=h*h,y=Math.cos(n),N=y*y,b=us(h,y,t);u=h*(hs(N,b,1)-t*l*as(N,b,1)/3)}}return 1&o?u=a*(o+1)-u:u+=a*o,e*u}function ee(i,t,s=Number.NaN){if(i===0)return 0;let e=1,n=i;i<0&&(n=-n,e=-1);let r=Number.isNaN(s)?os(t):s,o=Math.floor(n/r);1&o?n=(o+1)*r-n:n-=o*r;let h=n<=0?0:n>=r?O():Qs(n,t,r);return 1&o?h=O()*(o+1)-h:h+=O()*o,e*h}function hs(i,t,s){p((i!==0?1:0)+(t!==0?1:0)+1>1);let e=i,n=t,r=s;for(;;){let o=Math.sqrt(e*n)+Math.sqrt(n*r)+Math.sqrt(r*e);e=.25*(e+o),n=.25*(n+o),r=.25*(r+o);let h=(e+n+r)/3,a=(h-e)/h,u=(h-n)/h,m=(h-r)/h;if(Math.abs(a)<=.0024&&Math.abs(u)<=.0024&&Math.abs(m)<=.0024){let l=a*u-m*m,y=a*u*m;return(1+(1/24*l-.1-3/44*y-5*l*l/208+l*y/16)*l+(1/14+3*y/104)*y)/Math.sqrt(h)}}}function as(i,t,s){p(i!==0||t!==0);let e=i,n=t,r=s,o=new tt(0),h=1;for(;;){let a=.2*(e+n+3*r),u=(a-e)/a,m=(a-n)/a,l=(a-r)/a;if(Math.abs(u)<=.0015&&Math.abs(m)<=.0015&&Math.abs(l)<=.0015){let w=u*m,v=l*l,_=w-v,T=w-6*v,R=T+_+_,E=3/26,A=T*(.25*(9/22)*T-.21428571428571427-1.5*E*l*R),g=l*(1/6*R+l*(-.4090909090909091*_+l*E*w));return 3*o.getResult()+h*(1+A+g)/(a*Math.sqrt(a))}let y=Math.sqrt(e),N=Math.sqrt(n),b=Math.sqrt(r),f=y*(N+b)+N*b;o.add(h/(b*(r+f))),h*=.25,e=.25*(e+f),n=.25*(n+f),r=.25*(r+f)}}function us(i,t,s){return i<.999?1-s*U(i):1-s+s*U(t)}function Qs(i,t,s){if(t===0)return i;if(t===1)return Math.asin(i);let e=0,n=!0;if(i<.2){let o=i*i,h=i*(1+o*t*(1/6+o*((13*t-4)/120+(16-284*t+493*t*t)/5040*o))),a=Math.abs(t*(4944*t-64-31224*t*t+37369*t*t*t)/362880*Math.pow(i,9));if(a<Math.abs(h)*X())return h;e=h,n=a>.1*h}if(n){let o=1-t,h=1-i/s,a=Math.sqrt(h*h+o*o),u=Math.atan2(o,i+X());e=O()+Math.sqrt(a)*(u-O())}let r=0;for(let o=0;o<7;o++){r=Us(e,t,s);let h=us(Math.sin(e),Math.cos(e),t);if(e-=(r-i)/Math.sqrt(h),o>0&&Math.abs(r-i)<=4*X()*i)break}return e}function ne(i,t,s,e,n){return i===0?e===0?t:e===1?s:n:i===1?e===0?t:e===1?s:pt(t,s,e):(i===2&&W("angular interpolation"),void W(""))}function re(i,t,s,e,n,r,o,h){if(i===0)for(let a=0;a<r;++a)e[a+n]=o===0?t[a]:o===1?s[a]:h;else if(i===1)if(o===0)Q(e,t,n,0,r);else if(o===1)Q(e,s,n,0,r);else for(let a=0;a<r;++a)e[a+n]=pt(t[a],s[a],o);else if(i===2)if(o===0)Q(e,t,n,0,r);else if(o===1)Q(e,s,n,0,r);else{let a=0;for(let u=0,m=n;u<r;++u,++m)e[m]=pt(t[u],s[u],o),a+=e[m]*e[m];if(a>0){a=Math.sqrt(a);for(let u=n;u<n+r;++u)e[u]/=a}else{for(let u=n;u<n+r;++u)e[u]=0;e[n]=1}}else W("")}function Q(i,t,s,e,n){if(n===0)return;let r=0,o=s,h=e;for(;r++<n;)i[o++]=t[h++]}function oe(i,t,s){let e=0;for(let n=0;!e&&n<s;++n)e=i[n]-t[n];return e}function $(i,t){return i}function Vs(i){i.sort((t,s)=>t<s?-1:t>s?1:0)}function he(i,t){let s=i.slice(0,t);Vs(s),Q(i,s,0,0,t)}function ae(i,t,s,e){let n=i.slice(t,t+s);n.sort(e),Q(i,n,t,0,s)}function ue(i,t){return i<t?-1:i>t?1:0}function le(i,t,s,e){return i<s?-1:i>s?1:t<e?-1:t>e?1:0}function ce(i,t){if(i.length<2)return i.length;let s=0;for(let e=1;e<i.length;++e)t(i[e],i[s])||(s++,i[e]=$(i[s],i[s]=i[e]));return 1+s}function me(i,t){i[t]=i.at(-1),i.pop()}function ye(i,t=!1){return{[Symbol.dispose](){this.bForget||i()},bForget:t}}function xe(i,t,s){i.length=t,i.fill(s)}function fe(i,t,s){i.length=s;for(let e=0;e<s;++e)i[e]=new t}function _t(i,t){let s=new Array(t);for(let e=0;e<t;++e)s[e]=new i;return s}function de(i,t,s){for(let e=0;e<s;++e)i[e].assign(t[e]);return s}function be(i,t){let s=i.slice(0,t);for(let e=0;e<t;++e)s[e]=s[e].clone();return s}function ve(i){return Array.from({length:i},()=>null)}function we(i,t){return Array.from({length:t},()=>i())}function Ws(i,t){let s=new Array(i);return s.fill(t),s}function Ne(i,t){return t in i&&Object.getOwnPropertyNames(i).length===1}var Kt=class{constructor(...t){this.m_elts=t}get length(){return this.m_elts.length}at(t){return this.m_elts[t]}[Symbol.dispose](){for(let t of this.m_elts)t[Symbol.dispose]()}};function Ht(i,t){return{first:i,second:t}}var js=Math.PI,Ys=2*Math.PI,Xs=.5*Math.PI,ts=class{constructor(t,s){this.m_cr=t,this.m_cc=s,this.m_v=Ws(t*s,0)}get(t,s){return this.m_v[t*this.m_cc+s]}set(t,s,e){this.m_v[t*this.m_cc+s]=e}inc(t,s){return++this.m_v[t*this.m_cc+s]}},ls=new ArrayBuffer(8),cs=new Float64Array(ls),ms=new BigUint64Array(ls),$s=0x0fffffffffffffn,Js=0x7ff0000000000000n;function pe(){return Number.EPSILON*hi}function st(i){return cs[0]=i,ms[0]}function Ks(i){return ms[0]=i,cs[0]}function at(i){return st(i)&$s}function ss(i){return Number((st(i)&Js)>>52n)}function j(i){if(i===0n)return-1n;if(i===1n||-1n===i)return 0n;i<0n&&(i=-i);let t=0n,s=512n,e=1n<<t+s;for(;i>=e;)t+=s,s<<=1n,e<<=s;let n=t;s>>=1n;let r=n+s;for(;s>0n;)i<1n<<r||(n=r),s>>=1n,r=n+s;return n}function is(i,t){return i===t||Number.isNaN(i)&&Number.isNaN(t)}function Me(i,t,s){return i===t||Math.abs(i-t)<=s||Number.isNaN(i)&&Number.isNaN(t)}function _e(i,t){return i<t?-1:i>t?1:0}function Ce(i,t){if(i<t)return-1;if(i>t)return 1;if(i===t)return 0;{let s=Number.isNaN(i),e=Number.isNaN(t);return s<e?-1:s>e?1:0}}function ge(){return 2147483647}function Te(){return 32767}function ys(){return 2147483647}function Re(){return-2147483648}var ut=ys(),Hs=BigInt(ut),xs=2166136261,K=16777619;function ti(i){let t=xs,s=i;return t=(t^255&s)*K,s>>=8,t=(t^255&s)*K,s>>=8,t=(t^255&s)*K,s>>=8,t=(t^255&s)*K,t&ut}var si=14695981039346656037n,Y=1099511628211n;function ii(i){let t=si,s=i;return t=(t^0xffn&s)*Y,s>>=8n,t=(t^0xffn&s)*Y,s>>=8n,t=(t^0xffn&s)*Y,s>>=8n,t=(t^0xffn&s)*Y,s>>=8n,t=(t^0xffn&s)*Y,s>>=8n,t=(t^0xffn&s)*Y,s>>=8n,t=(t^0xffn&s)*Y,t&Hs}function ei(i){return 1103515245*i+12345&2147483647}function Ee(i){let t=xs;for(let s=0,e=i.length;s<e;++s)t=(t^i.charCodeAt(s))*K;return t&ut}function Ct(i,t){return t+2654435769+(i<<6)+(i>>2)&ut}function Ie(i,t){return Ct(i,fs(t))}function ni(i){return Ct(3735928559,i)}function Ae(i,t){return Ct(i,ni(t))}function De(i){return ti(i)}function fs(i){return Number(ii(i))}function ri(i){return ui(i)}function Pe(i){return fs(st(ri(i)))}function qe(i){return ei(i)}var oi=100,hi=100;function es(){return Number.EPSILON*oi}function ze(){return .38196601125010515}function Ze(){return 1.4142135623730951}function X(){return Number.EPSILON}function Se(i,t,s){return i===t||i===s}function ds(i,t,s){return i>=t?i<=s?i:s:t}function Fe(i,t,s){let e=i[0];if(e>=t){if(e<=s)return!1;i[0]=s}else i[0]=t;return!0}function ke(i,t){return i>=t?t:i<-t?-t:i}function ns(){return js}function Be(){return Ys}function O(){return Xs}var ai=3*O();function Le(){return ai}function ui(i){return i+0}function rs(i){return{v:i}}var C=class i{constructor(){this.m_rn=rs(0n),this.m_rd=rs(1n),this.m_bNaN=!1,this.m_bNormalized=!1,this.m_power=0,this.m_sign=0}static constructAssign(t,s){let e=t.clone();return s!==void 0&&e.limitPrecisionThis(s),e}static constructDouble(t){return new i().setDouble(t)}static constructInt64(t){return new i().setInt64(t)}static constructRational(t,s){return new i().setRational(t,s)}static constructInt32(t){return this.constructInt64(BigInt(Math.trunc(t)))}[Symbol.toPrimitive](t){return this}compare(t){return this.lt(t)?-1:this.gt(t)?1:0}assignCopy(t){return this.setThis(t)}abs(){return this.clone().absThis()}absThis(){return this.isNAN()||(this.m_sign*=this.m_sign),this}clone(){return new i().setThis(this)}setThis(t){return this.m_bNaN=t.m_bNaN,this.m_bNormalized=t.m_bNormalized,this.m_rn.v=t.m_rn.v,this.m_rd.v=t.m_rd.v,this.m_power=t.m_power,this.m_sign=t.m_sign,this}setZero(){return this.m_rn.v=0n,this.m_rd.v=1n,this.m_bNaN=!1,this.m_power=0,this.m_bNormalized=!0,this.m_sign=0,this}setDouble(t){if(this.setZero(),t===0)return this;if(Number.isInteger(t)&&Math.abs(t)<ys())return this.setInt32(t);let s=st(t),e=(s&i.s_em)>>52n,n=!!(s&i.s_sm),r=s&i.s_fm;if(e===i.s_emax)return r?(this.m_rn.v=this.m_rd.v=0n,this.m_bNaN=!0,this):(this.m_rn.v=n?-1n:1n,this.m_rd.v=0n,this);e===0n&&W("denormalized numbers not yet implemented");let o=e-1023n,h=o>=0n?o:0n,a=o<0n?-o:0n;return this.m_rn.v=(1n<<52n|r)<<h,this.m_rd.v=1n<<52n+a,this.m_sign=n?-1:1,this.m_bNormalized=!1,this.normalizeThis()}setInt64(t){return t===0n?this.setZero():(this.m_bNaN=!1,this.m_sign=t>0n?1:-1,this.m_rn.v=t>0n?t:-t,this.m_rd.v=1n,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setRational(t,s){return t===0n?s===0n?this.setNAN():this.setZero():s===0n?t>0n?this.setPositiveInf():this.setNegativeInf():(this.m_sign=(t>0n?1:-1)*(s>0n?1:-1),this.m_rn.v=t>0n?t:-t,this.m_rd.v=s>0n?s:-s,this.m_power=0,this.m_bNormalized=!1,this.normalizeThis())}setInt32(t){return this.setInt64(BigInt(Math.trunc(t)))}getDouble(){return this.convertToDouble()}toDouble(){return this.convertToDouble()}value(){return this.convertToDouble()}isNAN(){return this.m_bNaN}isPositiveInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===1}isNegativeInf(){return!this.isNAN()&&this.m_rd.v===0n&&this.m_sign===-1}isFinite(){return!this.isNAN()&&this.m_rd.v!==0n}setNAN(){return this.m_bNaN=!0,this.m_rn.v=0n,this.m_rd.v=0n,this.m_power=0,this.m_bNormalized=!0,this}setPositiveInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=1,this.m_power=0,this}setNegativeInf(){return this.m_rn.v=1n,this.m_rd.v=0n,this.m_bNaN=!1,this.m_bNormalized=!0,this.m_sign=-1,this.m_power=0,this}subThis(t){if(t.isNAN()&&this.setNAN(),this.isPositiveInf()&&t.isPositiveInf())this.setNAN();else{if(this.isPositiveInf()&&t.isNegativeInf())return this.setPositiveInf(),this;if(this.isNegativeInf()&&t.isNegativeInf())this.setNAN();else if(this.isNegativeInf()&&t.isPositiveInf())return this.setNegativeInf(),this}return this.isNAN()?this:this.opPlusMinus(t,!1)}thisSubAbs(t){return p(0),this}mulThis(t){return t.isNAN()&&this.setNAN(),this.isNAN()?this:(this.m_sign*=t.m_sign,this.m_sign===0?this.setZero():(this.m_rn.v*=t.m_rn.v,this.m_rd.v*=t.m_rd.v,this.m_power+=t.m_power,this.m_bNormalized=!1,this.normalizeThis(),this))}mulDoubleThis(t){return this.mulThis(i.constructDouble(t))}thisMulInt64(t){return p(0),this}thisMulInt32(t){return p(0),this}divThis(t){return this.mulThis(t.clone().invertThis())}divDoubleThis(t){return this.divThis(i.constructDouble(t))}addDoubleThis(t){return this.addThis(i.constructDouble(t))}subDoubleThis(t){return this.subThis(i.constructDouble(t))}mul(t){return this.clone().mulThis(t)}mulBigIntThis(t){return this.mulThis(i.constructInt64(t))}mulDouble(t){return this.clone().mulThis(i.constructDouble(t))}div(t){return this.clone().divThis(t)}divDouble(t){return this.clone().divDoubleThis(t)}add(t){return this.clone().addThis(t)}fmSubThis(t,s){return this.subThis(t.clone().mulThis(s))}fmAddThis(t,s){return this.addThis(t.clone().mulThis(s))}addThis(t){if(t.isNAN()&&this.setNAN(),this.isPositiveInf()&&t.isPositiveInf())return this.setPositiveInf(),this;if(this.isPositiveInf()&&t.isNegativeInf())this.setNAN();else{if(this.isNegativeInf()&&t.isNegativeInf())return this.setNegativeInf(),this;this.isNegativeInf()&&t.isPositiveInf()&&this.setNAN()}return this.isNAN()?this:this.opPlusMinus(t,!0)}addDouble(t){return this.clone().addThis(i.constructDouble(t))}sub(t){return this.clone().subThis(t)}subDouble(t){return this.clone().subThis(i.constructDouble(t))}isZero(){return this.m_sign===0}equals(t){return this.clone().subThis(t).isZero()}lt(t){return!this.isNAN()&&!t.isNAN()&&!(this.isPositiveInf()&&t.isPositiveInf()||this.isNegativeInf()&&t.isNegativeInf())&&!this.isPositiveInf()&&(!!t.isPositiveInf()||this.clone().sub(t).LZ())}absLessAbs(t){return this.abs().lt(t.abs())}gt(t){return this.clone().sub(t).GZ()}lte(t){return this.sub(t).LEZ()}gte(t){return this.sub(t).GEZ()}normalizeThis(){if(this.m_bNormalized)return this;if(this.m_rn.v===0n)return this.setZero();let t=0,s=0xffffffffn;for(;(this.m_rn.v&s)===0n&&s<=this.m_rn.v;)s<<=32n,t+=32;s&=this.m_rn.v,s>>=BigInt(t),t+=wt(BigInt.asUintN(32,s))-1;let e=0;for(s=0xffffffffn;(this.m_rd.v&s)===0n&&s<=this.m_rd.v;)s<<=32n,e+=32;return s&=this.m_rd.v,s>>=BigInt(e),e+=wt(BigInt.asUintN(32,s))-1,this.m_rn.v>>=BigInt(t),this.m_rd.v>>=BigInt(e),this.m_power+=t-e,this.m_rn.v>1n&&this.m_rd.v>1n&&(this.m_rn.v%this.m_rd.v===0n?(this.m_rn.v/=this.m_rd.v,this.m_rd.v=1n):this.m_rd.v%this.m_rn.v===0n&&(this.m_rd.v/=this.m_rn.v,this.m_rn.v=1n)),this.m_bNormalized=!0,this}negateThis(){return this.isNAN()||(this.m_sign*=-1),this}negate(){return this.clone().negateThis()}invertThis(){return this.isNAN()?this:this.isPositiveInf()||this.isNegativeInf()?(this.setZero(),this):this.m_rn.v===0n?(this.setPositiveInf(),this):(this.m_rd=$(this.m_rn,this.m_rn=this.m_rd),this.m_power=-this.m_power,this)}limitPrecisionThis(t){if(t===0)return this;if(this.isZero())return this.setZero();if(!this.isFinite())return this;this.normalizeThis();let s=Number(j(this.m_rn.v));if(s>t){let e=s-t;this.m_rn.v>>=BigInt(s-t),this.m_power+=e}if(s=Number(j(this.m_rd.v)),s>t){let e=s-t;this.m_rd.v>>=BigInt(s-t),this.m_power-=e}return this}hiBitIndex(){return Math.max(Number(j(this.m_rn.v)),Number(j(this.m_rd.v)))}ldexp(t){return this.clone().ldexpThis(t)}ldexpThis(t){return t&&(this.m_bNormalized=!1,this.m_power+=t,this.normalizeThis()),this}LZ(){return!this.isNAN()&&this.m_sign===-1}GZ(){return!this.isNAN()&&this.m_sign===1}LEZ(){return!this.isNAN()&&this.m_sign<=0}GEZ(){return!this.isNAN()&&this.m_sign>=0}toString(){return this.toDouble().toString()}sqr(){return this.clone().sqrThis()}sqrThis(){return this.mulThis(this.clone())}static sqrt(t,s){if(t.m_sign<0n&&Vt("MP_value: sqrt(-1)"),t.isZero())return t.clone();let e=52,n=2220446049250313e-31;for(;e<s;)2*e<=s?(n*=n,e*=2):(n*=2220446049250313e-31,e+=52);e+=52;let r=j(t.m_rn.v),o=j(t.m_rd.v),h,a=t.m_power+Number(r-o),u=new i;Math.abs(a)>200?(1&Math.abs(a)&&(a+=1),h=i.constructAssign(t,53).ldexpThis(-a).value(),u.setThis(t).ldexpThis(-a),p(Number.isFinite(h))):(u.setThis(t),h=u.value(),p(Number.isFinite(h)),a=0),h=Math.sqrt(h);let m=i.constructDouble(h),l=i.constructDouble(n);l.mulThis(m).ldexpThis(1);let y=n*h*2,N=m.clone(),b=new i,f;for(let w=0;w<10;++w){N.mulThis(m),b.setThis(u).subThis(N).absThis();let v=b.value();if(f=1,v<.9)for(;v>y;)v*=v,++f;else f=4;if(b.lte(l))break;for(let _=0;_<f;_++)N.setThis(m).divThis(u).invertThis().addThis(m).ldexpThis(-1).limitPrecisionThis(e),m.setThis(N)}return m.ldexpThis(a/2)}static cubicRoot(t,s){if(t.isZero())return t.clone();let e=52,n=2220446049250313e-31;for(;e<s;)2*e<=s?(n*=n,e*=2):(n*=2220446049250313e-31,e+=52);e+=52;let r=Math.pow(Math.abs(t.value()),1/3),o=i.constructDouble(r),h=o.clone();h.sqrThis().mulDoubleThis(3).mulDoubleThis(n),h.limitPrecisionThis(32),t.LZ()&&o.negateThis();for(let a=0;a<10;++a){let u=o.clone();u.sqrThis().mulThis(o);let m=u.clone();if(m.subThis(t),m.absThis().limitPrecisionThis(32),m.lte(h))break;m.setThis(t),m.ldexpThis(1),m.addThis(u);let l=u.clone();l.ldexpThis(1),l.addThis(t),m.divThis(l),o.mulThis(m),o.limitPrecisionThis(e)}return o}isInTheRangeOfDouble(){return p(0),!1}sign(){return this.m_sign}cosAndSin(t,s){p(0)}static nan(){return p(0),new i}convertToDouble(){if(this.m_bNaN)return Number.NaN;if(this.isZero())return 0;if(this.m_rd.v===0n)return this.m_sign===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY;let t=this.m_sign===-1,s=this.m_rn.v<<(this.m_power>=0?BigInt(this.m_power):0n),e=this.m_rd.v<<(this.m_power<0?BigInt(-this.m_power):0n),n=s/e,r=Number(n);if(BigInt(r)!==n)return t?-r:r;let o=s-n*e;if(o){let h=j(e)-1023n;h>0n&&(e>>=h,o<<=52n,o>>=h);let a=Number(o);Number.isFinite(a)||(o>>=52n,a=Number(o),h=0n),h>0n&&(a/=Math.pow(2,52)),r+=a/Number(e)}return t?-r:r}signVal(){return this.m_sign===1?1n:this.m_sign===-1?-1n:0n}opPlusMinus(t,s){let e=Math.min(this.m_power,t.m_power),n,r;this.m_power>e?(n=BigInt(this.m_power-e),r=0n):(n=0n,r=BigInt(t.m_power-e));let o=this.signVal()*this.m_rn.v*t.m_rd.v<<n,h=t.signVal()*t.m_rn.v*this.m_rd.v<<r;return this.m_rn.v=s?o+h:o-h,this.m_rd.v*=t.m_rd.v,this.m_power=e,this.m_sign=1,this.m_rn.v<0n&&(this.m_sign=-1,this.m_rn.v=-this.m_rn.v),this.m_bNormalized=!1,this.normalizeThis(),this}};C.s_sm=0x8000000000000000n,C.s_em=0x7ff0000000000000n,C.s_fm=0x000fffffffffffffn,C.s_emax=0x7ffn;var Ge=C.constructInt32(1),Oe=C.constructInt32(0);function li(i,t){return Zs(i^t)}function ci(i,t){let s=ss(i),e=ss(t);return s===e?(s-=53-li(at(i),at(t)),s):s>e?s:e}function Ue(i,t){for(let s=0,e=0,n=i.length;s<n;s+=2,e++)t[e].x=i[s],t[e].y=i[s+1]}function Qe(i){let t=new Float64Array(2*i.length);for(let s=0,e=i.length;s<e;++s){let n=s<<1;t[n]=i[s].x,t[n+1]=i[s].y}return t}function Ve(i){let t=_t(I,i.length);for(let s=0,e=i.length;s<e;++s)t[s].setCoords(i[s][0],i[s][1]);return t}var I=class i{static construct(t,s){return new i(t,s)}constructor(t,s){t!==void 0?(this.x=t,this.y=s):this.x=this.y=Number.NaN}clone(){return new i(this.x,this.y)}assign(t){this.setCoordsPoint2D(t)}setCoords(t,s){return this.x=t,this.y=s,this}setCoordsPoint2D(t){this.x=t.x,this.y=t.y}isEqualPoint2D(t,s){return s!==void 0?Math.abs(this.x-t.x)<=s&&Math.abs(this.y-t.y)<=s:this.x===t.x&&this.y===t.y}isEqual(t,s,e){return e!==void 0?Math.abs(this.x-t)<=e&&Math.abs(this.y-s)<=e:this.x===t&&this.y===s}equalsPoint2D(t,s){return this.isEqualPoint2D(t,s)}setSub(t,s){this.x=t.x-s.x,this.y=t.y-s.y}addThis(t){return this.x+=t.x,this.y+=t.y,this}setAdd(t,s){return this.x=t.x+s.x,this.y=t.y+s.y,this}absoluteOther(t){}absolute(){return p(0),this}setNegate(){this.x=-this.x,this.y=-this.y}setNegateOther(t){this.x=-t.x,this.y=-t.y}interpolateThis(t,s){}interpolate(t,s,e){p(0)}scaleAddThis(t,s){this.x=this.x*t+s.x,this.y=this.y*t+s.y}setScaleAdd(t,s,e){this.x=s.x*t+e.x,this.y=s.y*t+e.y}scaleOther(t,s){p(0)}scale(t){this.x*=t,this.y*=t}compare(t){return this.y<t.y?-1:this.y>t.y?1:this.x<t.x?-1:this.x>t.x?1:0}compareX(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0}normalizeOther(t){p(0)}normalize(){let t=this.length();return t?(this.x/=t,this.y/=t):(this.x=1,this.y=0),this}getUnitVector(){return this.clone().normalize()}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}sqrLength(){return this.x*this.x+this.y*this.y}static averageFast(t,s){return p(0),{}}static average(t,s){let e=new i;if(s===0)return e.setNAN(),e;if(s===1)return e.assign(t[0]),e;let n=new tt(t[0].x),r=new tt(t[0].y);for(let o=1;o<s;o++)n.add(t[o].x),r.add(t[o].y),255&o||(n.normalize(),r.normalize());return e.x=n.getResult()/s,e.y=r.getResult()/s,e}offset(t,s){let e=i.distance(t,s),n=i.construct(this.x,this.y);if(e===0)return i.distance(n,t);let r=s.clone();return r.subThis(t),n.subThis(t),n.crossProduct(r)/e}side(t,s){return t.equals(s)?this.equals(t)?0:1:i.orientationRobust(s,t,this)}static sqrDistance(t,s){let e=t.x-s.x,n=t.y-s.y;return e*e+n*n}static sqrDistanceCoords(t,s,e,n){let r=e-t,o=n-s;return r*r+o*o}static distance(t,s){return Math.sqrt(i.sqrDistance(t,s))}dotProduct(t){return this.x*t.x+this.y*t.y}dotProductAbs(t){return Math.abs(this.x*t.x)+Math.abs(this.y*t.y)}crossProduct(t){return this.x*t.y-this.y*t.x}crossProductAbs(t){return p(0),0}rotateDirect(t,s){let e=this.x*t-this.y*s,n=this.x*s+this.y*t;this.x=e,this.y=n}rotateReverse(t,s){let e=this.x*t+this.y*s,n=-this.x*s+this.y*t;this.x=e,this.y=n}leftPerpendicularThis(){let t=this.x;this.x=-this.y,this.y=t}leftPerpendicularOther(t){let s=t.x;this.x=-t.y,this.y=s}rightPerpendicularThis(){let t=this.x;this.x=this.y,this.y=-t}rightPerpendicularOther(t){let s=t.x;this.x=t.y,this.y=-s}equals(t){return this.x===t.x&&this.y===t.y}notequals(t){return this.x!==t.x||this.y!==t.y}not(){return!this.x&&!this.y}gt(t){return this.y>t.y||this.y===t.y&&this.x>t.x}gte(t){return!this.lt(t)}lt(t){return this.y<t.y||this.y===t.y&&this.x<t.x}lte(t){return!this.gt(t)}subThis(t){return this.x-=t.x,this.y-=t.y,this}divThis(t){return this.x/=t,this.y/=t,this}add(t){return new i(this.x+t.x,this.y+t.y)}sub(t){return new i(this.x-t.x,this.y-t.y)}negateThis(){return this.x=-this.x,this.y=-this.y,this}negate(){return new i(-this.x,-this.y)}mul(t){return new i(this.x*t,this.y*t)}mulThis(t){return this.x*=t,this.y*=t,this}divide(t){return new i(this.x/t,this.y/t)}setNAN(){this.x=this.y=Number.NaN}isNAN(){return Number.isNaN(this.x)||Number.isNaN(this.y)}static getNAN(){return new i(Number.NaN,Number.NaN)}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)}isZero(){return this.x===0&&this.y===0}norm(t){switch(t){case 0:{let s=Math.abs(this.x),e=Math.abs(this.y),n=s-e;return n>=0?s:n<=0?e:Number.NaN}case 1:return Math.abs(this.x)+Math.abs(this.y);case 2:return Math.sqrt(this.x*this.x+this.y*this.y);default:G("norm")}}getQuarter(){return i.getQuarterCoords(this.x,this.y)}static getQuarterCoords(t,s){return t>0?s>=0?1:4:s>0?2:t===0?4:3}static compareVectors(t,s){let e=t.getQuarter(),n=s.getQuarter();return n===e?i.orientationRobustImpl(i.construct(0,0),s,t,!0):e<n?-1:1}static compareVectorsOrigin(t,s,e){let n=s.sub(t),r=e.sub(t),o=n.getQuarter(),h=r.getQuarter();return h===o?i.orientationRobustImpl(t,e,s,!0):o<h?-1:1}static orientationRobust(t,s,e){return i.orientationRobustImpl(t,s,e,!1)}static orientationRobustEx(t,s,e,n){if(t.equals(s)||e.equals(n))return 0;let r=s.x-t.x,o=s.y-t.y,h=n.x-e.x,a=n.y-e.y;{let N=i.getQuarterCoords(r,o)-1,b=i.getQuarterCoords(h,a)-1,f=i.d[N][b];if(f!==0)return f}let u=r*a,m=o*h,l=4*X()*(Math.abs(u)+Math.abs(m)),y=u-m;return Math.abs(y)>=l?y<0?-1:y>0?1:0:i.orientationRobustExMp(t,s,e,n)}static orientationRobustExMp(t,s,e,n){let r=C.constructDouble(s.x),o=C.constructDouble(n.x);r.subThis(C.constructDouble(t.x)),o.subThis(C.constructDouble(e.x));let h=C.constructDouble(s.y),a=C.constructDouble(n.y);return h.subThis(C.constructDouble(t.y)),a.subThis(C.constructDouble(e.y)),r.mulThis(a),h.mulThis(o),r.subThis(h),r.LZ()?-1:r.GZ()?1:0}static orientationNonRobust(t,s,e){let n=s.sub(t).crossProduct(e.sub(t));return n<0?-1:n>0?1:0}static orientationRobustImpl(t,s,e,n){if(s.isEqualPoint2D(t)||e.isEqualPoint2D(t)||s.isEqualPoint2D(e))return 0;let r=s.x-t.x,o=s.y-t.y,h=e.x-t.x,a=e.y-t.y;if(!n){let l=i.getQuarterCoords(r,o)-1,y=i.getQuarterCoords(h,a)-1,N=i.d[l][y];if(N!==0)return N}let u=(Math.abs(r)+Math.abs(o)+Math.abs(h)+Math.abs(a))*(Math.abs(s.x)+Math.abs(s.y)+Math.abs(e.x)+Math.abs(e.y))*8*Mt(),m=r*a-o*h;if(Math.abs(m)>u)return m<0?-1:1;if(F(s.x,t.x)&&F(e.y,t.y)&&F(s.y,t.y)&&F(e.x,t.x)&&q(r,a)&&q(o,h)){let l=r*a,y=o*h;if(F(l,y)){let N=l-y;return N<0?-1:N>0?1:0}}return i.orientationRobustMp(t,s,e)}static orientationRobustMp(t,s,e){let n=C.constructDouble(s.x),r=C.constructDouble(e.x);{let a=C.constructDouble(t.x);n.subThis(a),r.subThis(a)}let o=C.constructDouble(e.y),h=C.constructDouble(s.y);{let a=C.constructDouble(t.y);o.subThis(a),h.subThis(a)}return n.mulThis(o),h.mulThis(r),n.subThis(h),n.LZ()?-1:n.GZ()?1:0}static inCircleRobust(t,s,e,n){let r=new D,o=new D;r.set(t.x),r.subThis(n.x),o.set(t.y),o.subThis(n.y);let h=new D,a=new D;h.set(s.x),h.subThis(n.x),a.set(s.y),a.subThis(n.y);let u=new D,m=new D;u.set(e.x),u.subThis(n.x),m.set(e.y),m.subThis(n.y);let l=r.mulE(a).subE(o.mulE(h)),y=h.mulE(m).subE(a.mulE(u)),N=r.mulE(m).subE(o.mulE(u)),b=r.mulE(r).addE(o.mulE(o)),f=h.mulE(h).addE(a.mulE(a)),w=u.mulE(u).addE(m.mulE(m)),v=b.mulE(y).subE(f.mulE(N)).addE(w.mulE(l));if(!v.isFuzzyZero()){let _=v.value();return _<0?-1:_>0?1:0}return i.inCircleRobustMp(t,s,e,n)}static inCircleRobustMp(t,s,e,n){do{if(!F(t.x,n.x)||!F(t.y,n.y)||!F(s.x,n.x)||!F(s.y,n.y)||!F(e.x,n.x)||!F(e.y,n.y))break;let R=t.x-n.x,E=t.y-n.y,A=s.x-n.x,g=s.y-n.y,S=e.x-n.x,k=e.y-n.y;if(!q(R,g)||!q(E,A)||!q(A,k)||!q(g,S)||!q(R,k)||!q(E,S)||!q(R,R)||!q(E,E)||!q(A,A)||!q(g,g)||!q(S,S)||!q(k,k))break;let J=R*g,P=E*A,c=A*k,M=g*S,x=R*k,d=E*S,z=R*R,Z=E*E,Et=A*A,It=g*g,At=S*S,Dt=k*k;if(!F(J,P)||!F(c,M)||!F(x,d)||!nt(z,Z)||!nt(Et,It)||!nt(At,Dt))break;let Pt=J-P,qt=c-M,zt=x-d,Zt=z+Z,St=Et+It,Ft=At+Dt;if(!q(Zt,qt)||!q(St,zt)||!q(Ft,Pt))break;let kt=Zt*qt,Bt=St*zt,Lt=Ft*Pt;if(!F(kt,Bt))break;let Gt=kt-Bt;if(!nt(Gt,Lt))break;let Ot=Gt+Lt;return Ot<0?-1:Ot>0?1:0}while(!1);let r=C.constructDouble(n.x),o=C.constructDouble(n.y),h=C.constructDouble(t.x),a=C.constructDouble(t.y);h.subThis(r),a.subThis(o);let u=C.constructDouble(s.x),m=C.constructDouble(s.y);u.subThis(r),m.subThis(o);let l=C.constructDouble(e.x),y=C.constructDouble(e.y);l.subThis(r),y.subThis(o);let N=h.mul(m).sub(a.mul(u)),b=u.mul(y).sub(m.mul(l)),f=h.mul(y).sub(a.mul(l)),w=h.mul(h).add(a.mul(a)),v=u.mul(u).add(m.mul(m)),_=l.mul(l).add(y.mul(y)),T=w.mul(b).sub(v.mul(f)).add(_.mul(N));return T.LZ()?-1:T.GZ()?1:0}static inCircleRobustMp3Point(t,s,e){let n=C.constructDouble(t.x),r=C.constructDouble(t.y),o=C.constructDouble(s.x),h=C.constructDouble(s.y),a=C.constructDouble(e.x),u=C.constructDouble(e.y),m=a.mul(a).add(u.mul(u)).sub(a.mul(n).add(u.mul(r)).add(a.mul(o)).add(u.mul(h))).add(n.mul(o).add(r.mul(h)));return m.LZ()?-1:m.GZ()?1:0}static inCircleRobust3Point(t,s,e){let n=new D(t.x),r=new D(t.y),o=new D(s.x),h=new D(s.y),a=new D(e.x),u=new D(e.y),m=a.mulE(a).addE(u.mulE(u)).subE(a.mulE(n).addE(u.mulE(r)).addE(a.mulE(o)).addE(u.mulE(h))).addE(n.mulE(o).addE(r.mulE(h)));if(!m.isFuzzyZero()){let l=m.value();return l<0?-1:l>0?1:0}return i.inCircleRobustMp3Point(t,s,e)}static calculateCircleCenterFromThreePoints(t,s,e){if(t.equals(e)||t.equals(s)||e.equals(s))return i.getNAN();let n=mi(t,s,e);return n.isNAN()?yi(t,s,e):n}static calculateAngle(t,s){return Math.atan2(t.crossProduct(s),t.dotProduct(s))}static isBisectorRobust(t,s,e){return p(0),!1}static size(){return 2}get 0(){return this.x}get 1(){return this.y}set 0(t){this.x=t}set 1(t){this.y=t}static compareZorder(t,s){let e=i.c_compare_zorder_xx[t.x<0?1:0]|i.c_compare_zorder_yy[t.y<0?1:0],n=i.c_compare_zorder_xx[s.x<0?1:0]|i.c_compare_zorder_yy[s.y<0?1:0];if(e===n){let r=0,o=0;for(let h=0;h<2;++h){let a=ci(t[h],s[h]);a>r&&(r=a,o=h)}return t[o]<s[o]}return e<n}static lerp(t,s,e){let n=new i;return jt(t,s,e,n),n}static getClosestCoordinate(t,s,e,n=!1){let r=i.getNAN();r.setSub(s,t);let o=r.sqrLength();if(o===0)return .5;if(s.isEqualPoint2D(e))return 1;let h=i.getNAN();h.setSub(e,t);let a=h.dotProduct(r)/o;return n||(a<0?a=0:a>1&&(a=1)),a}static intersectLinesAtOnePoint(t,s,e,n){if(t.equals(s)||e.equals(n))return i.getNAN();let r=s.x-t.x,o=e.x-n.x,h=s.y-t.y,a=e.y-n.y,u=r*a-o*h;if(!u)return i.getNAN();let m=u;if(m===0)return i.getNAN();let l=(e.x-t.x)*a-(e.y-t.y)*o;l/=m;let y=new i;return jt(t,s,l,y),y.isFinite()?y:i.getNAN()}toString(){return`[${this.x},${this.y}]`}};function mi(i,t,s){let e=new D(t.x);e.subThis(i.x);let n=new D(t.y);n.subThis(i.y);let r=new D(s.x);r.subThis(i.x);let o=new D(s.y);o.subThis(i.y);let h=e.clone();h.mulThisE(o);let a=n.clone();if(a.mulThisE(r),h.subThisE(a),h.value()===0)return I.getNAN();h.mulThis(2);let u=e.clone();u.mulThisE(e);let m=n.clone();m.mulThisE(n);let l=u.clone();l.addThisE(m);let y=r.clone();y.mulThisE(r);let N=o.clone();N.mulThisE(o);let b=y.clone();b.addThisE(N);let f=n.clone();f.mulThisE(b),a=o.clone(),a.mulThisE(l),f.subThisE(a),f.divThisE(h);let w=e.clone();w.mulThisE(b),a=r.clone(),a.mulThisE(l),w.subThisE(a),w.divThisE(h);let v=I.construct(i.x-f.value(),i.y+w.value()),_=i.sub(v).length(),T=t.sub(v).length(),R=s.sub(v).length(),E=1e-15*(_+Math.abs(i.x)+Math.abs(t.x)+Math.abs(s.x)+Math.abs(i.y)+Math.abs(t.y)+Math.abs(s.y));return Math.abs(_-T)<=E&&Math.abs(_-R)<=E&&f.eps()<E&&w.eps()<E?v:I.getNAN()}function yi(i,t,s){let e=C.constructDouble(t.x);e.subDoubleThis(i.x);let n=C.constructDouble(t.y);n.subDoubleThis(i.y);let r=C.constructDouble(s.x);r.subDoubleThis(i.x);let o=C.constructDouble(s.y);o.subDoubleThis(i.y);let h=e.clone();h.mulThis(o);let a=n.clone();if(a.mulThis(r),h.subThis(a),h.isZero())return I.getNAN();h.mulDoubleThis(2);let u=e.clone();u.mulThis(e);let m=n.clone();m.mulThis(n);let l=u.clone();l.addThis(m);let y=r.clone();y.mulThis(r);let N=o.clone();N.mulThis(o);let b=y.clone();b.addThis(N);let f=n.clone();f.mulThis(b),a=o.clone(),a.mulThis(l),f.subThis(a),f.divThis(h);let w=e.clone();return w.mulThis(b),a=r.clone(),a.mulThis(l),w.subThis(a),w.divThis(h),I.construct(i.x-f.value(),i.y+w.value())}I.dimensions=2,I.d=[[0,1,0,-1],[-1,0,1,0],[0,-1,0,1],[1,0,-1,0]],I.c_compare_zorder_xx=[2,0],I.c_compare_zorder_yy=[1,0];var gt=class i{constructor(t,s,e){if(t instanceof i)return this.data=t.data,this.N=t.N,this.M=t.M,t.data=null,t.N=0,void(t.M=0);this.data=t,this.N=s,this.M=e}assignCopy(t){return this===t||(p(this.N*this.M==t.N*t.M),this.data.set(t.data),this.N=t.N,this.M=t.M),this}setZero(){return this.data?.fill(0),this}setIdentity(){for(let e=0;e<this.N;e++)for(let n=0;n<this.M;n++)this.setRowCol(e,n,e===n?1:0);return this}rows(){return this.N}cols(){return this.M}row(t){return p(0),{}}set(t,s){return this.data[t]=s,this}setRowCol(t,s,e){return this.data[t*this.M+s]=e,this}at(t){return this.data[t]}atRowCol(t,s){return this.data[t*this.M+s]}mulScalar(t,s){p(0)}mul(t,s){if(p(this.M===t.rows()),p(this.N===s.rows()),p(t.cols()===s.cols()),s===this){let n=new Float64Array(this.N*this.M),r=new i(n,this.N,this.M);return this.mul(t,r),void s.assignCopy(r)}if(s===t){let n=new Float64Array(t.N*t.M),r=new i(n,t.N,t.M);return this.mul(t,r),void s.assignCopy(r)}let e=t.cols();for(let n=0;n<this.N;n++)for(let r=0;r<e;r++){let o=0;for(let h=0;h<this.M;h++)o+=this.atRowCol(n,h)*t.atRowCol(h,r);s.setRowCol(n,r,o)}}mulTranspose(t,s){if(p(this.M===t.cols()),p(this.N===s.rows()),p(t.rows()===s.cols()),s===this){let n=new Float64Array(this.N*this.M),r=new i(n,this.N,this.M);return this.mulTranspose(t,r),void s.assignCopy(r)}if(s===t){let n=new Float64Array(t.N*t.M),r=new i(n,t.N,t.M);return this.mulTranspose(t,r),void s.assignCopy(r)}let e=t.rows();for(let n=0;n<this.N;n++)for(let r=0;r<e;r++){let o=0;for(let h=0;h<this.M;h++)o+=this.atRowCol(n,h)*t.atRowCol(r,h);s.setRowCol(n,r,o)}}mulLeft(t,s){p(0)}mulLeftTranspose(t,s){p(0)}mulDiag(t,s){if(p(this.M===t.N*t.M),p(this.N===s.rows()),p(this.M===s.cols()),s===this){let n=new Float64Array(this.N*this.M),r=new i(n,this.N,this.M);return this.mulDiag(t,r),void s.assignCopy(r)}let e=this.M;for(let n=0;n<this.N;n++)for(let r=0;r<e;r++)s.setRowCol(n,r,this.atRowCol(n,r)*t.at(r))}transposeInPlace(){if(this.N===this.M){for(let e=0;e<this.N;e++)for(let n=e+1;n<this.M;n++){let r=this.atRowCol(e,n);this.setRowCol(e,n,this.atRowCol(n,e)),this.setRowCol(n,e,r)}return this}let t=new Float64Array(this.N*this.M),s=new i(t,this.N,this.M);return s.assignCopy(this),this.M=$(this.N,this.N=this.M),s.transpose(this),this}transpose(t){if(this!==t){i.checkDims(t,this.M,this.N);for(let s=0;s<this.N;s++)for(let e=0;e<this.M;e++)t.setRowCol(e,s,this.atRowCol(s,e))}else t.transposeInPlace()}add(t,s){}svd(t,s,e,n=!1){if(i.checkDims(t,this.N,this.M),i.checkDims(s,this.M,1),i.checkDims(e,this.M,this.M),n){if(p(this.N===this.M),!this.symmetricEigen(s,e))return!1;for(let c=0;c<this.M;++c)s.at(c)<0&&s.set(c,0);return t.assignCopy(e),!0}let r,o,h,a,u,m,l,y=0,N=0,b=0,f=0,w=0,v=this.M,_=this.N;t.assignCopy(this);let T=new Float64Array(v),R=new i(T,v,1),E=(c,M)=>M>=0?Math.abs(c):-Math.abs(c),A=(c,M)=>{if((c=Math.abs(c))>(M=Math.abs(M))){let x=M/c;return c*Math.sqrt(x*x+1)}if(M>0){let x=c/M;return M*Math.sqrt(x*x+1)}return 0};for(let c=0;c<v;c++){if(y=c+1,R.set(c,f*b),b=a=f=0,c<_){for(let x=c;x<_;x++)f+=Math.abs(t.atRowCol(x,c));if(f){for(let x=c;x<_;x++)t.setRowCol(x,c,t.atRowCol(x,c)/f),a+=t.atRowCol(x,c)*t.atRowCol(x,c);o=t.atRowCol(c,c),b=-E(Math.sqrt(a),o),h=o*b-a,t.setRowCol(c,c,o-b);for(let x=y;x<v;x++){a=0;for(let d=c;d<_;d++)a+=t.atRowCol(d,c)*t.atRowCol(d,x);o=a/h;for(let d=c;d<_;d++)t.setRowCol(d,x,t.atRowCol(d,x)+o*t.atRowCol(d,c))}for(let x=c;x<_;x++)t.setRowCol(x,c,t.atRowCol(x,c)*f)}}if(s.set(c,f*b),b=a=f=0,c<_&&c!==v-1){for(let x=y;x<v;x++)f+=Math.abs(t.atRowCol(c,x));if(f){for(let x=y;x<v;x++)t.setRowCol(c,x,t.atRowCol(c,x)/f),a+=t.atRowCol(c,x)*t.atRowCol(c,x);o=t.atRowCol(c,y),b=-E(Math.sqrt(a),o),h=o*b-a,t.setRowCol(c,y,o-b);for(let x=y;x<v;x++)R.set(x,t.atRowCol(c,x)/h);for(let x=y;x<_;x++){a=0;for(let d=y;d<v;d++)a+=t.atRowCol(x,d)*t.atRowCol(c,d);for(let d=y;d<v;d++)t.setRowCol(x,d,t.atRowCol(x,d)+a*R.at(d))}for(let x=y;x<v;x++)t.setRowCol(c,x,t.atRowCol(c,x)*f)}}let M=Math.abs(s.at(c))+Math.abs(R.at(c));w=M>w?M:w}for(let c=v-1;c>=0;c--){if(c<v-1){if(b){for(let M=y;M<v;M++)e.setRowCol(M,c,t.atRowCol(c,M)/t.atRowCol(c,y)/b);for(let M=y;M<v;M++){a=0;for(let x=y;x<v;x++)a+=t.atRowCol(c,x)*e.atRowCol(x,M);for(let x=y;x<v;x++)e.setRowCol(x,M,e.atRowCol(x,M)+a*e.atRowCol(x,c))}}for(let M=y;M<v;M++)e.setRowCol(c,M,0),e.setRowCol(M,c,0)}e.setRowCol(c,c,1),b=R.at(c),y=c}for(let c=(_<v?_:v)-1;c>=0;c--){y=c+1,b=s.at(c);for(let M=y;M<v;M++)t.setRowCol(c,M,0);if(b){b=1/b;for(let M=y;M<v;M++){a=0;for(let x=y;x<_;x++)a+=t.atRowCol(x,c)*t.atRowCol(x,M);o=a/t.atRowCol(c,c)*b;for(let x=c;x<_;x++)t.setRowCol(x,M,t.atRowCol(x,M)+o*t.atRowCol(x,c))}for(let M=c;M<_;M++)t.setRowCol(M,c,t.atRowCol(M,c)*b)}else for(let M=c;M<_;M++)t.setRowCol(M,c,0);t.setRowCol(c,c,t.atRowCol(c,c)+1)}for(let c=v-1;c>=0;c--)for(let M=1;;M++){let x=1;for(y=c;y>=0;y--){if(N=y-1,Math.abs(R.at(y))+w===w){x=0;break}if(Math.abs(s.at(N))+w===w)break}if(x){r=0,a=1;for(let d=y;d<=c&&(o=a*R.at(d),R.set(d,R.at(d)*r),Math.abs(o)+w!==w);d++){b=s.at(d),h=A(o,b),s.set(d,h),h=1/h,r=b*h,a=-o*h;for(let z=0;z<_;z++)m=t.atRowCol(z,N),l=t.atRowCol(z,d),t.setRowCol(z,N,m*r+l*a),t.setRowCol(z,d,l*r-m*a)}}if(l=s.at(c),y===c){if(l<0){s.set(c,-l);for(let d=0;d<v;d++)e.setRowCol(d,c,-e.atRowCol(d,c))}break}if(M===100)return!1;u=s.at(y),N=c-1,m=s.at(N),b=R.at(N),h=R.at(c),o=((m-l)*(m+l)+(b-h)*(b+h))/(2*h*m),b=A(o,1),o=((u-l)*(u+l)+h*(m/(o+E(b,o))-h))/u,r=a=1;for(let d=y;d<=N;d++){let z=d+1;b=R.at(z),m=s.at(z),h=a*b,b*=r,l=A(o,h),R.set(d,l),r=o/l,a=h/l,o=u*r+b*a,b=b*r-u*a,h=m*a,m*=r;for(let Z=0;Z<v;Z++)u=e.atRowCol(Z,d),l=e.atRowCol(Z,z),e.setRowCol(Z,d,u*r+l*a),e.setRowCol(Z,z,l*r-u*a);l=A(o,h),s.set(d,l),l&&(l=1/l,r=o*l,a=h*l),o=r*b+a*m,u=r*m-a*b;for(let Z=0;Z<_;Z++)m=t.atRowCol(Z,d),l=t.atRowCol(Z,z),t.setRowCol(Z,d,m*r+l*a),t.setRowCol(Z,z,l*r-m*a)}R.set(y,0),R.set(c,o),s.set(c,u)}let g=new Float64Array(this.N),S=new Float64Array(this.M),k=new i(g,this.N,1),J=new i(S,this.M,1),P=1;do P*=3,P++;while(P<=this.M);do{P/=3,P=Math.trunc(P);for(let c=P;c<this.M;c++){let M=s.at(c);for(let d=0;d<this.N;d++)k.set(d,t.atRowCol(d,c));for(let d=0;d<this.M;d++)J.set(d,e.atRowCol(d,c));let x=c;for(;s.at(x-P)<M;){s.set(x,s.at(x-P));for(let d=0;d<this.N;d++)t.setRowCol(d,x,t.atRowCol(d,x-P));for(let d=0;d<this.M;d++)e.setRowCol(d,x,e.atRowCol(d,x-P));if(x-=P,x<P)break}s.set(x,M);for(let d=0;d<this.N;d++)t.setRowCol(d,x,k.at(d));for(let d=0;d<this.M;d++)e.setRowCol(d,x,J.at(d))}}while(P>1);for(let c=0;c<this.M;c++){let M=0;for(let x=0;x<this.N;x++)t.atRowCol(x,c)<0&&M++;for(let x=0;x<this.M;x++)e.atRowCol(x,c)<0&&M++;if(M>Math.trunc((this.N+this.M)/2)){for(let x=0;x<this.N;x++)t.setRowCol(x,c,-t.atRowCol(x,c));for(let x=0;x<this.M;x++)e.setRowCol(x,c,-e.atRowCol(x,c))}}return!0}isSymmetric(){if(this.N!==this.M)return!1;for(let t=0;t<this.N;t++)for(let s=t+1;s<this.M;s++)if(this.atRowCol(t,s)!==this.atRowCol(s,t))return!1;return!0}isZero(){return p(0),!1}isIdentity(){return p(0),!1}equals(t,s){if(s!==void 0&&p(0),this.N!==t.N||this.M!==t.M)return!1;for(let e=0;e<this.N*this.M;e++)if(this.data[e]!==t.data[e])return!1;return!0}maxElement(){return p(0),0}minElement(){return p(0),0}determinant(){if(p(this.N===this.M),this.N===1)return this.data[0];if(this.N===2)return this.data[0]*this.data[3]-this.data[1]*this.data[2];if(this.N===3){let r=this;return r.atRowCol(0,0)*(r.atRowCol(1,1)*r.atRowCol(2,2)-r.atRowCol(1,2)*r.atRowCol(2,1))-r.atRowCol(0,1)*(r.atRowCol(1,0)*r.atRowCol(2,2)-r.atRowCol(2,0)*r.atRowCol(1,2))+r.atRowCol(0,2)*(r.atRowCol(1,0)*r.atRowCol(2,1)-r.atRowCol(1,1)*r.atRowCol(2,0))}let t=new Float64Array(this.N*this.N),s=new i(t,this.N,this.N),e=new Float64Array(this.N);if(!this.luDecomposition(s,e))return 0;let n=1;for(let r=0;r<this.N;r++)n*=s.atRowCol(r,r),e[r]!==r&&(n=-n);return n}submatrix(t,s,e){p(0)}inverse(t){p(0)}pseudoInverse(t,s=!1,e=2220446049250313e-31){if(t.setZero(),this.N===1&&this.M===1)return this.atRowCol(0,0)!==0?t.setRowCol(0,0,1/this.atRowCol(0,0)):t.setRowCol(0,0,0),!0;if(this.N===2&&this.M===2){let y=this.atRowCol(0,0)*this.atRowCol(1,1)-this.atRowCol(0,1)*this.atRowCol(1,0),N=1e-5*(Math.abs(this.atRowCol(0,0)*this.atRowCol(1,1))+Math.abs(this.atRowCol(0,1)*this.atRowCol(1,0)));if(Math.abs(y)>N)return t.setRowCol(0,0,this.atRowCol(1,1)/y),t.setRowCol(0,1,-this.atRowCol(0,1)/y),t.setRowCol(1,0,-this.atRowCol(1,0)/y),t.setRowCol(1,1,this.atRowCol(0,0)/y),!0}let n=new Float64Array(this.N*this.M),r=new i(n,this.N,this.M),o=new Float64Array(this.M),h=new i(o,this.M,1),a=new Float64Array(this.M*this.M),u=new i(a,this.M,this.M);if(!this.svd(r,h,u,s))return!1;let m=Math.max(this.N,this.M),l=e*Math.abs(h.at(0))*m;for(let y=0;y<this.M;y++)h.at(y)>l?h.set(y,1/h.at(y)):h.set(y,0);return u.mulDiag(h,t),t.mulTranspose(r,t),!0}luDecomposition(t,s){return p(0),!1}symmetricEigen(t,s){p(this.rows()===this.cols()),p(this.rows()===t.rows()),p(s.rows()===s.cols()&&s.rows()===this.rows()),p(this.isSymmetric());let e=new Float64Array(this.N*this.M),n=new i(e,this.N,this.M);n.assignCopy(this);let r=100/Number.EPSILON,o=this.rows(),h=new Float64Array(o),a=new Float64Array(o),u=new i(h,o,1),m=new i(a,o,1);for(let y=0;y<o;y++)u.set(y,n.atRowCol(y,y)),t.set(y,n.atRowCol(y,y)),m.set(y,0);s.setIdentity();let l=()=>{let y=u;s.transposeInPlace();let N=1;do N*=3,N++;while(N<=o);do{N/=3,N=Math.trunc(N);for(let b=N;b<o;b++){let f=t.at(b),w=Math.abs(f);for(let _=0;_<this.M;_++)y.set(_,s.atRowCol(_,b));let v=b;for(;Math.abs(t.at(v-N))<w;){t.set(v,t.at(v-N));for(let _=0;_<this.M;_++)s.setRowCol(_,v,s.atRowCol(_,v-N));if(v-=N,v<N)break}if(v!==b){t.set(v,f);for(let _=0;_<this.M;_++)s.setRowCol(_,v,y.at(_))}}}while(N>1)};for(let y=1;;y++){let N=0;for(let f=1;f<o;f++)for(let w=0;w<f;w++)N+=Math.abs(n.atRowCol(f,w));if(N===0)return l(),!0;let b=y<4?.2*N/(o*o):0;for(let f=0;f<o;f++)for(let w=f+1;w<o;w++){let v=r*Math.abs(n.atRowCol(w,f));if(y>4&&v<=Math.abs(t.at(f))&&v<=Math.abs(t.at(w)))n.setRowCol(w,f,0);else if(Math.abs(n.atRowCol(w,f))>b){let _,T=t.at(w)-t.at(f);if(v<Math.abs(T))_=n.atRowCol(w,f)/T;else{let S=.5*T/n.atRowCol(w,f);_=1/(Math.abs(S)+Math.sqrt(1+S*S)),S<0&&(_=-_)}let R=1/Math.sqrt(1+_*_),E=_*R,A=E/(1+R);T=_*n.atRowCol(w,f),m.set(f,m.at(f)-T),m.set(w,m.at(w)+T),t.set(f,t.at(f)-T),t.set(w,t.at(w)+T),n.setRowCol(w,f,0);let g=0;for(;g<f;g++)v=n.atRowCol(f,g),T=n.atRowCol(w,g),n.setRowCol(f,g,v-E*(T+v*A)),n.setRowCol(w,g,T+E*(v-T*A));for(g++;g<w;g++)v=n.atRowCol(g,f),T=n.atRowCol(w,g),n.setRowCol(g,f,v-E*(T+v*A)),n.setRowCol(w,g,T+E*(v-T*A));for(g++;g<o;g++)v=n.atRowCol(g,f),T=n.atRowCol(g,w),n.setRowCol(g,f,v-E*(T+v*A)),n.setRowCol(g,w,T+E*(v-T*A));for(g=0;g<o;g++)v=s.atRowCol(f,g),T=s.atRowCol(w,g),s.setRowCol(f,g,v-E*(T+v*A)),s.setRowCol(w,g,T+E*(v-T*A))}}for(let f=0;f<o;f++)u.set(f,u.at(f)+m.at(f)),t.set(f,u.at(f)),m.set(f,0)}}static checkDims(t,s,e){p(t.rows()===s&&t.cols()===e)}},B=class extends gt{constructor(t){if(t.copy){let e=new Float64Array(t.copy.N*t.copy.M);return super(e,t.copy.N,t.copy.M),this.buffer=e,void this.assignCopy(t.copy)}let s=new Float64Array(t.NN*t.MM);super(s,t.NN,t.MM),this.buffer=s,t.initializerList&&Q(this.buffer,t.initializerList,0,0,t.initializerList.length)}assignCopy(t){return this===t||super.assignCopy(t),this}},Tt=class i{constructor(t){this.m_TransformationType=1,t===void 0?this.setIdentity():t instanceof i?this.set(t):this.setScale(t)}set(t){return this.xx=t.xx,this.xy=t.xy,this.xd=t.xd,this.yx=t.yx,this.yy=t.yy,this.yd=t.yd,this}clone(){return new i().set(this)}setZero(){this.xx=0,this.yy=0,this.xy=0,this.yx=0,this.xd=0,this.yd=0}isEqual(t){return this===t||this.xx===t.xx&&this.xy===t.xy&&this.xd===t.xd&&this.yx===t.yx&&this.yy===t.yy&&this.yd===t.yd}transformInPlace(t){let s=this.xx*t.x+this.xy*t.y+this.xd,e=this.yx*t.x+this.yy*t.y+this.yd;t.x=s,t.y=e}transform(t){let s=t.clone();return this.transformInPlace(s),s}queryTransform(t,s){let e=this.xx*t.x+this.xy*t.y+this.xd,n=this.yx*t.x+this.yy*t.y+this.yd;s.setCoords(e,n)}transformEnvInPlace(t){if(t.isEmpty())return;let s=_t(I,4);t.queryCorners(s),this.transformPoints2D(s,4,s),t.setFromPoints(s,4)}queryTransformEnv(t,s){p(0)}transformPoints2D(t,s,e){for(let n=0;n<s;++n)this.queryTransform(t[n],e[n])}transformInterleavedPoints(t,s,e){s*=2;let n=I.getNAN();for(let r=0;r<s;r+=2)n.x=t[r],n.y=t[r+1],this.transformInPlace(n),e[r]=n.x,e[r+1]=n.y}multiply(t){return i.st_multiply(this,t,this),this}mulLeft(t){return p(0),this}static st_multiply(t,s,e){let n=t.xx*s.xx+t.yx*s.xy,r=t.xy*s.xx+t.yy*s.xy,o=t.xd*s.xx+t.yd*s.xy+s.xd,h=t.xx*s.yx+t.yx*s.yy,a=t.xy*s.yx+t.yy*s.yy,u=t.xd*s.yx+t.yd*s.yy+s.yd;e.xx=n,e.xy=r,e.xd=o,e.yx=h,e.yy=a,e.yd=u}getCoefficients(t){p(t.length>=6),t[0]=this.xx,t[1]=this.xy,t[2]=this.xd,t[3]=this.yx,t[4]=this.yy,t[5]=this.yd}setCoefficients(t){p(t.length>=6),this.xx=t[0],this.xy=t[1],this.xd=t[2],this.yx=t[3],this.yy=t[4],this.yd=t[5]}copyTo(t){p(0)}initializeFromRect(t,s){t.isEmpty()||s.isEmpty()||!t.width()||!t.height()?this.setZero():(this.xy=this.yx=0,this.xx=s.width()/t.width(),this.yy=s.height()/t.height(),this.xd=s.xmin-t.xmin*this.xx,this.yd=s.ymin-t.ymin*this.yy)}initializeFromRectIsotropic(t,s){if(t.isEmpty()||!t.width()||!t.height()||s.isEmpty())this.setZero();else{this.yx=0,this.xy=0,this.xx=s.width()/t.width(),this.yy=s.height()/t.height(),this.xx>this.yy?this.xx=this.yy:this.yy=this.xx;let e=s.getCenter(),n=t.getCenter();this.xd=e.x-n.x*this.xx,this.yd=e.y-n.y*this.yy}}initializeFromTwoPointsArray(t,s){if(t[0].equals(s[0])&&t[1].equals(s[1]))return void this.setIdentity();if(t[0].equals(t[1])){if(s[0].equals(s[1]))return void this.setShift(s[0].sub(t[0]));G("")}if(!t[0].equals(t[1])&&s[0].equals(s[1]))return this.setZero(),void this.shift(s[0]);this.setShiftCoords(-t[0].x,-t[0].y);let e=I.distance(t[0],t[1]),n=I.distance(s[0],s[1]),r=n/e;this.scale(r,r);let o=t[1].sub(t[0]);o.divThis(e);let h=s[1].sub(s[0]);h.divThis(n);let a=o.crossProduct(h),u=o.dotProduct(h);this.rotate(u,a),this.shiftCoords(s[0].x,s[0].y)}initializeFromTwoPoints(t,s,e,n){let r=[t,s],o=[e,n];this.initializeFromTwoPointsArray(r,o)}transformSizeInPlace(t){p(0)}transformSize(t,s){p(0)}transformTol(t){return p(0),0}transformWithoutTranslateArray(t,s,e){for(let n=0;n<s;++n)this.transformWithoutTranslate(t[n],e[n])}transformWithoutTranslateInPlace(t){let s=this.xx*t.x+this.xy*t.y,e=this.yx*t.x+this.yy*t.y;t.setCoords(s,e)}transformWithoutTranslate(t,s){let e=this.xx*t.x+this.xy*t.y,n=this.yx*t.x+this.yy*t.y;s.setCoords(e,n)}setIdentity(){this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=1,this.yd=0}isIdentity(){return!(this.xx!==1||this.yy!==1||this.xy||this.xd||this.yx||this.yd)}isIdentityTol(t){let s=t*t;return!(U(this.xd)+U(this.yd)>s)&&!(U(this.xy+this.xd)+U(this.yy+this.yd-1)>s)&&!(U(this.xx+this.xd-1)+U(this.yx+this.yd)>s)}isReflective(){return this.xx*this.yy-this.yx*this.xy<0}isUniform(t){let s=this.xx*this.xx+this.yx*this.yx,e=this.xy*this.xy+this.yy*this.yy,n=(s+e)*t;return Math.abs(s-e)<=n&&Math.abs(this.xx*this.xy+this.yx*this.yy)<=n}isUniformNoRotation(){return this.xx!==0&&Math.abs(this.xx)===Math.abs(this.yy)&&this.xy===0&&this.yx===0}isTranslate(){return this.xx===1&&this.yy===1&&!this.xy&&!this.yx}isTranslateTol(t){let s=new I;return s.setCoords(0,1),this.transformWithoutTranslateInPlace(s),s.y-=1,!(s.sqrLength()>t*t)&&(s.setCoords(1,0),this.transformWithoutTranslateInPlace(s),s.x-=1,s.sqrLength()<=t*t)}isOrthonormal(t){let s=new i;return s.xx=this.xx*this.xx+this.xy*this.xy,s.xy=this.xx*this.yx+this.xy*this.yy,s.yx=this.yx*this.xx+this.yy*this.xy,s.yy=this.yx*this.yx+this.yy*this.yy,s.xd=0,s.yd=0,s.isIdentityTol(t)}isDegenerate(t){return Math.abs(this.xx*this.yy-this.yx*this.xy)<=2*t*(Math.abs(this.xx*this.yy)+Math.abs(this.yx*this.xy))}isZero(){return this.xx===0&&this.yy===0&&this.xy===0&&this.yx===0&&this.xd===0&&this.yd===0}isScaleAndTranslateTol(t){return this.xy*this.xy+this.yx*this.yx<=(this.xx*this.xx+this.yy*this.yy)*t}setTranslate(t,s){return this.xx=1,this.xy=0,this.xd=t,this.yx=0,this.yy=1,this.yd=s,this}setShiftCoords(t,s){return this.xx=1,this.xy=0,this.xd=t,this.yx=0,this.yy=1,this.yd=s,this}setShift(t){return this.xx=1,this.xy=0,this.xd=t.x,this.yx=0,this.yy=1,this.yd=t.y,this}setScaleCoords(t,s){return this.xx=t,this.xy=0,this.xd=0,this.yx=0,this.yy=s,this.yd=0,this}setScale(t){return this.setScaleCoords(t,t),this}setFlipX(t,s){return this.xx=-1,this.xy=0,this.xd=t+s,this.yx=0,this.yy=1,this.yd=0,this}setFlipY(t,s){return this.xx=1,this.xy=0,this.xd=0,this.yx=0,this.yy=-1,this.yd=t+s,this}setShear(t,s){return this.xx=1,this.xy=t,this.xd=0,this.yx=s,this.yy=1,this.yd=0,this}scale(t,s){return this.xx*=t,this.xy*=t,this.xd*=t,this.yx*=s,this.yy*=s,this.yd*=s,this}setRotateAngle(t){return this.setRotate(Math.cos(t),Math.sin(t))}setRotate(t,s){return this.xx=t,this.xy=-s,this.xd=0,this.yx=s,this.yy=t,this.yd=0,this}setRotateAngleAbout(t,s){return this.setRotateAbout(Math.cos(t),Math.sin(t),s)}setRotateAbout(t,s,e){return this.setTranslate(-e.x,-e.y),this.rotate(t,s),this.translate(e.x,e.y)}setSwapCoordinates(){return this.xx=0,this.xy=1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}setRotateCw90(){return this.xx=0,this.xy=1,this.xd=0,this.yx=-1,this.yy=0,this.yd=0,this}setRotateCcw90(){return this.xx=0,this.xy=-1,this.xd=0,this.yx=1,this.yy=0,this.yd=0,this}shiftCoords(t,s){return this.xd+=t,this.yd+=s,this}shift(t){return this.xd+=t.x,this.yd+=t.y,this}translate(t,s){return this.xd+=t,this.yd+=s,this}flipX(t,s){return this.xx=-this.xx,this.xy=-this.xy,this.xd=t+s-this.xd,this}flipY(t,s){return this.yx=-this.yx,this.yy=-this.yy,this.yd=t+s-this.yd,this}shear(t,s){let e=new i;return e.setShear(t,s),this.multiply(e)}rotateAngle(t){let s=new i;return s.setRotateAngle(t),this.multiply(s)}rotate(t,s){let e=new i;return e.setRotate(t,s),this.multiply(e)}rotateAbout(t,s,e){return this.translate(-e.x,-e.y),this.rotate(t,s),this.translate(e.x,e.y)}rotateAngleAbout(t,s){return this.rotateAbout(Math.cos(t),Math.sin(t),s)}setInvert(t){return this.set(t),this.invertThis()}invertThis(){let t=this.xx*this.yy-this.xy*this.yx;if(t===0)return this.setZero(),this;t=1/t;let s=(this.xy*this.yd-this.xd*this.yy)*t,e=(this.xd*this.yx-this.xx*this.yd)*t,n=this.yy*t,r=-this.xy*t,o=-this.yx*t,h=this.xx*t;return this.xd=s,this.yd=e,this.xx=n,this.yy=h,this.xy=r,this.yx=o,this}invertPrecise(t){return this.set(t),this.invertPreciseThis()}invertPreciseThis(){let t=C.constructDouble(this.xy),s=C.constructDouble(this.xx),e=s.mulDouble(this.yy).sub(t.mulDouble(this.yx));if(e.isZero())return this.setZero(),this;let n=e.clone();n.invertThis();let r=C.constructDouble(this.xd),o=t.mulDouble(this.yd).sub(r.mulDouble(this.yy)).mul(n).toDouble(),h=r.mulDouble(this.yx).sub(s.mulDouble(this.yd)).mul(n).toDouble(),a=n.mulDouble(this.yy).toDouble(),u=n.mulDouble(-this.xy).toDouble(),m=n.mulDouble(-this.yx).toDouble(),l=n.mulDouble(this.xx).toDouble();return this.xd=o,this.yd=h,this.xx=a,this.yy=l,this.xy=u,this.yx=m,this}extractScaleTransform(t,s){let e=Math.sqrt(this.xx*this.xx+this.xy*this.xy),n=Math.sqrt(this.yx*this.yx+this.yy*this.yy);s.setScaleCoords(1/e,1/n),s.multiply(this),t.setScaleCoords(e,n)}setFromTwoTriangles(t,s){let e=!0;for(let m=0;m<3;++m)e=e&&t[m].equals(s[m]);if(e)return this.setIdentity(),!0;let n=new I;n.setSub(t[0],t[1]);let r=new I;r.setSub(t[0],t[2]);let o=new I;o.setSub(s[0],s[1]);let h=new I;h.setSub(s[0],s[2]);let a=4*Number.EPSILON*(Math.abs(n.x*r.y)+Math.abs(r.x*n.y)),u=n.x*r.y-n.y*r.x;return Math.abs(u)>a?(u=1/u,this.xx=(o.x*r.y-n.y*h.x)*u,this.xy=(n.x*h.x-o.x*r.x)*u,this.yx=(o.y*r.y-n.y*h.y)*u,this.yy=(n.x*h.y-o.y*r.x)*u,this.xd=s[0].x-(this.xx*t[0].x+this.xy*t[0].y),this.yd=s[0].y-(this.yx*t[0].x+this.yy*t[0].y),!0):(this.setZero(),!1)}initializeFromControlPoints(t,s,e,n,r=null){return s===0?(this.setIdentity(),void(r&&r.setIdentity())):s===1?(this.setShift(n[0].sub(e[0])),void(r&&r.setShift(e[0].sub(n[0])))):(s<3&&(t=1),void(t===4&&s>2?xi(this,s,e,n,r):fi(t,this,s,e,n,r)))}calculateErrors(t,s,e,n){p(t>0&&s!==null&&e!==null);let r=0;for(let o=0;o<t;++o){let h=this.transform(s[o]),a=I.sqrDistance(e[o],h);r+=a,n&&(n[o]=Math.sqrt(a))}return Math.sqrt(r/t)}},it=[43,11,41,9,61];function Rt(i,t){p(!(t.rows()!==2&&t.rows()!==3||t.cols()!==2&&t.rows()!==3)),i.xx=t.atRowCol(0,0),i.xy=t.atRowCol(0,1),i.yx=t.atRowCol(1,0),i.yy=t.atRowCol(1,1),t.cols()===3?(i.xd=t.atRowCol(0,2),i.yd=t.atRowCol(1,2)):(i.xd=0,i.yd=0)}function xi(i,t,s,e,n){let r=I.average(s,t),o=I.average(e,t),h=new B({NN:2,MM:2});h.setZero();let a=new B({NN:2,MM:2});a.setZero();for(let l=0;l<t;++l)h.setRowCol(0,0,h.atRowCol(0,0)+(s[l].x-r.x)*(s[l].x-r.x)),h.setRowCol(0,1,h.atRowCol(0,1)+(s[l].x-r.x)*(s[l].y-r.y)),h.setRowCol(1,1,h.atRowCol(1,1)+(s[l].y-r.y)*(s[l].y-r.y)),a.setRowCol(0,0,a.atRowCol(0,0)+(e[l].x-o.x)*(s[l].x-r.x)),a.setRowCol(0,1,a.atRowCol(0,1)+(e[l].x-o.x)*(s[l].y-r.y)),a.setRowCol(1,0,a.atRowCol(1,0)+(e[l].y-o.y)*(s[l].x-r.x)),a.setRowCol(1,1,a.atRowCol(1,1)+(e[l].y-o.y)*(s[l].y-r.y));h.setRowCol(1,0,h.atRowCol(0,1));let u=new B({NN:2,MM:2});h.pseudoInverse(u,!0)||et("Failed to compute pseudo inverse"),a.mul(u,a),Rt(i,a);let m=r.clone();i.transformInPlace(m),i.xd=o.x-m.x,i.yd=o.y-m.y,n&&(a.pseudoInverse(u,!1)||et("Failed to compute pseudo inverse"),Rt(n,u),n.transformInPlace(o),n.xd=r.x-o.x,n.yd=r.y-o.y)}function fi(i,t,s,e,n,r){p(i===1||i===0||i===2||i===3),t.setIdentity();let o=I.average(e,s),h=I.average(n,s);if(p(i<it.length&&i>0),8&it[i]){let u=new B({NN:2,MM:2});u.setZero();for(let w=0;w<s;++w)u.setRowCol(0,0,u.atRowCol(0,0)+(n[w].x-h.x)*(e[w].x-o.x)),u.setRowCol(1,0,u.atRowCol(1,0)+(n[w].x-h.x)*(e[w].y-o.y)),u.setRowCol(0,1,u.atRowCol(0,1)+(n[w].y-h.y)*(e[w].x-o.x)),u.setRowCol(1,1,u.atRowCol(1,1)+(n[w].y-h.y)*(e[w].y-o.y));let m=new B({NN:2,MM:2}),l=new B({NN:2,MM:1}),y=new B({NN:2,MM:2});u.svd(m,l,y)||et("Failed to compute svd");let N=new B({NN:2,MM:2});m.transpose(N);let b=new B({NN:2,MM:2});y.mul(N,b),!(32&it[i])&&b.determinant()<0&&(N.setRowCol(1,0,-N.atRowCol(1,0)),N.setRowCol(1,1,-N.atRowCol(1,1)),y.mul(N,b));let f=new Tt;Rt(f,b),t.set(f)}if(2&it[i]){let u=0,m=0;for(let l=0;l<s;++l){let y=e[l].sub(o);u+=y.sqrLength(),t.transformInPlace(y),m+=y.dotProduct(n[l].sub(h))}if(u===0)m===0?t.setIdentity():t.setZero();else{let l=m/u;t.scale(l,l)}}else p(!(4&it[i]));let a=o.clone();t.transformInPlace(a),t.xd=h.x-a.x,t.yd=h.y-a.y,r&&(r.set(t),r.invertThis(),r.isZero()&&(r.xd=o.x,r.yd=o.y))}export{p as a,V as b,di as c,bi as d,vi as e,wi as f,Ut as g,ws as h,Ns as i,ps as j,Ni as k,Qt as l,pi as m,Mi as n,G as o,_i as p,Ci as q,gi as r,W as s,Vt as t,Ms as u,Ti as v,Ri as w,Ei as x,Ii as y,Cs as z,Ai as A,Di as B,Pi as C,qi as D,tt as E,rt as F,D as G,Si as H,ot as I,Fi as J,ki as K,Bi as L,Li as M,Gi as N,Oi as O,Ui as P,Qi as Q,Bs as R,Ls as S,Vi as T,Wi as U,ji as V,pt as W,Yi as X,Xi as Y,jt as Z,$i as _,U as $,Ji as aa,Ki as ba,Hi as ca,te as da,se as ea,ie as fa,os as ga,Us as ha,ee as ia,ne as ja,re as ka,Q as la,oe as ma,$ as na,Vs as oa,he as pa,ae as qa,ue as ra,le as sa,ce as ta,me as ua,ye as va,xe as wa,fe as xa,_t as ya,de as za,be as Aa,ve as Ba,we as Ca,Ws as Da,Ne as Ea,Kt as Fa,Ht as Ga,js as Ha,Ys as Ia,Xs as Ja,ts as Ka,pe as La,is as Ma,Me as Na,_e as Oa,Ce as Pa,ge as Qa,Te as Ra,ys as Sa,Re as Ta,Ee as Ua,Ct as Va,Ie as Wa,ni as Xa,Ae as Ya,De as Za,Pe as _a,qe as $a,es as ab,ze as bb,Ze as cb,X as db,Se as eb,ds as fb,Fe as gb,ke as hb,ns as ib,Be as jb,O as kb,Le as lb,ui as mb,C as nb,Ge as ob,Oe as pb,Ue as qb,Qe as rb,Ve as sb,I as tb,Tt as ub};
