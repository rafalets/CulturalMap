import{a as U}from"./chunk-4D3QHJI2.js";import{a as V,d as A,e as W,f as Y,g as _}from"./chunk-E2J2V7JN.js";import{d as q,n as H}from"./chunk-IPGHBSHO.js";import{b as P,c as L}from"./chunk-JH4RD366.js";import{a as z}from"./chunk-J5MXC6AL.js";import{b as R,g as h}from"./chunk-UAKHZRKN.js";import{F as C,d as O}from"./chunk-E57FTRWF.js";import{h as N}from"./chunk-D2LVMNOU.js";import{t as E}from"./chunk-HHDFN2GK.js";import{a as j}from"./chunk-47GHT6OF.js";var gt=0;function Q(){return gt++}var pt=0;function Z(){return pt++}var mt=0;function J(){return mt++}var yt="http://www.w3.org/2000/svg",K=j("android"),xt=j("chrome")||K&&K>=4?"auto":"optimizeLegibility",wt={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},kt=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g,d={},l={},bt=Math.PI;function M(t,e){let i=t*(bt/180);return Math.abs(e*Math.sin(i))+Math.abs(e*Math.cos(i))}function nt(t){return t.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function rt(t,e,i,n,o){if(t){if(t.type==="circle")return h("circle",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",r:t.r,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-dashoffset":i.dashOffset,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="ellipse")return h("ellipse",{cx:t.cx,cy:t.cy,fill:e,"fill-rule":"evenodd",rx:t.rx,ry:t.ry,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width});if(t.type==="rect")return h("rect",{fill:e,"fill-rule":"evenodd",height:t.height,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,width:t.width,x:t.x,y:t.y});if(t.type==="image")return h("image",{alt:o||"image",height:t.height,href:t.src,preserveAspectRatio:"none",width:t.width,x:t.x,y:t.y});if(t.type==="path"){let r=typeof t.path!="string"?nt(t.path):t.path;return h("path",{d:r,fill:e,"fill-rule":"evenodd",stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width})}if(t.type==="text")return N(n),h("text",{"dominant-baseline":n.dominantBaseline,fill:e,"fill-rule":"evenodd","font-family":n.font.family,"font-size":n.font.size,"font-style":n.font.style,"font-variant":n.font.variant,"font-weight":n.font.weight,kerning:n.kerning,rotate:n.rotate,stroke:i.color,"stroke-dasharray":i.dashArray,"stroke-linecap":i.cap,"stroke-linejoin":i.join,"stroke-miterlimit":"4","stroke-width":i.width,"text-anchor":n.align,"text-decoration":n.decoration,"text-rendering":xt,x:t.x,y:t.y},t.text)}return null}function ot(t){if(!t)return{fill:"none",pattern:null,linearGradient:null};if(!("type"in t))return{fill:new z(t).toString(),pattern:null,linearGradient:null};if(t.type==="pattern"){let i=`patternId-${Q()}`;return{fill:`url(#${i})`,pattern:{id:i,x:t.x,y:t.y,width:t.width,height:t.height,image:{x:0,y:0,width:t.width,height:t.height,href:t.src}},linearGradient:null}}let e=`linearGradientId-${Z()}`;return{fill:`url(#${e})`,pattern:null,linearGradient:{id:e,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,stops:t.colors.map(i=>({offset:i.offset,color:i.color&&new z(i.color).toString()}))}}}function at(t){let e={color:"none",width:1,cap:"butt",join:"4",dashArray:"none",dashOffset:"0"};return t&&(t.width!=null&&(e.width=t.width),t.cap&&(e.cap=t.cap),t.join&&(e.join=t.join.toString()),t.color&&(e.color=new z(t.color).toString()),t.dashArray&&(e.dashArray=t.dashArray),t.dashoffset&&(e.dashOffset=t.dashoffset),t.style&&!t.dashArray&&(e.dashArray=q(t).join(",")||"none")),e}function st(t,e){let i={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};if(t){let n=t.alignBaseline,o=n==="baseline"?"auto":n==="top"?"text-top":n==="bottom"?"hanging":n;i.align=t.align,i.dominantBaseline=o,i.decoration=t.decoration,i.kerning=t.kerning?"auto":"0",i.rotate=t.rotated?"90":"0",N(e),i.font.style=e.style||"normal",i.font.variant=e.variant||"normal",i.font.weight=e.weight||"normal",i.font.size=e.size&&e.size.toString()||"10pt",i.font.family=e.family||"serif"}return i}function Mt(t){let{pattern:e,linearGradient:i}=t;if(e)return h("pattern",{height:e.height,id:e.id,patternUnits:"userSpaceOnUse",width:e.width,x:e.x,y:e.y},h("image",{height:e.image.height,href:e.image.href,width:e.image.width,x:e.image.x,y:e.image.y}));if(i){let n=i.stops.map((o,r)=>h("stop",{key:`${r}-stop`,offset:o.offset,"stop-color":o.color}));return h("linearGradient",{gradientUnits:"userSpaceOnUse",id:i.id,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2},n)}return null}function St(t,e){if(!t||t.length===0)return null;let i=[];for(let n of t){let{shape:o,fill:r,stroke:a,font:c}=n,s=ot(r),g=at(a),p=o.type==="text"?st(o,c):null,m=rt(o,s.fill,g,p);m&&i.push(m)}return h("mask",{id:e,maskUnits:"userSpaceOnUse"},h("g",null,i))}function X(t,e,i){return _(t,V(t),[e,i])}function tt(t,e,i,n,o){return Y(t,V(t),[e,i]),t[4]=t[4]*e-n*e+n,t[5]=t[5]*i-o*i+o,t}function vt(t,e,i,n){let o=e%360*Math.PI/180;W(t,V(t),o);let r=Math.cos(o),a=Math.sin(o),c=t[4],s=t[5];return t[4]=c*r-s*a+n*a-i*r+i,t[5]=s*r+c*a-i*a-n*r+n,t}function w(t,e){d&&"left"in d?(d.left!=null&&d.left>t&&(d.left=t),(d.right==null||d.right<t)&&(d.right=t),(d.top==null||d.top>e)&&(d.top=e),(d.bottom==null||d.bottom<e)&&(d.bottom=e)):d={left:t,bottom:e,right:t,top:e}}function et(t){let e=t.args,i=e.length,n;switch(t.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(n=0;n<i;n+=2)w(e[n],e[n+1]);l.x=e[i-2],l.y=e[i-1];break;case"H":for(n=0;n<i;++n)w(e[n],l.y);l.x=e[i-1];break;case"V":for(n=0;n<i;++n)w(l.x,e[n]);l.y=e[i-1];break;case"m":{let o=0;for(("x"in l)||(w(l.x=e[0],l.y=e[1]),o=2),n=o;n<i;n+=2)w(l.x+=e[n],l.y+=e[n+1]);break}case"l":case"t":for(n=0;n<i;n+=2)w(l.x+=e[n],l.y+=e[n+1]);break;case"h":for(n=0;n<i;++n)w(l.x+=e[n],l.y);break;case"v":for(n=0;n<i;++n)w(l.x,l.y+=e[n]);break;case"c":for(n=0;n<i;n+=6)w(l.x+e[n],l.y+e[n+1]),w(l.x+e[n+2],l.y+e[n+3]),w(l.x+=e[n+4],l.y+=e[n+5]);break;case"s":case"q":for(n=0;n<i;n+=4)w(l.x+e[n],l.y+e[n+1]),w(l.x+=e[n+2],l.y+=e[n+3]);break;case"A":for(n=0;n<i;n+=7)w(e[n+5],e[n+6]);l.x=e[i-2],l.y=e[i-1];break;case"a":for(n=0;n<i;n+=7)w(l.x+=e[n+5],l.y+=e[n+6])}}function it(t,e,i){let n=wt[t.toLowerCase()],o;typeof n=="number"&&(n?e.length>=n&&(o={action:t,args:e.slice(0,e.length-e.length%n)},i.push(o),et(o)):(o={action:t,args:[]},i.push(o),et(o)))}function It(t){let e=(typeof t.path!="string"?nt(t.path):t.path).match(kt),i=[];if(d={},l={},!e)return null;let n="",o=[],r=e.length;for(let c=0;c<r;++c){let s=e[c],g=parseFloat(s);isNaN(g)?(n&&it(n,o,i),o=[],n=s):o.push(g)}it(n,o,i);let a={x:0,y:0,width:0,height:0};return d&&"left"in d&&(a.x=d.left,a.y=d.top,a.width=d.right-d.left,a.height=d.bottom-d.top),a}function Gt(t){let e={x:0,y:0,width:0,height:0};if(t.type==="circle")e.x=t.cx-t.r,e.y=t.cy-t.r,e.width=2*t.r,e.height=2*t.r;else if(t.type==="ellipse")e.x=t.cx-t.rx,e.y=t.cy-t.ry,e.width=2*t.rx,e.height=2*t.ry;else if(t.type==="image"||t.type==="rect")e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height;else if(t.type==="path"){let i=It(t);e.x=i.x,e.y=i.y,e.width=i.width,e.height=i.height}return e}function $t(t){let e={x:0,y:0,width:0,height:0},i=null,n=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let r of t)i?(i.x=Math.min(i.x,r.x),i.y=Math.min(i.y,r.y),n=Math.max(n,r.x+r.width),o=Math.max(o,r.y+r.height)):(i=e,i.x=r.x,i.y=r.y,n=r.x+r.width,o=r.y+r.height);return i&&(i.width=n-i.x,i.height=o-i.y),i}function At(t,e,i,n,o,r,a,c,s){let g=(a&&r?M(r,e):e)/2,p=(a&&r?M(r,i):i)/2;if(s){let k=s[0],x=s[1];g=(a&&r?M(r,k):k)/2,p=(a&&r?M(r,x):x)/2}let m=t.width+n,u=t.height+n,y=U(),f=U(),S=!1;if(o&&m!==0&&u!==0){let k=e!==i?e/i:m/u,x=e>i?e:i,$=1,I=1;isNaN(x)||(k>1?($=x/m,I=x/k/u):(I=x/u,$=x*k/m)),A(f,f,tt(y,$,I,g,p)),S=!0}let b=t.x+(m-n)/2,v=t.y+(u-n)/2;if(A(f,f,X(y,g-b,p-v)),!S&&(m>e||u>i)){let k=m/e>u/i,x=(k?e:i)/(k?m:u);A(f,f,tt(y,x,x,b,v))}return c&&A(f,f,X(y,c[0],c[1])),r&&A(f,f,vt(y,r,b,v)),`matrix(${f[0]},${f[1]},${f[2]},${f[3]},${f[4]},${f[5]})`}function jt(t,e,i){let n=t?.effects.find(g=>g.type==="bloom");if(!n)return null;let{strength:o,radius:r}=n,a=o>0?r:0,c=(o+a)*e,s=4*o+1;return h("filter",{filterUnits:"userSpaceOnUse",height:"300%",id:`bloom${i}`,width:"300%",x:"-100%",y:"-100%"},h("feMorphology",{in:"SourceGraphic",operator:"dilate",radius:(o+.5*a)*(5**(e/100)*(.4+e/100)),result:"dilate"}),h("feGaussianBlur",{in:"dilate",result:"blur",stdDeviation:c/25}),h("feGaussianBlur",{in:"blur",result:"intensityBlur",stdDeviation:c/50}),h("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},h("feFuncR",{slope:s,type:"linear"}),h("feFuncG",{slope:s,type:"linear"}),h("feFuncB",{slope:s,type:"linear"})),h("feMerge",null,h("feMergeNode",{in:"intensityBlur"}),h("feMergeNode",{in:"intensityBrightness"}),h("feGaussianBlur",{stdDeviation:o/10})))}function lt(t,e,i,n={}){let o=[],r=[],a=J(),c=jt(n.effectView,e,a),s=null;if(c){let u=n.effectView?.effects.find(b=>b.type==="bloom"),y=(u.strength?u.strength+u.radius/2:0)/3,f=e+e*y,S=i+i*y;s=[Math.max(f,10),Math.max(S,10)]}let g=e,p=i;if(n.useRotationSize)for(let u=0;u<t.length;u++){let y=n.rotations?.[u]??0;g=Math.max(M(y,e),g),p=Math.max(M(y,i),p)}for(let u=0;u<t.length;u++){let y=t[u],f=[],S=[],b=0,v=0,k=0;for(let B of y){let{shape:G,fill:ct,stroke:D,font:ft,offset:F}=B;n.ignoreStrokeWidth||G.type==="text"||(b+=D?.width||0);let T=ot(ct),ut=at(D),dt=G.type==="text"?st(G,ft):null;o.push(Mt(T)),f.push(rt(G,T.fill,ut,dt,n.ariaLabel)),S.push(Gt(G)),F&&(v+=F[0],k+=F[1])}let x=n.rotations?.[u]??0;n.useRotationSize&&(v+=(g-M(x,e))/2,k+=(p-M(x,i))/2);let $=At($t(S),e,i,b,n.scale??!1,x,n.useRotationSize??!1,[v,k],s),I=null;if(n.masking){let B=`mask-${u}`,G=n.masking[u];o.push(St(G,B)),I=`url(#${B})`}r.push(I?h("g",{mask:I},h("g",{transform:$},f)):h("g",{transform:$},f))}return c&&(N(s),g=s[0],p=s[1]),h("svg",{"aria-label":n.ariaLabel,focusable:!1,height:p,role:"img",style:"display: block;",width:g,xmlns:yt},c,h("defs",null,o),c?h("g",{filter:`url(#bloom${a})`},r):r)}var ht=R();function Bt(t,e){ht.append(t,e),ht.detach(e)}function ee(t,e,i){let n=Math.ceil(e[0]),o=Math.ceil(e[1]);if(!t.some(a=>!!a.length))return null;let r=i?.node||document.createElement("div");return i.opacity!=null&&(r.style.opacity=i.opacity.toString()),i.effectView!=null&&(r.style.filter=H(i.effectView)),Bt(r,()=>lt(t,n,o,i)),r}function Nt(t,e){t=Math.ceil(t),e=Math.ceil(e);let i=document.createElement("canvas");i.width=t,i.height=e,i.style.width=t+"px",i.style.height=e+"px";let n=i.getContext("2d");return n.clearRect(0,0,t,e),n}function zt(t,e,i){return t?C(t,{responseType:"image"}).then(n=>{let o=n.data,r=o.width,a=o.height,c=r/a,s=e;if(i){let g=Math.max(r,a);s=Math.min(s,g)}return{image:o,width:c<=1?Math.ceil(s*c):s,height:c<=1?s:Math.ceil(s/c)}}):Promise.reject(new E("renderUtils: imageDataSize","href not provided."))}function Vt(t,e){return!(!t||e==="ignore")&&(e!=="multiply"||t.r!==255||t.g!==255||t.b!==255||t.a!==1)}function Ft(t,e,i,n,o){switch(o){case"multiply":t[e]*=i[0],t[e+1]*=i[1],t[e+2]*=i[2],t[e+3]*=i[3];break;default:{let r=L({r:t[e],g:t[e+1],b:t[e+2]});r.h=n.h,r.s=n.s,r.v=r.v/100*n.v;let a=P(r);t[e]=a.r,t[e+1]=a.g,t[e+2]=a.b,t[e+3]*=i[3];break}}}function ie(t,e,i,n,o){return zt(t,e,o).then(r=>{let a=r.width??e,c=r.height??e;if(r.image&&Vt(i,n)){let s=r.image.width,g=r.image.height;j("edge")&&/\.svg$/i.test(t)&&(s-=1,g-=1);let p=Nt(a,c);p.drawImage(r.image,0,0,s,g,0,0,a,c);let m=p.getImageData(0,0,a,c),u=[i.r/255,i.g/255,i.b/255,i.a],y=L(i);for(let f=0;f<m.data.length;f+=4)Ft(m.data,f,u,y,n);p.putImageData(m,0,0),t=p.canvas.toDataURL("image/png")}else{let s=O?.findCredential(t);if(s?.token){let g=t.includes("?")?"&":"?";t=`${t}${g}token=${s.token}`}}return{url:t,width:a,height:c}}).catch(()=>({url:t,width:e,height:e}))}export{rt as a,ot as b,at as c,Mt as d,Gt as e,$t as f,At as g,lt as h,ee as i,ie as j};
